---
title: Undoing and redoing
author: Marie-Hélène Burle
---

:::{.def}



:::

## Linear systems: classic undo/redo

<center>You have some file:</center>

```{mermaid}
%%| echo: false
%%| fig-align: center
%%{init: { 'flowchart': {'rankSpacing':20} } }%%

flowchart TD
   1((" ")):::current
   classDef current stroke: #f96, stroke-width: 2px
```

<center>You make some edit:</center>

```{mermaid}
%%| echo: false
%%| fig-align: center
%%{init: { 'flowchart': {'rankSpacing':20} } }%%

flowchart TD
   1((" "))---2((" ")):::current
   classDef current stroke: #f96, stroke-width: 2px
```

<center>You make another edit:</center>

```{mermaid}
%%| echo: false
%%| fig-align: center
%%{init: { 'flowchart': {'rankSpacing':20} } }%%

flowchart TD
   1((" "))---2((" "))---3((" ")):::current
   classDef current stroke: #f96, stroke-width: 2px
```

<center>And another one:</center>

```{mermaid}
%%| echo: false
%%| fig-align: center
%%{init: { 'flowchart': {'rankSpacing':20} } }%%

flowchart TD
   1((" "))---2((" "))---3((" "))---4((" ")):::current
   classDef current stroke: #f96, stroke-width: 2px
```

<center>You can undo:</center>

```{mermaid}
%%| echo: false
%%| fig-align: center
%%{init: { 'flowchart': {'rankSpacing':20} } }%%

flowchart TD
   1((" "))---2((" "))---3((" ")):::current---4((" "))
   classDef current stroke: #f96, stroke-width: 2px
```

<center>You can undo some more:</center>

```{mermaid}
%%| echo: false
%%| fig-align: center
%%{init: { 'flowchart': {'rankSpacing':20} } }%%

flowchart TD
   1((" "))---2((" ")):::current---3((" "))---4((" "))
   classDef current stroke: #f96, stroke-width: 2px
```

<center>You can also redo:</center>


```{mermaid}
%%| echo: false
%%| fig-align: center
%%{init: { 'flowchart': {'rankSpacing':20} } }%%

flowchart TD
   1((" "))---2((" "))---3((" ")):::current---4((" "))
   classDef current stroke: #f96, stroke-width: 2px
```

<center>Now, you make some new edit:</center>


```{mermaid}
%%| echo: false
%%| fig-align: center
%%{init: { 'flowchart': {'rankSpacing':20} } }%%

flowchart TD
   1((" "))---2((" "))---3((" "))-.-4((" ")):::lost
   3((" "))---5((" ")):::current
   classDef current stroke: #f96, stroke-width: 2px
   classDef lost stroke-dasharray: 3 4
```

<center>You can still undo:</center>


```{mermaid}
%%| echo: false
%%| fig-align: center
%%{init: { 'flowchart': {'rankSpacing':20} } }%%

flowchart TD
   1((" "))---2((" "))---3((" ")):::current-.-4((" ")):::lost
   3((" "))---5((" "))
   classDef current stroke: #f96, stroke-width: 2px
   classDef lost stroke-dasharray: 3 4
```

<center>You can also redo, but some edits are lost:</center>

```{mermaid}
%%| echo: false
%%| fig-align: center
%%{init: { 'flowchart': {'rankSpacing':20} } }%%

flowchart TD
   1((" "))---2((" "))---3((" "))-.-4((" ")):::lost
   3((" "))---5((" ")):::current
   classDef current stroke: #f96, stroke-width: 2px
   classDef lost stroke-dasharray: 3 4
```

## Linear systems: Emacs

<center>You have some file:</center>

```{mermaid}
%%| echo: false
%%| fig-align: center
%%{init: { 'flowchart': {'rankSpacing':20} } }%%

flowchart TD
   1((1)):::current
   classDef current stroke: #f96, stroke-width: 2px
```

<center>You make some edit:</center>

```{mermaid}
%%| echo: false
%%| fig-align: center
%%{init: { 'flowchart': {'rankSpacing':20} } }%%

flowchart TD
   1((1))---2((2)):::current
   classDef current stroke: #f96, stroke-width: 2px
```

<center>You make another edit:</center>

```{mermaid}
%%| echo: false
%%| fig-align: center
%%{init: { 'flowchart': {'rankSpacing':20} } }%%

flowchart TD
   1((1))---2((2))---3((3)):::current
   classDef current stroke: #f96, stroke-width: 2px
```

<center>And another one:</center>

```{mermaid}
%%| echo: false
%%| fig-align: center
%%{init: { 'flowchart': {'rankSpacing':20} } }%%

flowchart TD
   1((1))---2((2))---3((3))---4((4)):::current
   classDef current stroke: #f96, stroke-width: 2px
```

<center>The first undo adds a new point to the chain of edits, reversing the effects of the last edit:</center>

```{mermaid}
%%| echo: false
%%| fig-align: center
%%{init: { 'flowchart': {'rankSpacing':20} } }%%

flowchart TD
   1((1))---2((2))---3((3))---4((4))---5((3)):::current
   classDef current stroke: #f96, stroke-width: 2px
```

<center>More undoing keeps adding points to the chain:</center>

```{mermaid}
%%| echo: false
%%| fig-align: center
%%{init: { 'flowchart': {'rankSpacing':20} } }%%

flowchart TD
   1((1))---2((2))---3((3))---4((4))---5((3))---6((2)):::current
   classDef current stroke: #f96, stroke-width: 2px
```

<center>There is no proper redo. Instead, you stop undoing, then start again to undo the undo:</center>

```{mermaid}
%%| echo: false
%%| fig-align: center
%%{init: { 'flowchart': {'rankSpacing':20} } }%%

flowchart TD
   1((1))---2((2))---3((3))---4((4))---5((3))---6((2))---7((3)):::current
   classDef current stroke: #f96, stroke-width: 2px
```

<center>You can make new edits</center>

```{mermaid}
%%| echo: false
%%| fig-align: center
%%{init: { 'flowchart': {'rankSpacing':20} } }%%

flowchart TD
   1((1))---2((2))---3((3))---4((4))---5((3))---6((2))---7((3))---8((5)):::current
   classDef current stroke: #f96, stroke-width: 2px
```

<center>Nothing ever gets lost, but you might get headaches. For instance, to go back to the beginning, you have to do:</center>

```{mermaid}
%%| echo: false
%%| fig-align: center
%%{init: { 'flowchart': {'rankSpacing':20} } }%%

flowchart TD
   1((1))---2((2))---3((3))---4((4))---5((3))---6((2))---7((3))---8((5))---9((3))---10((2))---11((3))---12((4))---13((3))---14((2))---15((1)):::current
   classDef current stroke: #f96, stroke-width: 2px
```

## Non linear system: [undo-tree](https://github.com/tarsiiformes/undo-tree)

<center>You have some file:</center>

```{mermaid}
%%| echo: false
%%| fig-align: center
%%{init: { 'flowchart': {'rankSpacing':20} } }%%

flowchart TD
   1((" ")):::current
   classDef current stroke: #f96, stroke-width: 2px
```

<center>You make some edit:</center>

```{mermaid}
%%| echo: false
%%| fig-align: center
%%{init: { 'flowchart': {'rankSpacing':20} } }%%

flowchart TD
   1((" "))---2((" ")):::current
   classDef current stroke: #f96, stroke-width: 2px
```

<center>You make another edit:</center>

```{mermaid}
%%| echo: false
%%| fig-align: center
%%{init: { 'flowchart': {'rankSpacing':20} } }%%

flowchart TD
   1((" "))---2((" "))---3((" ")):::current
   classDef current stroke: #f96, stroke-width: 2px
```

<center>And another one:</center>

```{mermaid}
%%| echo: false
%%| fig-align: center
%%{init: { 'flowchart': {'rankSpacing':20} } }%%

flowchart TD
   1((" "))---2((" "))---3((" "))---4((" ")):::current
   classDef current stroke: #f96, stroke-width: 2px
```

<center>You can undo:</center>

```{mermaid}
%%| echo: false
%%| fig-align: center
%%{init: { 'flowchart': {'rankSpacing':20} } }%%

flowchart TD
   1((" "))---2((" "))---3((" ")):::current---4((" "))
   classDef current stroke: #f96, stroke-width: 2px
```

<center>You can undo some more:</center>

```{mermaid}
%%| echo: false
%%| fig-align: center
%%{init: { 'flowchart': {'rankSpacing':20} } }%%

flowchart TD
   1((" "))---2((" ")):::current---3((" "))---4((" "))
   classDef current stroke: #f96, stroke-width: 2px
```

<center>You can also redo:</center>

```{mermaid}
%%| echo: false
%%| fig-align: center
%%{init: { 'flowchart': {'rankSpacing':20} } }%%

flowchart TD
   1((" "))---2((" "))---3((" ")):::current---4((" "))
   classDef current stroke: #f96, stroke-width: 2px
```

<center>Now, you make some new edit:</center>

```{mermaid}
%%| echo: false
%%| fig-align: center
%%{init: { 'flowchart': {'rankSpacing':20} } }%%

flowchart TD
   1((" "))---2((" "))---3((" "))---4((" "))
   3((" "))---5((" ")):::current
   classDef current stroke: #f96, stroke-width: 2px
```

<center>You can still undo:</center>

```{mermaid}
%%| echo: false
%%| fig-align: center
%%{init: { 'flowchart': {'rankSpacing':20} } }%%

flowchart TD
   1((" "))---2((" "))---3((" "))---4((" "))
   3((" ")):::current---5((" "))
   classDef current stroke: #f96, stroke-width: 2px
```

<center>You can switch branch and redo the old version:</center>

```{mermaid}
%%| echo: false
%%| fig-align: center
%%{init: { 'flowchart': {'rankSpacing':20} } }%%

flowchart TD
   1((" "))---2((" "))---3((" "))---4((" ")):::current
   3((" "))---5((" "))
   classDef current stroke: #f96, stroke-width: 2px
```

<center>Nothing ever gets lost and it is a lot more sane to navigate the history. To to back to the beginning, you only have to do:</center>

```{mermaid}
%%| echo: false
%%| fig-align: center
%%{init: { 'flowchart': {'rankSpacing':20} } }%%

flowchart TD
   1((" ")):::current---2((" "))---3((" "))---4((" "))
   3((" "))---5((" "))
   classDef current stroke: #f96, stroke-width: 2px
```
