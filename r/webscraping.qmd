---
title: Web scraping with R
author: Marie-Hélène Burle
---

:::{.def}

The internet is a trove of information. A lot of it is publicly available and thus suitable for use in research. Extracting that information and putting it in an organized format for analysis can, however, be extremely tedious. Web scraping tools allow to automate parts of that process and R is a popular language for the task.

In this workshop, we will guide you through a simple example using the package [rvest](https://rvest.tidyverse.org/).

:::

<!-- https://trace.tennessee.edu/utk_graddiss/index.html -->
<!-- 1. Scrape all the links of that page into a list -->
<!-- 2. Use each link to extract the information "Date of Award", "Degree Type", etc. through a big loop -->

For this workshop, we will use the package [rvest](https://cran.r-project.org/web/packages/rvest/index.html), part of the [tidyverse](https://www.tidyverse.org/)—a modern set of R packages.

Load the required packages:

```{r}
library(rvest)
```

Our site:

```{r}
url <- "https://trace.tennessee.edu/utk_graddiss/index.html"
```

Read in the data from our URL:

```{r}
diss_html <- read_html(url)
```

Explore the raw data:

```{r}
diss_html
```

```{r}
diss <- diss_html %>% html_elements("p.article-listing")
diss
```
```{.r}
# Then find elements that match a css selector or XPath expression
# using html_elements(). In this example, each <section> corresponds
# to a different film


# Then use html_element() to extract one element per film. Here
# we the title is given by the text inside <h2>
title <- films %>% 
  html_element("h2") %>% 
  html_text2()
title

# Or use html_attr() to get data out of attributes. html_attr() always
# returns a string so we convert it to an integer using a readr function
episode <- films %>% 
  html_element("h2") %>% 
  html_attr("data-id") %>% 
  readr::parse_integer()
episode
```

```{.r}
html <- read_html("https://en.wikipedia.org/w/index.php?title=The_Lego_Movie&oldid=998422565")

html %>% 
  html_element(".tracklist") %>% 
  html_table()
```
