<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.518">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Marie-Hélène Burle">

<title>Research Computing - Searching a version-controlled project</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="..//img/sfu_favicon.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/quarto-contrib/downloadthis-1.9.1/downloadthis.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../img/sfudrac_logo.png" alt="SFU &amp; DRAC logos" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../git/index.html"> 
<span class="menu-text">Git</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../r/index.html"> 
<span class="menu-text">R</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../julia/index.html"> 
<span class="menu-text">Julia</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../python/index.html"> 
<span class="menu-text">Python</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../ai/index.html"> 
<span class="menu-text">AI</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../bash/index.html"> 
<span class="menu-text">Bash</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../tools/index.html"> 
<span class="menu-text">Tools</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools tools-wide">
    <a href="https://github.com/WestDRI" title="" class="quarto-navigation-tool px-1" aria-label="GitHub organization" target="_blank"><i class="bi bi-github"></i></a>
    <a href="https://docs.alliancecan.ca/wiki/Technical_documentation" title="" class="quarto-navigation-tool px-1" aria-label="Alliance wikipedia" target="_blank"><i class="bi bi-wikipedia"></i></a>
    <a href="https://www.youtube.com/channel/UCfgds4Qf7VFOv4ORRvFFmhw" title="" class="quarto-navigation-tool px-1" aria-label="YouTube channel" target="_blank"><i class="bi bi-youtube"></i></a>
    <a href="../talks/index.html" title="Talks" class="quarto-navigation-tool px-1" aria-label="Talks"><i class="bi bi-"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title"><em>On this page:</em></h2>
   
  <ul>
  <li><a href="#installation" id="toc-installation" class="nav-link active" data-scroll-target="#installation">Installation</a></li>
  <li><a href="#using-git" id="toc-using-git" class="nav-link" data-scroll-target="#using-git">Using Git</a></li>
  <li><a href="#practice-repo" id="toc-practice-repo" class="nav-link" data-scroll-target="#practice-repo">Practice repo</a>
  <ul>
  <li><a href="#get-a-repo" id="toc-get-a-repo" class="nav-link" data-scroll-target="#get-a-repo">Get a repo</a></li>
  </ul></li>
  <li><a href="#searching-files" id="toc-searching-files" class="nav-link" data-scroll-target="#searching-files">Searching files</a>
  <ul>
  <li><a href="#git-grep" id="toc-git-grep" class="nav-link" data-scroll-target="#git-grep">git grep</a></li>
  <li><a href="#lets-try-it" id="toc-lets-try-it" class="nav-link" data-scroll-target="#lets-try-it">Let’s try it</a></li>
  <li><a href="#more-complex-patterns" id="toc-more-complex-patterns" class="nav-link" data-scroll-target="#more-complex-patterns">More complex patterns</a></li>
  <li><a href="#searching-other-trees" id="toc-searching-other-trees" class="nav-link" data-scroll-target="#searching-other-trees">Searching other trees</a></li>
  <li><a href="#searching-all-commits" id="toc-searching-all-commits" class="nav-link" data-scroll-target="#searching-all-commits">Searching all commits</a></li>
  <li><a href="#aliases" id="toc-aliases" class="nav-link" data-scroll-target="#aliases">Aliases</a></li>
  </ul></li>
  <li><a href="#searching-logs" id="toc-searching-logs" class="nav-link" data-scroll-target="#searching-logs">Searching logs</a>
  <ul>
  <li><a href="#git-log" id="toc-git-log" class="nav-link" data-scroll-target="#git-log">git log</a></li>
  <li><a href="#searching-commit-messages" id="toc-searching-commit-messages" class="nav-link" data-scroll-target="#searching-commit-messages">Searching commit messages</a></li>
  <li><a href="#changes-made-to-a-pattern" id="toc-changes-made-to-a-pattern" class="nav-link" data-scroll-target="#changes-made-to-a-pattern">Changes made to a pattern</a></li>
  <li><a href="#changes-in-number-of-occurrences-of-a-pattern" id="toc-changes-in-number-of-occurrences-of-a-pattern" class="nav-link" data-scroll-target="#changes-in-number-of-occurrences-of-a-pattern">Changes in number of occurrences of a pattern</a></li>
  </ul></li>
  <li><a href="#tldr" id="toc-tldr" class="nav-link" data-scroll-target="#tldr">TL;DR</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Searching a version-controlled project</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Marie-Hélène Burle </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<div class="def">
<p>What is the point of creating all these commits if you are unable to make use of them because you can’t find the information you need in them?</p>
<p>In this workshop, we will learn how to search:</p>
<ul>
<li>your files (at any of their versions) and</li>
<li>your commit logs.</li>
</ul>
<p>By the end of the workshop, you should be able to retrieve anything you need from your versioned project.</p>
</div>
<div class="box">
<p><em>Prerequisites:</em></p>
<p>This special Git topic is suitable for people who already use Git.</p>
<p>You don’t need to be an expert, but we expect that you are able to run basic Git commands in the command line.</p>
</div>
<!-- https://git-scm.com/book/en/v2/Git-Tools-Searching -->
<div class="cell">

</div>
<section id="installation" class="level2">
<h2 class="anchored" data-anchor-id="installation">Installation</h2>
<p><strong>MacOS &amp; Linux users</strong>:</p>
<p>Install Git from <a href="https://git-scm.com/downloads">the official website</a>.</p>
<p><strong>Windows users</strong>:</p>
<p>Install <a href="https://gitforwindows.org/">Git for Windows</a>. This will also install “Git Bash”, a Bash emulator.</p>
</section>
<section id="using-git" class="level2">
<h2 class="anchored" data-anchor-id="using-git">Using Git</h2>
<p>We will use Git from the command line throughout this workshop.</p>
<p>MacOS users:    open “Terminal”.<br>
Windows users:   open “Git Bash”.<br>
Linux users:    open the terminal emulator of your choice.</p>
</section>
<section id="practice-repo" class="level2">
<h2 class="anchored" data-anchor-id="practice-repo">Practice repo</h2>
<section id="get-a-repo" class="level3">
<h3 class="anchored" data-anchor-id="get-a-repo">Get a repo</h3>
<p>You are welcome to use a repository of yours to follow this workshop. Alternatively, you can clone a practice repo I have on GitHub:</p>
<ol type="1">
<li>Navigate to an appropriate location:</li>
</ol>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /path/to/appropriate/location</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="2" type="1">
<li>Clone the repo:</li>
</ol>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># If you have set SSH for your GitHub account</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone git@github.com:prosoitos/practice_repo.git</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># If you haven't set SSH</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone https://github.com/prosoitos/practice_repo.git</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="3" type="1">
<li>Enter the repo:</li>
</ol>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> practice_repo</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="searching-files" class="level2">
<h2 class="anchored" data-anchor-id="searching-files">Searching files</h2>
<p>The first thing that can happen is that you are looking for a certain pattern somewhere in your project (for instance a certain function or a certain word).</p>
<section id="git-grep" class="level3">
<h3 class="anchored" data-anchor-id="git-grep">git grep</h3>
<p>The main command to look through versioned files is <code>git grep</code>.</p>
<p>You might be familiar with the command-line utility <a href="https://en.wikipedia.org/wiki/Grep">grep</a> which allows to search for lines matching a certain pattern in files. <code>git grep</code> does a similar job with these differences:</p>
<ul>
<li>it is much faster since all files under version control are already indexed by Git,</li>
<li>you can easily search any commit without having to check it out,</li>
<li>it has features lacking in <code>grep</code> such as, for instance, <a href="https://stackoverflow.com/a/17558295/9210961">pattern arithmetic or tree search using globs</a>.</li>
</ul>
</section>
<section id="lets-try-it" class="level3">
<h3 class="anchored" data-anchor-id="lets-try-it">Let’s try it</h3>
<p>By default, <code>git grep</code> searches recursively through the tracked files in the working directory (that is, the current version of the tracked files).</p>
<p>First, let’s look for the word <code>test</code> in the current version of the tracked files in the test repo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> grep test</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>aliases.qmd:Now, let's build an alias for a more complex command: `git grep "test" $(git rev-list --all)`. This example
aliases.qmd:from the *"Searching a Git project"* section below will search for the string "test" in all previous
aliases.qmd:commits. There are two problems with this command: (1) it takes an argument (the string "test"), and (2) it
aliases.qmd:git search test
aliases.qmd:should search the entire current Git project history for "test".
branches.qmd:git branch test
branches.qmd:git switch test
branches.qmd:* test
branches.qmd:The `*` shows the branch you are currently on (i.e. the branch to which `HEAD` points to). In our example, the project has two branches and we are on the branch `test`.
branches.qmd:git diff main test
branches.qmd:When you are happy with the changes you made on your test branch, you can merge it into `main`.
branches.qmd:If you have only created new commits on the branch `test`, the merge is called a "fast-forward merge" because `main` and `test` have not diverged: it is simply a question of having `main` catch up to `test`.
branches.qmd:git merge test
branches.qmd:Then, usually, you delete the branch `test` as it has served its purpose:
branches.qmd:git branch -d test
branches.qmd:Alternatively, you can switch back to `test` and do the next bit of experimental work on it. This allows to keep `main` free of mishaps and bad developments.
branches.qmd:Let's go back to our situation before we created the branch `test`:
branches.qmd:This time, you create a branch called `test2`:
branches.qmd:To merge your branch `test2` into `main`, a new commit is now required. Git will create this new commit automatically. As long as there is no conflict, it is just as easy as a fast-forward merge:
branches.qmd:git merge test2
branches.qmd:After which, you can delete the (now useless) test branch (with `git branch -d test2`):
branches.qmd:&gt;&gt;&gt;&gt;&gt;&gt;&gt; test2
collab.qmd:Click on the `Code` green drop-down button, select SSH [if you have set SSH for your GitHub account](https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/connecting-to-github-with-ssh) or HTTPS and copy the address.
practice_repo/search.qmd:First, let's look for the word `test` in the current version of the tracked files in the test repo:
practice_repo/search.qmd:git grep test
practice_repo/search.qmd:git grep --break test
practice_repo/search.qmd:git grep --break --heading test
practice_repo/search.qmd:git grep --break --heading -n test
practice_repo/search.qmd:Notice how the results for the file `src/test_manuel.py` involve functions. It would be very convenient to have the names of the functions in which `test` appears.
practice_repo/search.qmd:git grep --break --heading -p test src/test_manuel.py
practice_repo/search.qmd:We added the argument `src/test_manuel.py` to limit the search to that file.
practice_repo/search.qmd:We can now see that the word `test` appears in the functions `test` and `main`.
practice_repo/search.qmd:git grep -c test
practice_repo/search.qmd:`git grep` in fact searches for regular expressions. `test` is a regular expression matching `test`, but we can look for more complex patterns.
practice_repo/search.qmd:There were 2 lines matching `__` in `src/test_manuel.py` and we have indeed excluded them from our search.
practice_repo/search.qmd:Let's search for `test` in the tracked files 20 commits ago:
practice_repo/search.qmd:git grep test HEAD~20
practice_repo/search.qmd:As you can see, the file `src/test_manuel.py` is not in the results. Either it didn't exist or it didn't have the word `test` at that commit.
practice_repo/search.qmd:Let's create a new (thus untracked) file with some content including the word `test`:
practice_repo/search.qmd:echo "This is a test" &gt; newfile
practice_repo/search.qmd:git grep -c test
practice_repo/search.qmd:git grep -c --untracked test
practice_repo/search.qmd:Now, let's create a file in it that contains `test`:
practice_repo/search.qmd:echo "And another test" &gt; data/file
practice_repo/search.qmd:git grep -c test
practice_repo/search.qmd:git grep -c --untracked test
practice_repo/search.qmd:git grep -c --untracked --no-exclude-standard test
practice_repo/search.qmd:To search for `test` in all the commits, we thus run:
practice_repo/search.qmd:git grep "test" $(git rev-list --all)
practice_repo/search.qmd:git grep "test" $(git rev-list --all -2)
practice_repo/search.qmd:git grep "test" $(git rev-list --all) | fzf --cycle -i -e
practice_repo/search.qmd:git grep "test" $(git rev-list --all) |
practice_repo/search.qmd:git grep "test" $(git rev-list --all) |
practice_repo/search.qmd:git grep "test" $(git rev-list --all) |
practice_repo/search.qmd:git search test
practice_repo/search.qmd:Let's look for `test` in the commit messages and limit the output to 3 commits:
practice_repo/search.qmd:git log --grep=test -3
practice_repo/search.qmd:git log --grep="test" -3 --oneline
practice_repo/search.qmd:git log --grep="test" | fzf --cycle -i -e
practice_repo/search.qmd:git log --grep="test" --oneline |
practice_repo/search.qmd:Remember that `test` was present in the file `src/test_manuel.py`. If we want to see when the pattern was first created and then each time it was modified, we use the `-L` flag in this fashion:
practice_repo/search.qmd:git log -L :test:src/test_manuel.py
practice_repo/search.qmd:Now, if we want to list all commits that created a change in the number of occurrences of `test` in our project, we run:
practice_repo/search.qmd:git log -S test --oneline
remotes.qmd:Click on the `Code` green drop-down button, select SSH [if you have set SSH for your GitHub account](https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/connecting-to-github-with-ssh) or HTTPS and copy the address.
undo.qmd:Here is a common scenario: you make a commit, then realize that you forgot to include some changes in that commit; or you aren't happy with the commit message; or both. You can edit your latest commit with the `--amend` flag:</code></pre>
</div>
</div>
<p>Let’s add blank lines between the results of each file for better readability:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> grep <span class="at">--break</span> test</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>aliases.qmd:Now, let's build an alias for a more complex command: `git grep "test" $(git rev-list --all)`. This example
aliases.qmd:from the *"Searching a Git project"* section below will search for the string "test" in all previous
aliases.qmd:commits. There are two problems with this command: (1) it takes an argument (the string "test"), and (2) it
aliases.qmd:git search test
aliases.qmd:should search the entire current Git project history for "test".

branches.qmd:git branch test
branches.qmd:git switch test
branches.qmd:* test
branches.qmd:The `*` shows the branch you are currently on (i.e. the branch to which `HEAD` points to). In our example, the project has two branches and we are on the branch `test`.
branches.qmd:git diff main test
branches.qmd:When you are happy with the changes you made on your test branch, you can merge it into `main`.
branches.qmd:If you have only created new commits on the branch `test`, the merge is called a "fast-forward merge" because `main` and `test` have not diverged: it is simply a question of having `main` catch up to `test`.
branches.qmd:git merge test
branches.qmd:Then, usually, you delete the branch `test` as it has served its purpose:
branches.qmd:git branch -d test
branches.qmd:Alternatively, you can switch back to `test` and do the next bit of experimental work on it. This allows to keep `main` free of mishaps and bad developments.
branches.qmd:Let's go back to our situation before we created the branch `test`:
branches.qmd:This time, you create a branch called `test2`:
branches.qmd:To merge your branch `test2` into `main`, a new commit is now required. Git will create this new commit automatically. As long as there is no conflict, it is just as easy as a fast-forward merge:
branches.qmd:git merge test2
branches.qmd:After which, you can delete the (now useless) test branch (with `git branch -d test2`):
branches.qmd:&gt;&gt;&gt;&gt;&gt;&gt;&gt; test2

collab.qmd:Click on the `Code` green drop-down button, select SSH [if you have set SSH for your GitHub account](https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/connecting-to-github-with-ssh) or HTTPS and copy the address.

practice_repo/search.qmd:First, let's look for the word `test` in the current version of the tracked files in the test repo:
practice_repo/search.qmd:git grep test
practice_repo/search.qmd:git grep --break test
practice_repo/search.qmd:git grep --break --heading test
practice_repo/search.qmd:git grep --break --heading -n test
practice_repo/search.qmd:Notice how the results for the file `src/test_manuel.py` involve functions. It would be very convenient to have the names of the functions in which `test` appears.
practice_repo/search.qmd:git grep --break --heading -p test src/test_manuel.py
practice_repo/search.qmd:We added the argument `src/test_manuel.py` to limit the search to that file.
practice_repo/search.qmd:We can now see that the word `test` appears in the functions `test` and `main`.
practice_repo/search.qmd:git grep -c test
practice_repo/search.qmd:`git grep` in fact searches for regular expressions. `test` is a regular expression matching `test`, but we can look for more complex patterns.
practice_repo/search.qmd:There were 2 lines matching `__` in `src/test_manuel.py` and we have indeed excluded them from our search.
practice_repo/search.qmd:Let's search for `test` in the tracked files 20 commits ago:
practice_repo/search.qmd:git grep test HEAD~20
practice_repo/search.qmd:As you can see, the file `src/test_manuel.py` is not in the results. Either it didn't exist or it didn't have the word `test` at that commit.
practice_repo/search.qmd:Let's create a new (thus untracked) file with some content including the word `test`:
practice_repo/search.qmd:echo "This is a test" &gt; newfile
practice_repo/search.qmd:git grep -c test
practice_repo/search.qmd:git grep -c --untracked test
practice_repo/search.qmd:Now, let's create a file in it that contains `test`:
practice_repo/search.qmd:echo "And another test" &gt; data/file
practice_repo/search.qmd:git grep -c test
practice_repo/search.qmd:git grep -c --untracked test
practice_repo/search.qmd:git grep -c --untracked --no-exclude-standard test
practice_repo/search.qmd:To search for `test` in all the commits, we thus run:
practice_repo/search.qmd:git grep "test" $(git rev-list --all)
practice_repo/search.qmd:git grep "test" $(git rev-list --all -2)
practice_repo/search.qmd:git grep "test" $(git rev-list --all) | fzf --cycle -i -e
practice_repo/search.qmd:git grep "test" $(git rev-list --all) |
practice_repo/search.qmd:git grep "test" $(git rev-list --all) |
practice_repo/search.qmd:git grep "test" $(git rev-list --all) |
practice_repo/search.qmd:git search test
practice_repo/search.qmd:Let's look for `test` in the commit messages and limit the output to 3 commits:
practice_repo/search.qmd:git log --grep=test -3
practice_repo/search.qmd:git log --grep="test" -3 --oneline
practice_repo/search.qmd:git log --grep="test" | fzf --cycle -i -e
practice_repo/search.qmd:git log --grep="test" --oneline |
practice_repo/search.qmd:Remember that `test` was present in the file `src/test_manuel.py`. If we want to see when the pattern was first created and then each time it was modified, we use the `-L` flag in this fashion:
practice_repo/search.qmd:git log -L :test:src/test_manuel.py
practice_repo/search.qmd:Now, if we want to list all commits that created a change in the number of occurrences of `test` in our project, we run:
practice_repo/search.qmd:git log -S test --oneline

remotes.qmd:Click on the `Code` green drop-down button, select SSH [if you have set SSH for your GitHub account](https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/connecting-to-github-with-ssh) or HTTPS and copy the address.

undo.qmd:Here is a common scenario: you make a commit, then realize that you forgot to include some changes in that commit; or you aren't happy with the commit message; or both. You can edit your latest commit with the `--amend` flag:</code></pre>
</div>
</div>
<p>Let’s also put the file names on separate lines:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> grep <span class="at">--break</span> <span class="at">--heading</span> test</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>aliases.qmd
Now, let's build an alias for a more complex command: `git grep "test" $(git rev-list --all)`. This example
from the *"Searching a Git project"* section below will search for the string "test" in all previous
commits. There are two problems with this command: (1) it takes an argument (the string "test"), and (2) it
git search test
should search the entire current Git project history for "test".

branches.qmd
git branch test
git switch test
* test
The `*` shows the branch you are currently on (i.e. the branch to which `HEAD` points to). In our example, the project has two branches and we are on the branch `test`.
git diff main test
When you are happy with the changes you made on your test branch, you can merge it into `main`.
If you have only created new commits on the branch `test`, the merge is called a "fast-forward merge" because `main` and `test` have not diverged: it is simply a question of having `main` catch up to `test`.
git merge test
Then, usually, you delete the branch `test` as it has served its purpose:
git branch -d test
Alternatively, you can switch back to `test` and do the next bit of experimental work on it. This allows to keep `main` free of mishaps and bad developments.
Let's go back to our situation before we created the branch `test`:
This time, you create a branch called `test2`:
To merge your branch `test2` into `main`, a new commit is now required. Git will create this new commit automatically. As long as there is no conflict, it is just as easy as a fast-forward merge:
git merge test2
After which, you can delete the (now useless) test branch (with `git branch -d test2`):
&gt;&gt;&gt;&gt;&gt;&gt;&gt; test2

collab.qmd
Click on the `Code` green drop-down button, select SSH [if you have set SSH for your GitHub account](https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/connecting-to-github-with-ssh) or HTTPS and copy the address.

practice_repo/search.qmd
First, let's look for the word `test` in the current version of the tracked files in the test repo:
git grep test
git grep --break test
git grep --break --heading test
git grep --break --heading -n test
Notice how the results for the file `src/test_manuel.py` involve functions. It would be very convenient to have the names of the functions in which `test` appears.
git grep --break --heading -p test src/test_manuel.py
We added the argument `src/test_manuel.py` to limit the search to that file.
We can now see that the word `test` appears in the functions `test` and `main`.
git grep -c test
`git grep` in fact searches for regular expressions. `test` is a regular expression matching `test`, but we can look for more complex patterns.
There were 2 lines matching `__` in `src/test_manuel.py` and we have indeed excluded them from our search.
Let's search for `test` in the tracked files 20 commits ago:
git grep test HEAD~20
As you can see, the file `src/test_manuel.py` is not in the results. Either it didn't exist or it didn't have the word `test` at that commit.
Let's create a new (thus untracked) file with some content including the word `test`:
echo "This is a test" &gt; newfile
git grep -c test
git grep -c --untracked test
Now, let's create a file in it that contains `test`:
echo "And another test" &gt; data/file
git grep -c test
git grep -c --untracked test
git grep -c --untracked --no-exclude-standard test
To search for `test` in all the commits, we thus run:
git grep "test" $(git rev-list --all)
git grep "test" $(git rev-list --all -2)
git grep "test" $(git rev-list --all) | fzf --cycle -i -e
git grep "test" $(git rev-list --all) |
git grep "test" $(git rev-list --all) |
git grep "test" $(git rev-list --all) |
git search test
Let's look for `test` in the commit messages and limit the output to 3 commits:
git log --grep=test -3
git log --grep="test" -3 --oneline
git log --grep="test" | fzf --cycle -i -e
git log --grep="test" --oneline |
Remember that `test` was present in the file `src/test_manuel.py`. If we want to see when the pattern was first created and then each time it was modified, we use the `-L` flag in this fashion:
git log -L :test:src/test_manuel.py
Now, if we want to list all commits that created a change in the number of occurrences of `test` in our project, we run:
git log -S test --oneline

remotes.qmd
Click on the `Code` green drop-down button, select SSH [if you have set SSH for your GitHub account](https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/connecting-to-github-with-ssh) or HTTPS and copy the address.

undo.qmd
Here is a common scenario: you make a commit, then realize that you forgot to include some changes in that commit; or you aren't happy with the commit message; or both. You can edit your latest commit with the `--amend` flag:</code></pre>
</div>
</div>
<p>We can display the line numbers for the results with the <code>-n</code> flag:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> grep <span class="at">--break</span> <span class="at">--heading</span> <span class="at">-n</span> test</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>aliases.qmd
46:Now, let's build an alias for a more complex command: `git grep "test" $(git rev-list --all)`. This example
47:from the *"Searching a Git project"* section below will search for the string "test" in all previous
48:commits. There are two problems with this command: (1) it takes an argument (the string "test"), and (2) it
66:git search test
69:should search the entire current Git project history for "test".

branches.qmd
52:git branch test
70:git switch test
97:* test
100:The `*` shows the branch you are currently on (i.e. the branch to which `HEAD` points to). In our example, the project has two branches and we are on the branch `test`.
107:git diff main test
114:When you are happy with the changes you made on your test branch, you can merge it into `main`.
118:If you have only created new commits on the branch `test`, the merge is called a "fast-forward merge" because `main` and `test` have not diverged: it is simply a question of having `main` catch up to `test`.
133:git merge test
138:Then, usually, you delete the branch `test` as it has served its purpose:
141:git branch -d test
146:Alternatively, you can switch back to `test` and do the next bit of experimental work on it. This allows to keep `main` free of mishaps and bad developments.
152:Let's go back to our situation before we created the branch `test`:
156:This time, you create a branch called `test2`:
180:To merge your branch `test2` into `main`, a new commit is now required. Git will create this new commit automatically. As long as there is no conflict, it is just as easy as a fast-forward merge:
183:git merge test2
188:After which, you can delete the (now useless) test branch (with `git branch -d test2`):
213:&gt;&gt;&gt;&gt;&gt;&gt;&gt; test2

collab.qmd
50:Click on the `Code` green drop-down button, select SSH [if you have set SSH for your GitHub account](https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/connecting-to-github-with-ssh) or HTTPS and copy the address.

practice_repo/search.qmd
101:First, let's look for the word `test` in the current version of the tracked files in the test repo:
104:git grep test
110:git grep --break test
116:git grep --break --heading test
122:git grep --break --heading -n test
125:Notice how the results for the file `src/test_manuel.py` involve functions. It would be very convenient to have the names of the functions in which `test` appears.
130:git grep --break --heading -p test src/test_manuel.py
135:We added the argument `src/test_manuel.py` to limit the search to that file.
139:We can now see that the word `test` appears in the functions `test` and `main`.
144:git grep -c test
149:`git grep` in fact searches for regular expressions. `test` is a regular expression matching `test`, but we can look for more complex patterns.
217:There were 2 lines matching `__` in `src/test_manuel.py` and we have indeed excluded them from our search.
225:Let's search for `test` in the tracked files 20 commits ago:
228:git grep test HEAD~20
233:As you can see, the file `src/test_manuel.py` is not in the results. Either it didn't exist or it didn't have the word `test` at that commit.
239:Let's create a new (thus untracked) file with some content including the word `test`:
242:echo "This is a test" &gt; newfile
248:git grep -c test
254:git grep -c --untracked test
277:Now, let's create a file in it that contains `test`:
280:echo "And another test" &gt; data/file
286:git grep -c test
290:git grep -c --untracked test
296:git grep -c --untracked --no-exclude-standard test
313:To search for `test` in all the commits, we thus run:
316:git grep "test" $(git rev-list --all)
322:git grep "test" $(git rev-list --all -2)
332:git grep "test" $(git rev-list --all) | fzf --cycle -i -e
338:git grep "test" $(git rev-list --all) |
366:git grep "test" $(git rev-list --all) |
375:git grep "test" $(git rev-list --all) |
424:git search test
459:Let's look for `test` in the commit messages and limit the output to 3 commits:
462:git log --grep=test -3
468:git log --grep="test" -3 --oneline
476:git log --grep="test" | fzf --cycle -i -e
482:git log --grep="test" --oneline |
495:Remember that `test` was present in the file `src/test_manuel.py`. If we want to see when the pattern was first created and then each time it was modified, we use the `-L` flag in this fashion:
504:git log -L :test:src/test_manuel.py
511:Now, if we want to list all commits that created a change in the number of occurrences of `test` in our project, we run:
514:git log -S test --oneline

remotes.qmd
43:Click on the `Code` green drop-down button, select SSH [if you have set SSH for your GitHub account](https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/connecting-to-github-with-ssh) or HTTPS and copy the address.

undo.qmd
14:Here is a common scenario: you make a commit, then realize that you forgot to include some changes in that commit; or you aren't happy with the commit message; or both. You can edit your latest commit with the `--amend` flag:</code></pre>
</div>
</div>
<p>Notice how the results for the file <code>src/test_manuel.py</code> involve functions. It would be very convenient to have the names of the functions in which <code>test</code> appears.</p>
<p>We can do this with the <code>-p</code> flag:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> grep <span class="at">--break</span> <span class="at">--heading</span> <span class="at">-p</span> test src/test_manuel.py</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>fatal: ambiguous argument 'src/test_manuel.py': unknown revision or path not in the working tree.
Use '--' to separate paths from revisions, like this:
'git &lt;command&gt; [&lt;revision&gt;...] -- [&lt;file&gt;...]'</code></pre>
</div>
</div>
<div class="note">
<p>We added the argument <code>src/test_manuel.py</code> to limit the search to that file.</p>
</div>
<p>We can now see that the word <code>test</code> appears in the functions <code>test</code> and <code>main</code>.</p>
<p>Now, instead of printing all the matching lines, let’s print the number of matches per file:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> grep <span class="at">-c</span> test</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>aliases.qmd:5
branches.qmd:17
collab.qmd:1
practice_repo/search.qmd:41
remotes.qmd:1
undo.qmd:1</code></pre>
</div>
</div>
</section>
<section id="more-complex-patterns" class="level3">
<h3 class="anchored" data-anchor-id="more-complex-patterns">More complex patterns</h3>
<p><code>git grep</code> in fact searches for regular expressions. <code>test</code> is a regular expression matching <code>test</code>, but we can look for more complex patterns.</p>
<p>Let’s look for <code>image</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> grep image</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>ignore.qmd:- Non-text files (e.g. images, office documents)
practice_repo/search.qmd:Let's look for `image`:
practice_repo/search.qmd:git grep image
practice_repo/search.qmd:git grep -i image</code></pre>
</div>
</div>
<div class="note">
<p>No output means that the search is not returning any result.</p>
</div>
<p>Let’s make this search case insensitive:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> grep <span class="at">-i</span> image</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>ignore.qmd:- Non-text files (e.g. images, office documents)
practice_repo/search.qmd:Let's look for `image`:
practice_repo/search.qmd:git grep image
practice_repo/search.qmd:git grep -i image
practice_repo/search.qmd:We are now getting some results as `Image` was present in three lines of the file `src/new_file.py`.</code></pre>
</div>
</div>
<p>We are now getting some results as <code>Image</code> was present in three lines of the file <code>src/new_file.py</code>.</p>
<p>Let’s now search for <code>data</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> grep data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>changes.qmd:Remember that HEAD is a pointer pointing at a branch, that a branch is itself a pointer pointing at a commit, and finally that a commit is a Git object pointing at compressed blobs containing data about your project at a certain commit. When the HEAD pointer moves around, whatever commit it points to populates the [HEAD]{.emph} tree with the corresponding data.
first_steps.qmd:Alternatively, you can download the file with this button: 
first_steps.qmd:data/
first_steps.qmd:data
first_steps.qmd:data
first_steps.qmd:./data:
first_steps.qmd:dataset.csv
first_steps.qmd:├── data
first_steps.qmd:│&nbsp;&nbsp; └── dataset.csv
first_steps.qmd:cat data/dataset.csv
first_steps.qmd:This is our very exciting data set.
first_steps.qmd:df = pd.read_csv('../data/dataset.csv')
first_steps.qmd:data
first_steps.qmd:        data/
first_steps.qmd:        data/
first_steps.qmd:Remember that each commit contains the following metadata:
first_steps.qmd:        data/
ignore.qmd:- Your initial data
ignore.qmd:Notice how `data/` is not listed in the untracked files anymore.
ignore.qmd:git commit -m "Add .gitignore file with data and results"
ignore.qmd:[main a1df8e5] Add .gitignore file with data and results
intro_slides.qmd:The data is stored as blobs, doesn't create unnecessary copies (unchanged files are referenced from old blobs), and uses excellent compression
intro_slides.qmd:Each commit has a unique *hash* and contains the following metadata:
logs.qmd:    Add .gitignore file with data and results
logs.qmd:c4ab5e7 Add .gitignore file with data and results
logs.qmd:|     Add .gitignore file with data and results
logs.qmd:* c4ab5e7 34 minutes ago Add .gitignore file with data and results xxx@xxx
logs.qmd:+df = pd.read_csv('../data/dataset.csv')
logs.qmd:    Add .gitignore file with data and results
logs.qmd:+/data/
logs.qmd:In addition to displaying the commit metadata, `git show` also displays the diff of that commit with its parent commit.
practice_repo/search.qmd:Let's now search for `data`:
practice_repo/search.qmd:git grep data
practice_repo/search.qmd:We are getting results for the word `data`, but also for the pattern `data` in longer expressions such as `train_data` or `dataset`. If we only want results for the word `data`, we can use the `-w` flag:
practice_repo/search.qmd:git grep -w data
practice_repo/search.qmd:The directory `data` is in `.gitignore`. This means that it is not under version control and it thus doesn't exist in our repo (since we cloned our repo, we only have the version-controlled files). Let's create it:
practice_repo/search.qmd:mkdir data
practice_repo/search.qmd:echo "And another test" &gt; data/file
practice_repo/search.qmd:`data/file`, despite being excluded from version control, is also searched.
Binary file project.zip matches
remotes.qmd:## Getting data from a remote
remotes.qmd:If you collaborate on a project, you have to get the data added by your teammates to keep your local project up to date.
remotes.qmd:To download new data from a remote, you have 2 options:
remotes.qmd:*Fetching* downloads the data from a remote that you don't already have in your local version of the project:
remotes.qmd:Uploading data to the remote is called *pushing*:
undo.qmd:As you just experienced, this command leads to data loss. \
wb_dvc.qmd:title: Version control for data science and machine learning with DVC</code></pre>
</div>
</div>
<p>We are getting results for the word <code>data</code>, but also for the pattern <code>data</code> in longer expressions such as <code>train_data</code> or <code>dataset</code>. If we only want results for the word <code>data</code>, we can use the <code>-w</code> flag:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> grep <span class="at">-w</span> data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>changes.qmd:Remember that HEAD is a pointer pointing at a branch, that a branch is itself a pointer pointing at a commit, and finally that a commit is a Git object pointing at compressed blobs containing data about your project at a certain commit. When the HEAD pointer moves around, whatever commit it points to populates the [HEAD]{.emph} tree with the corresponding data.
first_steps.qmd:Alternatively, you can download the file with this button: 
first_steps.qmd:data/
first_steps.qmd:data
first_steps.qmd:data
first_steps.qmd:./data:
first_steps.qmd:├── data
first_steps.qmd:cat data/dataset.csv
first_steps.qmd:This is our very exciting data set.
first_steps.qmd:df = pd.read_csv('../data/dataset.csv')
first_steps.qmd:data
first_steps.qmd:        data/
first_steps.qmd:        data/
first_steps.qmd:        data/
ignore.qmd:- Your initial data
ignore.qmd:Notice how `data/` is not listed in the untracked files anymore.
ignore.qmd:git commit -m "Add .gitignore file with data and results"
ignore.qmd:[main a1df8e5] Add .gitignore file with data and results
intro_slides.qmd:The data is stored as blobs, doesn't create unnecessary copies (unchanged files are referenced from old blobs), and uses excellent compression
logs.qmd:    Add .gitignore file with data and results
logs.qmd:c4ab5e7 Add .gitignore file with data and results
logs.qmd:|     Add .gitignore file with data and results
logs.qmd:* c4ab5e7 34 minutes ago Add .gitignore file with data and results xxx@xxx
logs.qmd:+df = pd.read_csv('../data/dataset.csv')
logs.qmd:    Add .gitignore file with data and results
logs.qmd:+/data/
practice_repo/search.qmd:Let's now search for `data`:
practice_repo/search.qmd:git grep data
practice_repo/search.qmd:We are getting results for the word `data`, but also for the pattern `data` in longer expressions such as `train_data` or `dataset`. If we only want results for the word `data`, we can use the `-w` flag:
practice_repo/search.qmd:git grep -w data
practice_repo/search.qmd:The directory `data` is in `.gitignore`. This means that it is not under version control and it thus doesn't exist in our repo (since we cloned our repo, we only have the version-controlled files). Let's create it:
practice_repo/search.qmd:mkdir data
practice_repo/search.qmd:echo "And another test" &gt; data/file
practice_repo/search.qmd:`data/file`, despite being excluded from version control, is also searched.
Binary file project.zip matches
remotes.qmd:## Getting data from a remote
remotes.qmd:If you collaborate on a project, you have to get the data added by your teammates to keep your local project up to date.
remotes.qmd:To download new data from a remote, you have 2 options:
remotes.qmd:*Fetching* downloads the data from a remote that you don't already have in your local version of the project:
remotes.qmd:Uploading data to the remote is called *pushing*:
undo.qmd:As you just experienced, this command leads to data loss. \
wb_dvc.qmd:title: Version control for data science and machine learning with DVC</code></pre>
</div>
</div>
<p>Now, let’s use a more complex regular expression. We want the counts for the pattern <code>".*_.*"</code> (i.e.&nbsp;any name with a snail case such as <code>train_loader</code>):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> grep <span class="at">-c</span> <span class="st">".*_.*"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>first_steps.qmd:3
img/01.png:16
img/02.png:32
img/03.png:31
img/04.png:26
img/05.png:31
img/06.png:32
img/07.png:30
img/08.png:34
img/09.png:35
img/10.png:41
img/11.png:47
img/12.png:40
img/13.png:39
img/14.png:32
img/15.png:38
img/16.png:43
img/17.png:34
img/18.png:35
img/19.png:30
img/20.png:33
img/21.png:40
img/22.png:41
img/23.png:47
img/24.png:64
img/25.png:66
img/26.png:50
img/27.png:60
img/28.png:57
img/29.png:33
img/30.png:39
img/31.png:14
img/32.png:16
img/33.png:18
img/34.png:16
img/35.png:20
img/36.png:18
img/37.png:18
img/51.png:55
img/52.png:46
img/53.png:55
img/collab.jpg:178
img/git_logo.png:4
img/github_logo_red.png:17
img/gitlab_logo.png:27
img/gitout.png:42
img/vc.jpg:1563
index.qmd:4
install.qmd:1
intro.qmd:1
intro_slides.qmd:2
logs.qmd:1
practice_repo/search.qmd:31
tags.qmd:5
top_intro.qmd:1
wb_dvc.qmd:1</code></pre>
</div>
</div>
<p>Let’s print the first 3 results per file:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> grep <span class="at">-m</span> 3 <span class="st">".*_.*"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>first_steps.qmd:wget --no-check-certificate 'https://docs.google.com/uc?export=download&amp;id=1SJV5mRGexf91lNyFwdS_JmuAXX0xS4pE' -O project.zip
first_steps.qmd:df = pd.read_csv('../data/dataset.csv')
first_steps.qmd:![](https://imgs.xkcd.com/comics/git_commit.png){fig-alt="noshadow"}
Binary file img/01.png matches
Binary file img/02.png matches
Binary file img/03.png matches
Binary file img/04.png matches
Binary file img/05.png matches
Binary file img/06.png matches
Binary file img/07.png matches
Binary file img/08.png matches
Binary file img/09.png matches
Binary file img/10.png matches
Binary file img/11.png matches
Binary file img/12.png matches
Binary file img/13.png matches
Binary file img/14.png matches
Binary file img/15.png matches
Binary file img/16.png matches
Binary file img/17.png matches
Binary file img/18.png matches
Binary file img/19.png matches
Binary file img/20.png matches
Binary file img/21.png matches
Binary file img/22.png matches
Binary file img/23.png matches
Binary file img/24.png matches
Binary file img/25.png matches
Binary file img/26.png matches
Binary file img/27.png matches
Binary file img/28.png matches
Binary file img/29.png matches
Binary file img/30.png matches
Binary file img/31.png matches
Binary file img/32.png matches
Binary file img/33.png matches
Binary file img/34.png matches
Binary file img/35.png matches
Binary file img/36.png matches
Binary file img/37.png matches
Binary file img/51.png matches
Binary file img/52.png matches
Binary file img/53.png matches
Binary file img/collab.jpg matches
Binary file img/git_logo.png matches
Binary file img/github_logo_red.png matches
Binary file img/gitlab_logo.png matches
Binary file img/gitout.png matches
Binary file img/vc.jpg matches
index.qmd:  Version control &amp; collaboration with &amp;nbsp;[![](img/git_logo.png){width="1.3em" fig-alt="noshadow"}](https://git-scm.com/)
index.qmd:[Getting started with &amp;nbsp;![](img/git_logo.png){width="1.2em" fig-alt="noshadow"}](top_intro.qmd){.card-title2 .stretched-link}
index.qmd:[Workshops](practice_repo/search.qmd){.card-title2 .stretched-link}
install.qmd:git config user.email "your_other@email"
intro.qmd:[Slides](intro_slides.html){.btn .btn-outline-primary} [(Click and wait: the presentation might take a few instants to load)]{.inlinenote}
intro_slides.qmd:    logo: /img/sfudrac_logo.png
intro_slides.qmd:&lt;script type="text/javascript" src="https://ssl.gstatic.com/trends_nrtr/3045_RC01/embed_loader.js"&gt;&lt;/script&gt; &lt;script type="text/javascript"&gt; trends.embed.renderExploreWidget("TIMESERIES", {"comparisonItem":[{"keyword":"/m/05vqwg","geo":"","time":"2004-01-01 2022-10-03"},{"keyword":"/m/08441_","geo":"","time":"2004-01-01 2022-10-03"},{"keyword":"/m/012ct9","geo":"","time":"2004-01-01 2022-10-03"},{"keyword":"/m/09d6g","geo":"","time":"2004-01-01 2022-10-03"}],"category":0,"property":""}, {"exploreQuery":"date=all&amp;q=%2Fm%2F05vqwg,%2Fm%2F08441_,%2Fm%2F012ct9,%2Fm%2F09d6g","guestPath":"https://trends.google.com:443/trends/embed/"}); &lt;/script&gt;
logs.qmd:+df = pd.read_csv('../data/dataset.csv')
practice_repo/search.qmd:git clone git@github.com:prosoitos/practice_repo.git
practice_repo/search.qmd:git clone https://github.com/prosoitos/practice_repo.git
practice_repo/search.qmd:cd practice_repo
tags.qmd:git tag J_Climate_2009
tags.qmd:git show J_Climate_2009
tags.qmd:git checkout J_Climate_2009
top_intro.qmd:description: An introductory course to version control with &amp;nbsp;[![](img/git_logo.png){width="1.3em" fig-alt="noshadow"}](https://git-scm.com/)
wb_dvc.qmd:As DVC is a popular tool in machine learning, please find this webinar [in the AI section](/ai/wb_dvc.html).</code></pre>
</div>
</div>
<p>As you can see, our results also include <code>__init__</code> which is not what we were looking for. So let’s exclude <code>__</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> grep <span class="at">-m</span> 3 <span class="at">-e</span> <span class="st">".*_.*"</span> <span class="at">--and</span> <span class="at">--not</span> <span class="at">-e</span> <span class="st">"__"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>first_steps.qmd:wget --no-check-certificate 'https://docs.google.com/uc?export=download&amp;id=1SJV5mRGexf91lNyFwdS_JmuAXX0xS4pE' -O project.zip
first_steps.qmd:df = pd.read_csv('../data/dataset.csv')
first_steps.qmd:![](https://imgs.xkcd.com/comics/git_commit.png){fig-alt="noshadow"}
Binary file img/01.png matches
Binary file img/02.png matches
Binary file img/03.png matches
Binary file img/04.png matches
Binary file img/05.png matches
Binary file img/06.png matches
Binary file img/07.png matches
Binary file img/08.png matches
Binary file img/09.png matches
Binary file img/10.png matches
Binary file img/11.png matches
Binary file img/12.png matches
Binary file img/13.png matches
Binary file img/14.png matches
Binary file img/15.png matches
Binary file img/16.png matches
Binary file img/17.png matches
Binary file img/18.png matches
Binary file img/19.png matches
Binary file img/20.png matches
Binary file img/21.png matches
Binary file img/22.png matches
Binary file img/23.png matches
Binary file img/24.png matches
Binary file img/25.png matches
Binary file img/26.png matches
Binary file img/27.png matches
Binary file img/28.png matches
Binary file img/29.png matches
Binary file img/30.png matches
Binary file img/31.png matches
Binary file img/32.png matches
Binary file img/33.png matches
Binary file img/34.png matches
Binary file img/35.png matches
Binary file img/36.png matches
Binary file img/37.png matches
Binary file img/51.png matches
Binary file img/52.png matches
Binary file img/53.png matches
Binary file img/collab.jpg matches
Binary file img/git_logo.png matches
Binary file img/github_logo_red.png matches
Binary file img/gitlab_logo.png matches
Binary file img/gitout.png matches
Binary file img/vc.jpg matches
index.qmd:  Version control &amp; collaboration with &amp;nbsp;[![](img/git_logo.png){width="1.3em" fig-alt="noshadow"}](https://git-scm.com/)
index.qmd:[Getting started with &amp;nbsp;![](img/git_logo.png){width="1.2em" fig-alt="noshadow"}](top_intro.qmd){.card-title2 .stretched-link}
index.qmd:[Workshops](practice_repo/search.qmd){.card-title2 .stretched-link}
install.qmd:git config user.email "your_other@email"
intro.qmd:[Slides](intro_slides.html){.btn .btn-outline-primary} [(Click and wait: the presentation might take a few instants to load)]{.inlinenote}
intro_slides.qmd:    logo: /img/sfudrac_logo.png
intro_slides.qmd:&lt;script type="text/javascript" src="https://ssl.gstatic.com/trends_nrtr/3045_RC01/embed_loader.js"&gt;&lt;/script&gt; &lt;script type="text/javascript"&gt; trends.embed.renderExploreWidget("TIMESERIES", {"comparisonItem":[{"keyword":"/m/05vqwg","geo":"","time":"2004-01-01 2022-10-03"},{"keyword":"/m/08441_","geo":"","time":"2004-01-01 2022-10-03"},{"keyword":"/m/012ct9","geo":"","time":"2004-01-01 2022-10-03"},{"keyword":"/m/09d6g","geo":"","time":"2004-01-01 2022-10-03"}],"category":0,"property":""}, {"exploreQuery":"date=all&amp;q=%2Fm%2F05vqwg,%2Fm%2F08441_,%2Fm%2F012ct9,%2Fm%2F09d6g","guestPath":"https://trends.google.com:443/trends/embed/"}); &lt;/script&gt;
logs.qmd:+df = pd.read_csv('../data/dataset.csv')
practice_repo/search.qmd:git clone git@github.com:prosoitos/practice_repo.git
practice_repo/search.qmd:git clone https://github.com/prosoitos/practice_repo.git
practice_repo/search.qmd:cd practice_repo
tags.qmd:git tag J_Climate_2009
tags.qmd:git show J_Climate_2009
tags.qmd:git checkout J_Climate_2009
top_intro.qmd:description: An introductory course to version control with &amp;nbsp;[![](img/git_logo.png){width="1.3em" fig-alt="noshadow"}](https://git-scm.com/)
wb_dvc.qmd:As DVC is a popular tool in machine learning, please find this webinar [in the AI section](/ai/wb_dvc.html).</code></pre>
</div>
</div>
<div class="note">
<p>For simple searches, you don’t have to use the <code>-e</code> flag before the pattern you are searching for. Here however, our command has gotten complex enough that we have to use it before each pattern.</p>
</div>
<p>Let’s make sure this worked as expected:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> grep <span class="at">-c</span> <span class="st">".*_.*"</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"---"</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> grep <span class="at">-c</span> <span class="st">"__"</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"---"</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> grep <span class="at">-ce</span> <span class="st">".*_.*"</span> <span class="at">--and</span> <span class="at">--not</span> <span class="at">-e</span> <span class="st">"__"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>first_steps.qmd:3
img/01.png:16
img/02.png:32
img/03.png:31
img/04.png:26
img/05.png:31
img/06.png:32
img/07.png:30
img/08.png:34
img/09.png:35
img/10.png:41
img/11.png:47
img/12.png:40
img/13.png:39
img/14.png:32
img/15.png:38
img/16.png:43
img/17.png:34
img/18.png:35
img/19.png:30
img/20.png:33
img/21.png:40
img/22.png:41
img/23.png:47
img/24.png:64
img/25.png:66
img/26.png:50
img/27.png:60
img/28.png:57
img/29.png:33
img/30.png:39
img/31.png:14
img/32.png:16
img/33.png:18
img/34.png:16
img/35.png:20
img/36.png:18
img/37.png:18
img/51.png:55
img/52.png:46
img/53.png:55
img/collab.jpg:178
img/git_logo.png:4
img/github_logo_red.png:17
img/gitlab_logo.png:27
img/gitout.png:42
img/vc.jpg:1563
index.qmd:4
install.qmd:1
intro.qmd:1
intro_slides.qmd:2
logs.qmd:1
practice_repo/search.qmd:31
tags.qmd:5
top_intro.qmd:1
wb_dvc.qmd:1
---
img/01.png:1
img/02.png:2
img/03.png:2
img/04.png:1
img/05.png:3
img/06.png:3
img/07.png:1
img/08.png:1
img/09.png:1
img/10.png:1
img/11.png:1
img/12.png:1
img/13.png:2
img/14.png:2
img/15.png:3
img/16.png:1
img/17.png:1
img/18.png:2
img/19.png:1
img/20.png:1
img/21.png:1
img/22.png:2
img/23.png:4
img/24.png:2
img/25.png:1
img/26.png:1
img/27.png:2
img/28.png:3
img/29.png:2
img/30.png:1
img/31.png:1
img/51.png:1
img/52.png:2
img/53.png:1
img/collab.jpg:1
img/gitout.png:1
img/vc.jpg:12
practice_repo/search.qmd:5
---
first_steps.qmd:3
img/01.png:15
img/02.png:30
img/03.png:29
img/04.png:25
img/05.png:28
img/06.png:29
img/07.png:29
img/08.png:33
img/09.png:34
img/10.png:40
img/11.png:46
img/12.png:39
img/13.png:37
img/14.png:30
img/15.png:35
img/16.png:42
img/17.png:33
img/18.png:33
img/19.png:29
img/20.png:32
img/21.png:39
img/22.png:39
img/23.png:43
img/24.png:62
img/25.png:65
img/26.png:49
img/27.png:58
img/28.png:54
img/29.png:31
img/30.png:38
img/31.png:13
img/32.png:16
img/33.png:18
img/34.png:16
img/35.png:20
img/36.png:18
img/37.png:18
img/51.png:54
img/52.png:44
img/53.png:54
img/collab.jpg:177
img/git_logo.png:4
img/github_logo_red.png:17
img/gitlab_logo.png:27
img/gitout.png:41
img/vc.jpg:1551
index.qmd:4
install.qmd:1
intro.qmd:1
intro_slides.qmd:2
logs.qmd:1
practice_repo/search.qmd:26
tags.qmd:5
top_intro.qmd:1
wb_dvc.qmd:1</code></pre>
</div>
</div>
<p>There were 2 lines matching <code>__</code> in <code>src/test_manuel.py</code> and we have indeed excluded them from our search.</p>
<p>Extended regular expressions are also covered with the flag <code>-E</code>.</p>
</section>
<section id="searching-other-trees" class="level3">
<h3 class="anchored" data-anchor-id="searching-other-trees">Searching other trees</h3>
<p>So far, we have searched the current version of tracked files, but we can just as easily search files at any commit.</p>
<p>Let’s search for <code>test</code> in the tracked files 20 commits ago:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> grep test HEAD~20</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>HEAD~20:aliases.qmd:Now, let's build an alias for a more complex command: `git grep "test" $(git rev-list --all)`. This example
HEAD~20:aliases.qmd:from the *"Searching a Git project"* section below will search for the string "test" in all previous
HEAD~20:aliases.qmd:commits. There are two problems with this command: (1) it takes an argument (the string "test"), and (2) it
HEAD~20:aliases.qmd:git search test
HEAD~20:aliases.qmd:should search the entire current Git project history for "test".
HEAD~20:branches.qmd:git branch test
HEAD~20:branches.qmd:git switch test
HEAD~20:branches.qmd:* test
HEAD~20:branches.qmd:The `*` shows the branch you are currently on (i.e. the branch to which `HEAD` points to). In our example, the project has two branches and we are on the branch `test`.
HEAD~20:branches.qmd:git diff main test
HEAD~20:branches.qmd:When you are happy with the changes you made on your test branch, you can merge it into `main`.
HEAD~20:branches.qmd:If you have only created new commits on the branch `test`, the merge is called a "fast-forward merge" because `main` and `test` have not diverged: it is simply a question of having `main` catch up to `test`.
HEAD~20:branches.qmd:git merge test
HEAD~20:branches.qmd:Then, usually, you delete the branch `test` as it has served its purpose:
HEAD~20:branches.qmd:git branch -d test
HEAD~20:branches.qmd:Alternatively, you can switch back to `test` and do the next bit of experimental work on it. This allows to keep `main` free of mishaps and bad developments.
HEAD~20:branches.qmd:Let's go back to our situation before we created the branch `test`:
HEAD~20:branches.qmd:This time, you create a branch called `test2`:
HEAD~20:branches.qmd:To merge your branch `test2` into `main`, a new commit is now required. Git will create this new commit automatically. As long as there is no conflict, it is just as easy as a fast-forward merge:
HEAD~20:branches.qmd:git merge test2
HEAD~20:branches.qmd:After which, you can delete the (now useless) test branch (with `git branch -d test2`):
HEAD~20:branches.qmd:&gt;&gt;&gt;&gt;&gt;&gt;&gt; test2
HEAD~20:collab.qmd:Click on the `Code` green drop-down button, select SSH [if you have set SSH for your GitHub account](https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/connecting-to-github-with-ssh) or HTTPS and copy the address.
HEAD~20:practice_repo/search.qmd:First, let's look for the word `test` in the current version of the tracked files in the test repo:
HEAD~20:practice_repo/search.qmd:git grep test
HEAD~20:practice_repo/search.qmd:git grep --break test
HEAD~20:practice_repo/search.qmd:git grep --break --heading test
HEAD~20:practice_repo/search.qmd:git grep --break --heading -n test
HEAD~20:practice_repo/search.qmd:Notice how the results for the file `src/test_manuel.py` involve functions. It would be very convenient to have the names of the functions in which `test` appears.
HEAD~20:practice_repo/search.qmd:git grep --break --heading -p test src/test_manuel.py
HEAD~20:practice_repo/search.qmd:We added the argument `src/test_manuel.py` to limit the search to that file.
HEAD~20:practice_repo/search.qmd:We can now see that the word `test` appears in the functions `test` and `main`.
HEAD~20:practice_repo/search.qmd:git grep -c test
HEAD~20:practice_repo/search.qmd:`git grep` in fact searches for regular expressions. `test` is a regular expression matching `test`, but we can look for more complex patterns.
HEAD~20:practice_repo/search.qmd:There were 2 lines matching `__` in `src/test_manuel.py` and we have indeed excluded them from our search.
HEAD~20:practice_repo/search.qmd:Let's search for `test` in the tracked files 20 commits ago:
HEAD~20:practice_repo/search.qmd:git grep test HEAD~20
HEAD~20:practice_repo/search.qmd:As you can see, the file `src/test_manuel.py` is not in the results. Either it didn't exist or it didn't have the word `test` at that commit.
HEAD~20:practice_repo/search.qmd:Let's create a new (thus untracked) file with some content including the word `test`:
HEAD~20:practice_repo/search.qmd:echo "This is a test" &gt; newfile
HEAD~20:practice_repo/search.qmd:git grep -c test
HEAD~20:practice_repo/search.qmd:git grep -c --untracked test
HEAD~20:practice_repo/search.qmd:Now, let's create a file in it that contains `test`:
HEAD~20:practice_repo/search.qmd:echo "And another test" &gt; data/file
HEAD~20:practice_repo/search.qmd:git grep -c test
HEAD~20:practice_repo/search.qmd:git grep -c --untracked test
HEAD~20:practice_repo/search.qmd:git grep -c --untracked --no-exclude-standard test
HEAD~20:practice_repo/search.qmd:To search for `test` in all the commits, we thus run:
HEAD~20:practice_repo/search.qmd:git grep "test" $(git rev-list --all)
HEAD~20:practice_repo/search.qmd:git grep "test" $(git rev-list --all -2)
HEAD~20:practice_repo/search.qmd:git grep "test" $(git rev-list --all) | fzf --cycle -i -e
HEAD~20:practice_repo/search.qmd:git grep "test" $(git rev-list --all) |
HEAD~20:practice_repo/search.qmd:git grep "test" $(git rev-list --all) |
HEAD~20:practice_repo/search.qmd:git grep "test" $(git rev-list --all) |
HEAD~20:practice_repo/search.qmd:git search test
HEAD~20:practice_repo/search.qmd:Let's look for `test` in the commit messages and limit the output to 3 commits:
HEAD~20:practice_repo/search.qmd:git log --grep=test -3
HEAD~20:practice_repo/search.qmd:git log --grep="test" -3 --oneline
HEAD~20:practice_repo/search.qmd:git log --grep="test" | fzf --cycle -i -e
HEAD~20:practice_repo/search.qmd:git log --grep="test" --oneline |
HEAD~20:practice_repo/search.qmd:Remember that `test` was present in the file `src/test_manuel.py`. If we want to see when the pattern was first created and then each time it was modified, we use the `-L` flag in this fashion:
HEAD~20:practice_repo/search.qmd:git log -L :test:src/test_manuel.py
HEAD~20:practice_repo/search.qmd:Now, if we want to list all commits that created a change in the number of occurrences of `test` in our project, we run:
HEAD~20:practice_repo/search.qmd:git log -S test --oneline
HEAD~20:remotes.qmd:Click on the `Code` green drop-down button, select SSH [if you have set SSH for your GitHub account](https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/connecting-to-github-with-ssh) or HTTPS and copy the address.
HEAD~20:undo.qmd:Here is a common scenario: you make a commit, then realize that you forgot to include some changes in that commit; or you aren't happy with the commit message; or both. You can edit your latest commit with the `--amend` flag:</code></pre>
</div>
</div>
<div class="note">
<p>As you can see, the file <code>src/test_manuel.py</code> is not in the results. Either it didn’t exist or it didn’t have the word <code>test</code> at that commit.</p>
</div>
<p>If you want to search tracked files AND untracked files, you need to use the <code>--untracked</code> flag.</p>
<p>Let’s create a new (thus untracked) file with some content including the word <code>test</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"This is a test"</span> <span class="op">&gt;</span> newfile</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now compare the following:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> grep <span class="at">-c</span> test</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>aliases.qmd:5
branches.qmd:17
collab.qmd:1
practice_repo/search.qmd:41
remotes.qmd:1
undo.qmd:1</code></pre>
</div>
</div>
<p>with:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> grep <span class="at">-c</span> <span class="at">--untracked</span> test</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>aliases.qmd:5
branches.qmd:17
collab.qmd:1
newfile:1
remotes.qmd:1
search.rmarkdown:41
undo.qmd:1</code></pre>
</div>
</div>
<div class="note">
<p>This last result also returned our untracked file <code>newfile</code>.</p>
</div>
<p>If you want to search untracked and ignored files (meaning all your files), use the flags <code>--untracked --no-exclude-standard</code>.</p>
<p>Let’s see what the <code>.gitignore</code> file contains:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> .gitignore</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>cat: .gitignore: No such file or directory</code></pre>
</div>
</div>
<p>The directory <code>data</code> is in <code>.gitignore</code>. This means that it is not under version control and it thus doesn’t exist in our repo (since we cloned our repo, we only have the version-controlled files). Let’s create it:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Now, let’s create a file in it that contains <code>test</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"And another test"</span> <span class="op">&gt;</span> data/file</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>bash: line 1: data/file: No such file or directory</code></pre>
</div>
</div>
<p>We can rerun our previous two searches to verify that files excluded from version control are not searched:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> grep <span class="at">-c</span> test</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>aliases.qmd:5
branches.qmd:17
collab.qmd:1
practice_repo/search.qmd:41
remotes.qmd:1
undo.qmd:1</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> grep <span class="at">-c</span> <span class="at">--untracked</span> test</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>aliases.qmd:5
branches.qmd:17
collab.qmd:1
newfile:1
remotes.qmd:1
search.rmarkdown:41
undo.qmd:1</code></pre>
</div>
</div>
<p>And now, let’s try:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> grep <span class="at">-c</span> <span class="at">--untracked</span> <span class="at">--no-exclude-standard</span> test</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>aliases.qmd:5
branches.qmd:17
collab.qmd:1
intro_old.qmd:9
newfile:1
remotes.qmd:1
revisiting_old_commits_alternate.qmd:1
search.rmarkdown:41
undo.qmd:1</code></pre>
</div>
</div>
<div class="note">
<p><code>data/file</code>, despite being excluded from version control, is also searched.</p>
</div>
</section>
<section id="searching-all-commits" class="level3">
<h3 class="anchored" data-anchor-id="searching-all-commits">Searching all commits</h3>
<p>We saw that <code>git grep &lt;pattern&gt; &lt;commit&gt;</code> can search a pattern in any commit. Now, what if we all to search <em>all</em> commits for a pattern?</p>
<p>For this, we pass the expression <code>$(git rev-list --all)</code> in lieu of <code>&lt;commit&gt;</code>.</p>
<p><code>git rev-list --all</code> creates a list of all the commits in a way that can be used as an argument to other functions. The <code>$()</code> allows to run the expression inside it and pass the result as and argument.</p>
<p>To search for <code>test</code> in all the commits, we thus run:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> grep <span class="st">"test"</span> <span class="va">$(</span><span class="fu">git</span> rev-list <span class="at">--all</span><span class="va">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>I am not running this command has it has a huge output. Instead, I will limit the search to the last two commits:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> grep <span class="st">"test"</span> <span class="va">$(</span><span class="fu">git</span> rev-list <span class="at">--all</span> <span class="at">-2</span><span class="va">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>8c7858fed11c2d338b119058a26f95adb62b361d:aliases.qmd:Now, let's build an alias for a more complex command: `git grep "test" $(git rev-list --all)`. This example
8c7858fed11c2d338b119058a26f95adb62b361d:aliases.qmd:from the *"Searching a Git project"* section below will search for the string "test" in all previous
8c7858fed11c2d338b119058a26f95adb62b361d:aliases.qmd:commits. There are two problems with this command: (1) it takes an argument (the string "test"), and (2) it
8c7858fed11c2d338b119058a26f95adb62b361d:aliases.qmd:git search test
8c7858fed11c2d338b119058a26f95adb62b361d:aliases.qmd:should search the entire current Git project history for "test".
8c7858fed11c2d338b119058a26f95adb62b361d:branches.qmd:git branch test
8c7858fed11c2d338b119058a26f95adb62b361d:branches.qmd:git switch test
8c7858fed11c2d338b119058a26f95adb62b361d:branches.qmd:* test
8c7858fed11c2d338b119058a26f95adb62b361d:branches.qmd:The `*` shows the branch you are currently on (i.e. the branch to which `HEAD` points to). In our example, the project has two branches and we are on the branch `test`.
8c7858fed11c2d338b119058a26f95adb62b361d:branches.qmd:git diff main test
8c7858fed11c2d338b119058a26f95adb62b361d:branches.qmd:When you are happy with the changes you made on your test branch, you can merge it into `main`.
8c7858fed11c2d338b119058a26f95adb62b361d:branches.qmd:If you have only created new commits on the branch `test`, the merge is called a "fast-forward merge" because `main` and `test` have not diverged: it is simply a question of having `main` catch up to `test`.
8c7858fed11c2d338b119058a26f95adb62b361d:branches.qmd:git merge test
8c7858fed11c2d338b119058a26f95adb62b361d:branches.qmd:Then, usually, you delete the branch `test` as it has served its purpose:
8c7858fed11c2d338b119058a26f95adb62b361d:branches.qmd:git branch -d test
8c7858fed11c2d338b119058a26f95adb62b361d:branches.qmd:Alternatively, you can switch back to `test` and do the next bit of experimental work on it. This allows to keep `main` free of mishaps and bad developments.
8c7858fed11c2d338b119058a26f95adb62b361d:branches.qmd:Let's go back to our situation before we created the branch `test`:
8c7858fed11c2d338b119058a26f95adb62b361d:branches.qmd:This time, you create a branch called `test2`:
8c7858fed11c2d338b119058a26f95adb62b361d:branches.qmd:To merge your branch `test2` into `main`, a new commit is now required. Git will create this new commit automatically. As long as there is no conflict, it is just as easy as a fast-forward merge:
8c7858fed11c2d338b119058a26f95adb62b361d:branches.qmd:git merge test2
8c7858fed11c2d338b119058a26f95adb62b361d:branches.qmd:After which, you can delete the (now useless) test branch (with `git branch -d test2`):
8c7858fed11c2d338b119058a26f95adb62b361d:branches.qmd:&gt;&gt;&gt;&gt;&gt;&gt;&gt; test2
8c7858fed11c2d338b119058a26f95adb62b361d:collab.qmd:Click on the `Code` green drop-down button, select SSH [if you have set SSH for your GitHub account](https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/connecting-to-github-with-ssh) or HTTPS and copy the address.
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:First, let's look for the word `test` in the current version of the tracked files in the test repo:
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:git grep test
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:git grep --break test
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:git grep --break --heading test
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:git grep --break --heading -n test
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:Notice how the results for the file `src/test_manuel.py` involve functions. It would be very convenient to have the names of the functions in which `test` appears.
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:git grep --break --heading -p test src/test_manuel.py
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:We added the argument `src/test_manuel.py` to limit the search to that file.
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:We can now see that the word `test` appears in the functions `test` and `main`.
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:git grep -c test
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:`git grep` in fact searches for regular expressions. `test` is a regular expression matching `test`, but we can look for more complex patterns.
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:There were 2 lines matching `__` in `src/test_manuel.py` and we have indeed excluded them from our search.
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:Let's search for `test` in the tracked files 20 commits ago:
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:git grep test HEAD~20
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:As you can see, the file `src/test_manuel.py` is not in the results. Either it didn't exist or it didn't have the word `test` at that commit.
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:Let's create a new (thus untracked) file with some content including the word `test`:
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:echo "This is a test" &gt; newfile
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:git grep -c test
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:git grep -c --untracked test
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:Now, let's create a file in it that contains `test`:
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:echo "And another test" &gt; data/file
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:git grep -c test
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:git grep -c --untracked test
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:git grep -c --untracked --no-exclude-standard test
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:To search for `test` in all the commits, we thus run:
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:git grep "test" $(git rev-list --all)
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:git grep "test" $(git rev-list --all -2)
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:git grep "test" $(git rev-list --all) | fzf --cycle -i -e
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:git grep "test" $(git rev-list --all) |
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:git grep "test" $(git rev-list --all) |
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:git grep "test" $(git rev-list --all) |
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:git search test
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:Let's look for `test` in the commit messages and limit the output to 3 commits:
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:git log --grep=test -3
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:git log --grep="test" -3 --oneline
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:git log --grep="test" | fzf --cycle -i -e
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:git log --grep="test" --oneline |
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:Remember that `test` was present in the file `src/test_manuel.py`. If we want to see when the pattern was first created and then each time it was modified, we use the `-L` flag in this fashion:
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:git log -L :test:src/test_manuel.py
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:Now, if we want to list all commits that created a change in the number of occurrences of `test` in our project, we run:
8c7858fed11c2d338b119058a26f95adb62b361d:practice_repo/search.qmd:git log -S test --oneline
8c7858fed11c2d338b119058a26f95adb62b361d:remotes.qmd:Click on the `Code` green drop-down button, select SSH [if you have set SSH for your GitHub account](https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/connecting-to-github-with-ssh) or HTTPS and copy the address.
8c7858fed11c2d338b119058a26f95adb62b361d:undo.qmd:Here is a common scenario: you make a commit, then realize that you forgot to include some changes in that commit; or you aren't happy with the commit message; or both. You can edit your latest commit with the `--amend` flag:
943f847124bafea17be87a1b624467122c3e1ab7:aliases.qmd:Now, let's build an alias for a more complex command: `git grep "test" $(git rev-list --all)`. This example
943f847124bafea17be87a1b624467122c3e1ab7:aliases.qmd:from the *"Searching a Git project"* section below will search for the string "test" in all previous
943f847124bafea17be87a1b624467122c3e1ab7:aliases.qmd:commits. There are two problems with this command: (1) it takes an argument (the string "test"), and (2) it
943f847124bafea17be87a1b624467122c3e1ab7:aliases.qmd:git search test
943f847124bafea17be87a1b624467122c3e1ab7:aliases.qmd:should search the entire current Git project history for "test".
943f847124bafea17be87a1b624467122c3e1ab7:branches.qmd:git branch test
943f847124bafea17be87a1b624467122c3e1ab7:branches.qmd:git switch test
943f847124bafea17be87a1b624467122c3e1ab7:branches.qmd:* test
943f847124bafea17be87a1b624467122c3e1ab7:branches.qmd:The `*` shows the branch you are currently on (i.e. the branch to which `HEAD` points to). In our example, the project has two branches and we are on the branch `test`.
943f847124bafea17be87a1b624467122c3e1ab7:branches.qmd:git diff main test
943f847124bafea17be87a1b624467122c3e1ab7:branches.qmd:When you are happy with the changes you made on your test branch, you can merge it into `main`.
943f847124bafea17be87a1b624467122c3e1ab7:branches.qmd:If you have only created new commits on the branch `test`, the merge is called a "fast-forward merge" because `main` and `test` have not diverged: it is simply a question of having `main` catch up to `test`.
943f847124bafea17be87a1b624467122c3e1ab7:branches.qmd:git merge test
943f847124bafea17be87a1b624467122c3e1ab7:branches.qmd:Then, usually, you delete the branch `test` as it has served its purpose:
943f847124bafea17be87a1b624467122c3e1ab7:branches.qmd:git branch -d test
943f847124bafea17be87a1b624467122c3e1ab7:branches.qmd:Alternatively, you can switch back to `test` and do the next bit of experimental work on it. This allows to keep `main` free of mishaps and bad developments.
943f847124bafea17be87a1b624467122c3e1ab7:branches.qmd:Let's go back to our situation before we created the branch `test`:
943f847124bafea17be87a1b624467122c3e1ab7:branches.qmd:This time, you create a branch called `test2`:
943f847124bafea17be87a1b624467122c3e1ab7:branches.qmd:To merge your branch `test2` into `main`, a new commit is now required. Git will create this new commit automatically. As long as there is no conflict, it is just as easy as a fast-forward merge:
943f847124bafea17be87a1b624467122c3e1ab7:branches.qmd:git merge test2
943f847124bafea17be87a1b624467122c3e1ab7:branches.qmd:After which, you can delete the (now useless) test branch (with `git branch -d test2`):
943f847124bafea17be87a1b624467122c3e1ab7:branches.qmd:&gt;&gt;&gt;&gt;&gt;&gt;&gt; test2
943f847124bafea17be87a1b624467122c3e1ab7:collab.qmd:Click on the `Code` green drop-down button, select SSH [if you have set SSH for your GitHub account](https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/connecting-to-github-with-ssh) or HTTPS and copy the address.
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:First, let's look for the word `test` in the current version of the tracked files in the test repo:
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:git grep test
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:git grep --break test
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:git grep --break --heading test
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:git grep --break --heading -n test
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:Notice how the results for the file `src/test_manuel.py` involve functions. It would be very convenient to have the names of the functions in which `test` appears.
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:git grep --break --heading -p test src/test_manuel.py
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:We added the argument `src/test_manuel.py` to limit the search to that file.
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:We can now see that the word `test` appears in the functions `test` and `main`.
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:git grep -c test
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:`git grep` in fact searches for regular expressions. `test` is a regular expression matching `test`, but we can look for more complex patterns.
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:There were 2 lines matching `__` in `src/test_manuel.py` and we have indeed excluded them from our search.
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:Let's search for `test` in the tracked files 20 commits ago:
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:git grep test HEAD~20
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:As you can see, the file `src/test_manuel.py` is not in the results. Either it didn't exist or it didn't have the word `test` at that commit.
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:Let's create a new (thus untracked) file with some content including the word `test`:
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:echo "This is a test" &gt; newfile
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:git grep -c test
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:git grep -c --untracked test
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:Now, let's create a file in it that contains `test`:
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:echo "And another test" &gt; data/file
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:git grep -c test
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:git grep -c --untracked test
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:git grep -c --untracked --no-exclude-standard test
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:To search for `test` in all the commits, we thus run:
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:git grep "test" $(git rev-list --all)
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:git grep "test" $(git rev-list --all -2)
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:git grep "test" $(git rev-list --all) | fzf --cycle -i -e
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:git grep "test" $(git rev-list --all) |
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:git grep "test" $(git rev-list --all) |
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:git grep "test" $(git rev-list --all) |
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:git search test
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:Let's look for `test` in the commit messages and limit the output to 3 commits:
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:git log --grep=test -3
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:git log --grep="test" -3 --oneline
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:git log --grep="test" | fzf --cycle -i -e
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:git log --grep="test" --oneline |
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:Remember that `test` was present in the file `src/test_manuel.py`. If we want to see when the pattern was first created and then each time it was modified, we use the `-L` flag in this fashion:
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:git log -L :test:src/test_manuel.py
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:Now, if we want to list all commits that created a change in the number of occurrences of `test` in our project, we run:
943f847124bafea17be87a1b624467122c3e1ab7:practice_repo/search.qmd:git log -S test --oneline
943f847124bafea17be87a1b624467122c3e1ab7:remotes.qmd:Click on the `Code` green drop-down button, select SSH [if you have set SSH for your GitHub account](https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/connecting-to-github-with-ssh) or HTTPS and copy the address.
943f847124bafea17be87a1b624467122c3e1ab7:undo.qmd:Here is a common scenario: you make a commit, then realize that you forgot to include some changes in that commit; or you aren't happy with the commit message; or both. You can edit your latest commit with the `--amend` flag:</code></pre>
</div>
</div>
<div class="info">
<p>In combination with the fuzzy finder tool <a href="https://github.com/junegunn/fzf">fzf</a>, this can make finding a particular commit extremely easy.</p>
<p>For instance, the code below allows you to dynamically search in the result through incremental completion:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> grep <span class="st">"test"</span> <span class="va">$(</span><span class="fu">git</span> rev-list <span class="at">--all</span><span class="va">)</span> <span class="kw">|</span> <span class="ex">fzf</span> <span class="at">--cycle</span> <span class="at">-i</span> <span class="at">-e</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Or even better, you can automatically copy the short form of the hash of the selected commit to clipboard so that you can use it with <code>git show</code>, <code>git checkout</code>, etc.:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> grep <span class="st">"test"</span> <span class="va">$(</span><span class="fu">git</span> rev-list <span class="at">--all</span><span class="va">)</span> <span class="kw">|</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>    <span class="ex">fzf</span> <span class="at">--cycle</span> <span class="at">-i</span> <span class="at">-e</span> <span class="kw">|</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cut</span> <span class="at">-c</span> 1-7 <span class="kw">|</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>    <span class="ex">xclip</span> <span class="at">-r</span> <span class="at">-selection</span> clipboard</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="note">
<p>Here, I am using <a href="https://github.com/astrand/xclip">xclip</a> to copy to the clipboard as I am on Linux. Depending on your OS you might need to use a different tool.</p>
</div>
<p>Of course, you can create a function in your <code>.bashrc</code> file with such code so that you wouldn’t have to type it each time:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep_all_commits ()</span> <span class="kw">{</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">git</span> grep <span class="st">"</span><span class="va">$1</span><span class="st">"</span> <span class="va">$(</span><span class="fu">git</span> rev-list <span class="at">--all</span><span class="va">)</span> <span class="kw">|</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>        <span class="ex">fzf</span> <span class="at">--cycle</span> <span class="at">-i</span> <span class="at">-e</span> <span class="kw">|</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">cut</span> <span class="at">-c</span> 1-7 <span class="kw">|</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>        <span class="ex">xclip</span> <span class="at">-r</span> <span class="at">-selection</span> clipboard</span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Alternatively, you can pass the result directly into whatever git command you want to use that commit for.</p>
<p>Here is an example with <code>git show</code>:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> grep <span class="st">"test"</span> <span class="va">$(</span><span class="fu">git</span> rev-list <span class="at">--all</span><span class="va">)</span> <span class="kw">|</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>    <span class="ex">fzf</span> <span class="at">--cycle</span> <span class="at">-i</span> <span class="at">-e</span> <span class="kw">|</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cut</span> <span class="at">-c</span> 1-7 <span class="kw">|</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">git</span> show</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>And if you wanted to get really fancy, you could go with:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> grep <span class="st">"test"</span> <span class="va">$(</span><span class="fu">git</span> rev-list <span class="at">--all</span><span class="va">)</span> <span class="kw">|</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>    <span class="ex">fzf</span> <span class="at">--cycle</span> <span class="at">-i</span> <span class="at">-e</span> <span class="at">--no-multi</span> <span class="dt">\</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">--ansi</span> <span class="at">--preview</span><span class="op">=</span><span class="st">"</span><span class="va">$_viewGitLogLine</span><span class="st">"</span> <span class="dt">\</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">--header</span> <span class="st">"enter: view, C-c: copy hash"</span> <span class="dt">\</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">--bind</span> <span class="st">"enter:execute:</span><span class="va">$_viewGitLogLine</span><span class="st"> | less -R"</span> <span class="dt">\</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">--bind</span> <span class="st">"ctrl-c:execute:</span><span class="va">$_gitLogLineToHash</span><span class="st"> |</span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a><span class="st">        xclip -r -selection clipboard"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Wrapped in a function:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep_all_commits_preview ()</span> <span class="kw">{</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">git</span> grep <span class="st">"</span><span class="va">$1</span><span class="st">"</span> <span class="va">$(</span><span class="fu">git</span> rev-list <span class="at">--all</span><span class="va">)</span> <span class="kw">|</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>        <span class="ex">fzf</span> <span class="at">--cycle</span> <span class="at">-i</span> <span class="at">-e</span> <span class="at">--no-multi</span> <span class="dt">\</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">--ansi</span> <span class="at">--preview</span><span class="op">=</span><span class="st">"</span><span class="va">$_viewGitLogLine</span><span class="st">"</span> <span class="dt">\</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">--header</span> <span class="st">"enter: view, C-c: copy hash"</span> <span class="dt">\</span></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">--bind</span> <span class="st">"enter:execute:</span><span class="va">$_viewGitLogLine</span><span class="st"> |</span></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a><span class="st">              less -R"</span> <span class="dt">\</span></span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">--bind</span> <span class="st">"ctrl-c:execute:</span><span class="va">$_gitLogLineToHash</span><span class="st"> |</span></span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a><span class="st">        xclip -r -selection clipboard"</span></span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This last function allows you to search through all the results in an incremental fashion while displaying a preview of the selected diff (the changes made at that particular commit). If you want to see more of the diff than the preview displays, press <code>&lt;enter&gt;</code> (then <code>q</code> to quit the pager), if you want to copy the hash of a commit, press <code>C-c</code> (Control + c).</p>
<p>With this function, you can now instantly get a preview of the changes made to any line containing an expression for any file, at any commit, and copy the hash of the selected commit. This is really powerful.</p>
</div>
</section>
<section id="aliases" class="level3">
<h3 class="anchored" data-anchor-id="aliases">Aliases</h3>
<p>If you don’t want to type a series of flags all the time, you can configure <a href="https://git-scm.com/book/en/v2/Git-Basics-Git-Aliases">aliases for Git</a>. For instance, Alex Razoumov uses the alias <code>git search</code> for <code>git grep --break --heading -n -i</code>.</p>
<p>Let’s add to it the <code>-p</code> flag. Here is how you would set this alias:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> config <span class="at">--global</span> alias.search <span class="st">'grep --break --heading -n -i -p'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="note">
<p>This setting gets added to your main Git configuration file (on Linux, by default, at <code>~/.gitconfig</code>).</p>
</div>
<p>From there on, you can use your alias with:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> search test</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>aliases.qmd
43=git one    # very nicely formatted version of git log
46:Now, let's build an alias for a more complex command: `git grep "test" $(git rev-list --all)`. This example
47:from the *"Searching a Git project"* section below will search for the string "test" in all previous
48:commits. There are two problems with this command: (1) it takes an argument (the string "test"), and (2) it
63=will place the script into the file $HOME/bin/git-search and will make it executable. Now, running
66:git search test
69:should search the entire current Git project history for "test".

branches.qmd
47=Example:
52:git branch test
65=Example:
70:git switch test
92=git branch
97:* test
100:The `*` shows the branch you are currently on (i.e. the branch to which `HEAD` points to). In our example, the project has two branches and we are on the branch `test`.
104=You can use `git diff` to compare branches:
107:git diff main test
110=This shows all the lines that have been modified (added or deleted) between the commits both branches point to.
114:When you are happy with the changes you made on your test branch, you can merge it into `main`.
118:If you have only created new commits on the branch `test`, the merge is called a "fast-forward merge" because `main` and `test` have not diverged: it is simply a question of having `main` catch up to `test`.
130=Then you do the fast-forward merge:
133:git merge test
138:Then, usually, you delete the branch `test` as it has served its purpose:
141:git branch -d test
146:Alternatively, you can switch back to `test` and do the next bit of experimental work on it. This allows to keep `main` free of mishaps and bad developments.
150=If the branches have diverged (you created commits on both branches), the merge requires the creation of an additional commit called a "merge commit".
152:Let's go back to our situation before we created the branch `test`:
156:This time, you create a branch called `test2`:
174=And you create commits from `main` too:
180:To merge your branch `test2` into `main`, a new commit is now required. Git will create this new commit automatically. As long as there is no conflict, it is just as easy as a fast-forward merge:
183:git merge test2
188:After which, you can delete the (now useless) test branch (with `git branch -d test2`):
212=Great sentence with some variations.
213:&gt;&gt;&gt;&gt;&gt;&gt;&gt; test2

collab.qmd
37=To avoid having to type your password all the time, you should [set up SSH for your account](https://docs.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh).
50:Click on the `Code` green drop-down button, select SSH [if you have set SSH for your GitHub account](https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/connecting-to-github-with-ssh) or HTTPS and copy the address.

practice_repo/search.qmd
99=By default, `git grep` searches recursively through the tracked files in the working directory (that is, the current version of the tracked files).
101:First, let's look for the word `test` in the current version of the tracked files in the test repo:
104:git grep test
107=Let's add blank lines between the results of each file for better readability:
110:git grep --break test
113=Let's also put the file names on separate lines:
116:git grep --break --heading test
119=We can display the line numbers for the results with the `-n` flag:
122:git grep --break --heading -n test
125:Notice how the results for the file `src/test_manuel.py` involve functions. It would be very convenient to have the names of the functions in which `test` appears.
127=We can do this with the `-p` flag:
130:git grep --break --heading -p test src/test_manuel.py
135:We added the argument `src/test_manuel.py` to limit the search to that file.
139:We can now see that the word `test` appears in the functions `test` and `main`.
141=Now, instead of printing all the matching lines, let's print the number of matches per file:
144:git grep -c test
149:`git grep` in fact searches for regular expressions. `test` is a regular expression matching `test`, but we can look for more complex patterns.
214=git grep -ce ".*_.*" --and --not -e "__"
217:There were 2 lines matching `__` in `src/test_manuel.py` and we have indeed excluded them from our search.
223=So far, we have searched the current version of tracked files, but we can just as easily search files at any commit.
225:Let's search for `test` in the tracked files 20 commits ago:
228:git grep test HEAD~20
233:As you can see, the file `src/test_manuel.py` is not in the results. Either it didn't exist or it didn't have the word `test` at that commit.
237=If you want to search tracked files AND untracked files, you need to use the `--untracked` flag.
239:Let's create a new (thus untracked) file with some content including the word `test`:
242:echo "This is a test" &gt; newfile
245=Now compare the following:
248:git grep -c test
251=with:
254:git grep -c --untracked test
274=mkdir data
277:Now, let's create a file in it that contains `test`:
280:echo "And another test" &gt; data/file
283=We can rerun our previous two searches to verify that files excluded from version control are not searched:
286:git grep -c test
290:git grep -c --untracked test
293=And now, let's try:
296:git grep -c --untracked --no-exclude-standard test
309=For this, we pass the expression `$(git rev-list --all)` in lieu of `&lt;commit&gt;`.
313:To search for `test` in all the commits, we thus run:
316:git grep "test" $(git rev-list --all)
319=I am not running this command has it has a huge output. Instead, I will limit the search to the last two commits:
322:git grep "test" $(git rev-list --all -2)
329=For instance, the code below allows you to dynamically search in the result through incremental completion:
332:git grep "test" $(git rev-list --all) | fzf --cycle -i -e
335=Or even better, you can automatically copy the short form of the hash of the selected commit to clipboard so that you can use it with `git show`, `git checkout`, etc.:
338:git grep "test" $(git rev-list --all) |
363=Here is an example with `git show`:
366:git grep "test" $(git rev-list --all) |
372=And if you wanted to get really fancy, you could go with:
375:git grep "test" $(git rev-list --all) |
421=From there on, you can use your alias with:
424:git search test
457=To look for a pattern in all your commit messages, use `git log --grep=&lt;pattern&gt;`.
459:Let's look for `test` in the commit messages and limit the output to 3 commits:
462:git log --grep=test -3
465=For a more compact output:
468:git log --grep="test" -3 --oneline
473=Here too you can use this in combination to [fzf](https://github.com/junegunn/fzf) with for instance:
476:git log --grep="test" | fzf --cycle -i -e
479=Or:
482:git log --grep="test" --oneline |
495:Remember that `test` was present in the file `src/test_manuel.py`. If we want to see when the pattern was first created and then each time it was modified, we use the `-L` flag in this fashion:
501=In our case:
504:git log -L :test:src/test_manuel.py
507=This is very useful if you want to see, for instance, changes made to a function in a script.
511:Now, if we want to list all commits that created a change in the number of occurrences of `test` in our project, we run:
514:git log -S test --oneline

remotes.qmd
30=To avoid having to type your password all the time, you should [set up SSH for your account](https://docs.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh).
43:Click on the `Code` green drop-down button, select SSH [if you have set SSH for your GitHub account](https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/connecting-to-github-with-ssh) or HTTPS and copy the address.

undo.qmd
8=This section covers a few of the ways actions can be undone in Git.
14:Here is a common scenario: you make a commit, then realize that you forgot to include some changes in that commit; or you aren't happy with the commit message; or both. You can edit your latest commit with the `--amend` flag:</code></pre>
</div>
</div>
</section>
</section>
<section id="searching-logs" class="level2">
<h2 class="anchored" data-anchor-id="searching-logs">Searching logs</h2>
<p>The second thing that can happen is that you are looking for some pattern in your version control logs.</p>
<section id="git-log" class="level3">
<h3 class="anchored" data-anchor-id="git-log">git log</h3>
<p><code>git log</code> allows to get information on commit logs.</p>
<p>By default, it outputs all the commits of the current branch.</p>
<p>Let’s show the logs of the last 3 commits:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> log <span class="at">-3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>commit 8c7858fed11c2d338b119058a26f95adb62b361d
Author: Marie-Helene Burle &lt;marie.burle@westdri.ca&gt;
Date:   Tue Dec 5 13:47:43 2023 -0800

    update site

commit 943f847124bafea17be87a1b624467122c3e1ab7
Author: Marie-Helene Burle &lt;marie.burle@westdri.ca&gt;
Date:   Tue Dec 5 13:47:40 2023 -0800

    play with navbar settings in style

commit 680528d7d000a8c3ea8dc1ef7c69d2e8708d773a
Author: Marie-Helene Burle &lt;marie.burle@westdri.ca&gt;
Date:   Tue Dec 5 12:11:55 2023 -0800

    update site</code></pre>
</div>
</div>
<p>The output can be customized thanks to a plethora of options.</p>
<p>For instance, here are the logs of the last 15 commits, in a graph, with one line per commit:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> log <span class="at">--graph</span> <span class="at">--oneline</span> <span class="at">-n</span> 15</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>* 8c7858f update site
* 943f847 play with navbar settings in style
* 680528d update site
* 54ad809 experiment changing right to tools (top right icons)
* dd312ae update site
* 4a5ef1e update site
* 64c14a8 update Python files with renaming + new section
* d0a6f1a update gitignore
* f89698b add missing cross topic links + better formatting to existing ones
* 063b9a2 draft files polars webinar and course
* 7a1977a rename Python files with intro, ws, wb, etc.
* 0ffee91 navbar: comment out r packages (not doing it this term) + add polars webinar and course + add missing cross topics links
* 9c9e544 styles: add betterbox div
* f763bc1 update site
* 0441d87 move flux webinar to ai section (from julia)</code></pre>
</div>
</div>
<p>But <code>git log</code> has also flags that allow to search for patterns.</p>
</section>
<section id="searching-commit-messages" class="level3">
<h3 class="anchored" data-anchor-id="searching-commit-messages">Searching commit messages</h3>
<p>One of the reasons it is so important to write informative commit messages is that they are key to finding commits later on.</p>
<p>To look for a pattern in all your commit messages, use <code>git log --grep=&lt;pattern&gt;</code>.</p>
<p>Let’s look for <code>test</code> in the commit messages and limit the output to 3 commits:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> log <span class="at">--grep</span><span class="op">=</span>test <span class="at">-3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>commit 9187263f2d3d6f3a1c7cb21327650c96cf64a4c1
Author: Marie-Helene Burle &lt;marie.burle@westdri.ca&gt;
Date:   Wed Nov 29 14:25:34 2023 -0800

    test on media too

commit 1092f0428a05d9cc92bc7fd49778ac2bb36cbfb8
Author: Marie-Helene Burle &lt;marie.burle@westdri.ca&gt;
Date:   Wed Nov 29 14:24:04 2023 -0800

    new test

commit 6d2b3d5ed8982a2ab1e54458b9245c1bfcb8e2c2
Author: Marie-Helene Burle &lt;marie.burle@westdri.ca&gt;
Date:   Wed Nov 29 13:56:50 2023 -0800

    test fixing flex basis on phone</code></pre>
</div>
</div>
<p>For a more compact output:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> log <span class="at">--grep</span><span class="op">=</span><span class="st">"test"</span> <span class="at">-3</span> <span class="at">--oneline</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>9187263 test on media too
1092f04 new test
6d2b3d5 test fixing flex basis on phone</code></pre>
</div>
</div>
<div class="info">
<p>Here too you can use this in combination to <a href="https://github.com/junegunn/fzf">fzf</a> with for instance:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> log <span class="at">--grep</span><span class="op">=</span><span class="st">"test"</span> <span class="kw">|</span> <span class="ex">fzf</span> <span class="at">--cycle</span> <span class="at">-i</span> <span class="at">-e</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Or:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> log <span class="at">--grep</span><span class="op">=</span><span class="st">"test"</span> <span class="at">--oneline</span> <span class="kw">|</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>    <span class="ex">fzf</span> <span class="at">--cycle</span> <span class="at">-i</span> <span class="at">-e</span> <span class="at">--no-multi</span> <span class="dt">\</span></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">--ansi</span> <span class="at">--preview</span><span class="op">=</span><span class="st">"</span><span class="va">$_viewGitLogLine</span><span class="st">"</span> <span class="dt">\</span></span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">--header</span> <span class="st">"enter: view, C-c: copy hash"</span> <span class="dt">\</span></span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">--bind</span> <span class="st">"enter:execute:</span><span class="va">$_viewGitLogLine</span><span class="st"> | less -R"</span> <span class="dt">\</span></span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">--bind</span> <span class="st">"ctrl-c:execute:</span><span class="va">$_gitLogLineToHash</span><span class="st"> |</span></span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a><span class="st">        xclip -r -selection clipboard"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="changes-made-to-a-pattern" class="level3">
<h3 class="anchored" data-anchor-id="changes-made-to-a-pattern">Changes made to a pattern</h3>
<p>Remember that <code>test</code> was present in the file <code>src/test_manuel.py</code>. If we want to see when the pattern was first created and then each time it was modified, we use the <code>-L</code> flag in this fashion:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> log <span class="at">-L</span> :<span class="op">&lt;</span>pattern<span class="op">&gt;</span>:file</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In our case:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> log <span class="at">-L</span> :test:src/test_manuel.py</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>fatal: There is no path git/src/test_manuel.py in the commit</code></pre>
</div>
</div>
<p>This is very useful if you want to see, for instance, changes made to a function in a script.</p>
</section>
<section id="changes-in-number-of-occurrences-of-a-pattern" class="level3">
<h3 class="anchored" data-anchor-id="changes-in-number-of-occurrences-of-a-pattern">Changes in number of occurrences of a pattern</h3>
<p>Now, if we want to list all commits that created a change in the number of occurrences of <code>test</code> in our project, we run:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> log <span class="at">-S</span> test <span class="at">--oneline</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>4a5ef1e update site
f763bc1 update site
3b955ea update site
27e1a09 update site
3158ff1 update site
7c132d5 update site
141204e add flax abstract
52152ef update JAX abstract after removing dl part with flax
8f250d5 update site
255b320 update freeze
b61b6df update site
99a77db finish jit draft
57d5629 update site
d7e0bcb finish jx numpy section
d344ad8 update site
858e542 JAX: big revamp course structure
62c400b update site
1b2e846 jx principles: add async dispatch
8c8116e update site
0908085 update site
8f32ea6 update site
cd78f15 udpate site
4a003c5 update site
4b3bec7 update site
e8e7386 update site
c545c68 update site
0b628db finish hpc data partition chapter
1a5c59f save a version of hpc_partition before modifying it
08552b7 update site
c7fccd5 update site
d85a054 edit running htop on local machine
b5fa9d3 update site
acb1a4f rename and heavily modify the foreach chapter
4536fc6 add pics
7c318e7 f4 and f5: do testing on the cluster and remove quarto comment
2aa72b9 update site
22192db add example releasing memory
08d8f89 add jx profiling page
a841844 improve hpc optimization
bde35ec improve intro indexing
f178043 jx why: replace gtrend embedded by img (keeps breaking), improve graph color, add abstract, add a bit of content
78c3b7b add colors to jax intro diagrams
fb5662b add a number of jx early drafts
c54f6ed add new jx sections and update site using a virtual env for Python
dbcfca2 add prefix for various sections in julia and r, prevent old and bk files from being executed/rendered, prevent webscraping files from being created
43b79ab update site
64ddfd7 small edits to hpc r before course
9204ff3 add jax top intro
09f64ae add info on profiling
0cce737 move jax below PyTorch as it is a more advanced course
f33135e update gcc and r module versions
96c23b7 update site
279f693 update site after full render
084d522 embed resources
ae9b67b update site
4e9c611 more improvements and little tweaks frameworks slides. Add more info
d58ae46 update site
445bb29 improvements frameworks slides
2188205 update site
fd17244 update formatting framework slides
185e051 update site
bead0b0 many tweaks of formatting
c68c461 first very rough draft of frameworks slides
09f1fe5 replace mermaid diagram in file system exercise with a graphviz one
c6d4a35 filesystem: add exercise with a diagram
2798c6a minor fix
7a08552 update skl workflow
ac76eea update site
8a50423 add sklearn workflow
ea800fd add an sklearn serie
c7ac730 update site
ccf1a85 added content to aliases.qmd
f17c8c9 added aliases.qmd
dc7aae4 update site
74a4e08 finish logs
0ffe3e1 add logs draft
2382725 add project.zip
c8afe95 add downloadthis extension
fe3f956 add abstract to documentation section
bb14573 edits intro slides
4057164 embed resources intro slides
ffa2c74 total revamp of git intro with simply link to slides
2803201 update ml course
043c6cf minor edits r course
4888db4 edit sections on how to run r
e16c946 update site
44ceba8 update site
0ece9c2 update site
51b8534 replace old webscraping (Python) workshop to new version from DHSI
fecc161 add webscraping old to gitignore
4bb8faf little improvements web scraping R
b784f17 update site
91fa024 update site
3bbe8ac add (bad) intro blurb to Python course
3a3361a update site
f589a66 rename the ext section into talks
73dfeda improvements collections section
6617a5b update site
622631f fix and improve pandas section
3eaacd1 update site
f8c47d0 add index for new big section (talks)
e29ae75 update site
9e6a1b8 edit scripts
0f60d0d finish redirections
583f27c add filesystem section
a7c0855 gis slides: fix typo
fec32a1 makie: add content in html below video
954eb10 makie slides: minor improvements
90adee8 more info in workflow section
2250d59 minor edits workflow
39f737d add workflow section
2cd8c6f update navbar by moving data, model, and training in a single section
5f33a18 make backup of autograd in autograd_old and start to make new version of autograd (not complete)
fc853e1 some edits to training, but still not complete
01f0f73 finish tensor section
24b059f finalize parallel loops
e540189 again many changes to parallel loops before changing yet again
1428b5f many changes to parallel loops before making yet many new alternative changes
6abe68e move copy on modify from basics to indexing and make it better
fd1d140 update site
0649af9 move concepts to reading and create a new intro section with slides
ba7938d update site
2525e9e finish function section
b71c761 finish control flow section
7f22658 finalize plotting section
302627a add plotting section
a477bd4 add publishing page with links to quarto workshop and webinar
a30a075 add data structures section
c5a92ed add blurb basics
68489a3 basics: change title + move a lot of content into section specific pages
58e586e packages: add blurb
848f436 update navbar
b728404 minor edits bash intro
075dd52 update site
a519d85 create wildcards section
42f51d4 rename file from search to find
7df872b add videos: 4 workshops for HSS series + staff to staff webinar + regular webinar
b2e565c update site
590bb50 quarto: add installation links
eca80cd make slides less wordy based on the s2s webinar given on quarto
43d1ea7 update site
f424bba add slides for quarto staff to staff webinar
1f33a77 update site
99c7e56 add new minor optimization
dd71a56 turn the parallel loop lesson from the webinar version to the workshop version using batch jobs
07871c1 add 2nd optimization by louis
55e7c61 update site
abb1ced update site
f758b8c update site
61f3b8e add function suggested by workshop participant
649f825 update site
bafb769 remove profiler from performance section
176e5ba finish optimization section
3d42df1 add section on memory
1ba9cc4 important commit: remove "avoid type conversions" in R hpc optimizations section as this doesn't change the timing consistently
b64856d first draft optimizations
a563fa9 re-render site
95086e8 update site
473d722 many edits r resource page
e0ab5c7 tweak all heading levels
934f9a8 update site
37cef29 remove front page for workshops and webinars + add logo image for front page for intro and hpc courses + re-shuffle a few sections + move most ml topics into a course + minor edits (abstract, etc.)
fc82cf5 update site
3bcf2df rename first git section of git course to match structure of other topics
628525d fix how to download bash data
952d027 create front pages for Bash and cards on main topic page
c6ea3e0 add buttons to r main page
f3e7069 several improvements to web scraping
c5258d5 split parallel r section into 3 section and add improvements and edits
046b607 minor fixes hss slides
cda4fc9 add missing image and very minor edits ml hss slides
b9f8b5f embed resources intro hss ml slides
898cdd9 update site
4c07296 add intro ml for hss slides
38a825d many formatting edits all reveal.js presentations
8688a71 replace workshop by webinar in all webinars
20224c1 update site
50fcdc7 finish script section (shortened. Need to add more content)
5ef06d8 finish function section
bf2653f move control flow, script, and search to molecules folder
bad3da3 transfer: add globus and abstract
e7412c3 finish redirections and move it to the molecules repo to run code
23bed49 add html_children
9ff42fb add html section
9c2f06e add delay at each iteration to reduce risk of being blocked
246c64d web scraping: minor edits and improvements
0d08979 add explanations and comments web scraping
4599ed3 disable cache for webscraping as it conflicts with rvest
2703353 minor edit nav titles
5cd6930 change rstudio server time to 1.5h and remove jh option image as it is not the right one
8159f9b minor edits: add some explanations, improve code a bit
b78b4b6 add first decent draft webscraping with more or less all code and some explanations
1c25103 add alliance wiki page for r in intro hss resources
cf85139 first draft bash redirections and pipes
03b9e33 first draft bash script
20a392b add a little content to intro r
5c3cfb0 add 2 new sections (not covered by alex)
fb69b01 add draft content to intro hss r
6c6d0cf add bash empty chapters for online course
b900e68 intro hpc slides by re-embeding resources
66bca7e fix typo git search
d72b170 finish hpc r slides
1f14f6b open link to hpc slides
95f2074 finish control flow chapter
12d248d add many little things in list and make a correction for strings
c9d2e1d update site
a65bd05 remove out of the package section everything that can live elsewhere
173d128 move content jh instructions to a new chapter on running Python
b259e52 remove alex acknowledgement
b4b87e6 minor edit git front page
bb2c6fe add acknowledgement of alex content
dd132ab supress redundancy between basic and functions
6f2f0ae finish list section (Python)
db33cd1 finish basic chapter (Python)
7ac5744 first draft collections
04db2fc edit basics
fd677ff add first draft Python intro hpc copied from Julia. Still needs lots of work
7464d14 add first draft Python functions (not far from ready)
1ccb156 add first draft web scraping in Python
663e401 yml: uncomment Python tab and add first two Python workshops
4450be7 add alias
479f1aa many small edits search + add fzf example for searching the logs
2556ab4 update site
c53e0f5 add a big info block with more fancy searches using fzf
1752db6 first final version of search workshop
fab1000 minor updates hpc r slides
534a0da first draft hpc in r slides
2f647bd remove unnecessary jupyter: python3 in 2 ml revealjs
919d206 git lessons: adjust img new names + fixes, corrections, improvements
7a3d5b1 rename all git diagram img in some sensible order
16ca4f6 finish branches and add it to the nav
2725f41 improve front page image
115aa01 edits many julia files: remove unnecessary jupyter: julia-1.8, small additions, small fixes, small improvements
9db0e74 add preliminary draft of branches (git) and commented out nav entry
4ca06a6 add distributed (julia)
a181d66 add symlink for search.qmd which is in the nested git repo
bdb30cb edit control flow
da7332f add remotes
774a9d4 rename git main workshop
8f8eb03 add tags and its img
c1d8385 add multithreading
a31c5aa edits, additions, fixes
2ba9708 remove from basics elements moved to other files
8472020 remove from intro hpc everything that is intro julia (move it in various other sections)
a8f0980 turn arrays to collections and add content
0cc0c59 add julia functions
1d65319 add julia control flow
5ec2bcc add julia basics
2249467 add julia types
4b09f00 add julia performance
5581390 add non interactive julia
f9dd47c add julia arrays
ea059d5 edit paths and remove shadow img three trees
38e370f add undo
29eb1ac add tools
81fa864 add stashing
73ee1b1 add ignore
d8970df add three trees of git
8148a86 move all top levels to h2 instead of h1 following chat with quarto developpers
4637b68 julia intro: change header levels + reformat all code blocks
c072c6c add packages
1601205 add r resources
3e81b34 add contrib workshop
5cc2efa move section about collaboration through git to new workshop
96108ed uncomment grid section with wider body width
cddb972 add ml hpc.qmd
6fa885a add quarto link to about
08e488a make all page start with h1 instead of h2 + add author where missing + move intro to def block
f09e60b update site
9f97ec8 add 5 new ml workshops
50a465a add note about revealjs presentations slow to load in all links
2a6a3fa improvement to mnist: small additions + run code
e205633 add choosing frameworks
2e28113 add concept workshop in ml
68183ee add autograd to workshops
8e6c61c add mnist to workshops
e8b2166 add intro scripting workshop
6e5faa1 add julia intro hpc workshop
2ab3deb add julia covid plotting
7e19653 add torchtensor slides
515a4dd fix R logo (not good on light bg) and add logos for all other sections
6a781ea rename ml intro hss
0649618 finish formatting upscaling slides
44bc853 reduce high res pics upscaling because GitHub's limit is reach with revealjs with self embedded option
7989e1a add gis mapping slides
0454b61 add upscaling slides
d9e4e10 turn link to slides into buttons
8235653 add _site to vc to solve publish issue on GitHub
eb7f3b1 delete publish.yml for GitHub actions
8278145 update freeze
f7f08ca update freeze
7417494 update freeze
ccc30a7 update freeze
9ef79da update freeze
f23a412 remove in code lengthy comment and add note instead
b75bf0d add custom title-slide.html with partial template for revealjs title slide
16ebe72 re-add makie slides *after* having rebuilt the site with freeze true
348b7ac remove makie slides
f131770 makie webinar: re-add slides
3653918 remove makie slides for now for gh actions to build
ecda9e1 update freeze with julia makie slides
ff2ec56 add makie slides
6d40658 front page: switch buttons to cards and readjust content accordingly
fc20339 update freeze
4ceac57 add outputs of quarto demos so as not to have to run them all the time (annoying with latex). works with blocking rendering of that dir in yml
0bbc311 update freeze with computations from r the basics
71c4ab6 add r the basics from autumn school 22 to r workshops
b2e7370 add all quarto example files
358bfb8 add quarto webinar
818cb8c first commit with _freeze (for the quarto examples)
8b21abf add all ml webinars
feafdc5 front page: finalize title and add aside about main site
13dad00 big changes to about page
3dd050c add publish.yml file for GitHub actions
b6fc959 add 2022_git_sfu.qmd</code></pre>
</div>
</div>
<p>This can be useful to identify the commit you need.</p>
</section>
</section>
<section id="tldr" class="level2">
<h2 class="anchored" data-anchor-id="tldr">TL;DR</h2>
<p>Here are the search functions you are the most likely to use:</p>
<ul>
<li>Search for a pattern in the current version of your tracked files:</li>
</ul>
<div class="sourceCode" id="cb78"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> grep <span class="op">&lt;</span>pattern<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Search for a pattern in your files at a certain commit:</li>
</ul>
<div class="sourceCode" id="cb79"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> grep <span class="op">&lt;</span>pattern<span class="op">&gt;</span> <span class="op">&lt;</span>commit<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Search for a pattern in your files in all the commits:</li>
</ul>
<div class="sourceCode" id="cb80"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> grep <span class="op">&lt;</span>pattern<span class="op">&gt;</span> <span class="va">$(</span><span class="fu">git</span> rev-list <span class="at">--all</span><span class="va">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Search for a pattern in your commit messages:</li>
</ul>
<div class="sourceCode" id="cb81"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> log <span class="at">--grep</span><span class="op">=&lt;</span>pattern<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Now you should be able to find pretty much anything in your projects and their histories.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/mint\.westdri\.ca\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    const typesetMath = (el) => {
      if (window.MathJax) {
        // MathJax Typeset
        window.MathJax.typeset([el]);
      } else if (window.katex) {
        // KaTeX Render
        var mathElements = el.getElementsByClassName("math");
        var macros = [];
        for (var i = 0; i < mathElements.length; i++) {
          var texText = mathElements[i].firstChild;
          if (mathElements[i].tagName == "SPAN") {
            window.katex.render(texText.data, mathElements[i], {
              displayMode: mathElements[i].classList.contains('display'),
              throwOnError: false,
              macros: macros,
              fleqn: false
            });
          }
        }
      }
    }
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        typesetMath(container);
        return container.innerHTML
      } else {
        typesetMath(note);
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      typesetMath(note);
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="../about.html">
<p>About</p>
</a>
  </li>  
</ul>
    </div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="../calendar.html">
<p>Calendar</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="../newsletter.html">
<p>Newsletter</p>
</a>
  </li>  
</ul>
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="../contact.html">
<p>Contact</p>
</a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>