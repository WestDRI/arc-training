<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.27">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Marie-Hélène Burle">

<title>seaborn: a brief introduction – Research Computing</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../python/intro_oop.html" rel="next">
<link href="../python/intro_matplotlib.html" rel="prev">
<link href="..//img/favicon_sfu.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-38f1eba84205b676c237b16b2e3e732c.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-3ab34fd50eaf4c251bc27ae6cc09dd28.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-7E8D6VP6FH"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-7E8D6VP6FH', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar floating nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../img/favicon_sfudrac.png" alt="SFU &amp; DRAC logos" class="navbar-logo light-content">
    <img src="../img/favicon_sfudrac.png" alt="SFU &amp; DRAC logos" class="navbar-logo dark-content">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../ai/index.html"> 
<span class="menu-text">AI</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../r/index.html"> 
<span class="menu-text">R</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../python/index.html" aria-current="page"> 
<span class="menu-text">Python</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../julia/index.html"> 
<span class="menu-text">Julia</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../git/index.html"> 
<span class="menu-text">Git</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../bash/index.html"> 
<span class="menu-text">Bash/Zsh</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../emacs/index.html"> 
<span class="menu-text">Emacs</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../tools/index.html"> 
<span class="menu-text">Tools</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools tools-wide">
    <a href="https://github.com/WestDRI" title="" class="quarto-navigation-tool px-1" aria-label="GitHub organization" target="_blank"><i class="bi bi-github"></i></a>
    <a href="https://docs.alliancecan.ca/wiki/Technical_documentation" title="" class="quarto-navigation-tool px-1" aria-label="Alliance wikipedia" target="_blank"><i class="bi bi-wikipedia"></i></a>
    <a href="https://www.youtube.com/channel/UCfgds4Qf7VFOv4ORRvFFmhw" title="" class="quarto-navigation-tool px-1" aria-label="YouTube channel" target="_blank"><i class="bi bi-youtube"></i></a>
    <a href="../calendar.html" title="Upcoming training events" class="quarto-navigation-tool px-1" aria-label="Training calendar"><i class="bi bi-calendar-week"></i></a>
    <a href="../newsletter.html" title="Training events mailing list" class="quarto-navigation-tool px-1" aria-label="Newsletter"><i class="bi bi-envelope-fill"></i></a>
    <a href="../contact.html" title="Contact" class="quarto-navigation-tool px-1" aria-label="Contact us"><i class="bi bi-mailbox2"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <a class="flex-grow-1 no-decor" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
          <h1 class="quarto-secondary-nav-title">seaborn: a brief introduction</h1>
        </a>     
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><br>&nbsp;<img src="img/logo_python.svg" class="img-fluid" style="width:1.55em" alt="noshadow"><br><br></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../python/top_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><b><em>Getting started</em></b></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/intro_python.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">A few words about Python</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/intro_run.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Running Python</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/intro_doc.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Help and documentation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/intro_syntax.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Syntax</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/intro_objects.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Python objects</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/intro_collections.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Collections</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/intro_control_flow.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Control flow</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/intro_functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Writing functions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/intro_pkg.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Modules, pkgs, and libraries</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/intro_df.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">DataFrames in Python</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/intro_numpy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Array computing with NumPy</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../python/intro_plot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Plotting in Python</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/intro_matplotlib.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">matplotlib</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/intro_seaborn.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">seaborn</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/intro_oop.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Object-oriented programming</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/intro_hpc.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Python at scale</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/intro_resources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Resources</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../python/top_llm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><b><em>Learning Python with LLMs</em></b></span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/llm_why.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">LLMs and coding</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/llm_first_dab.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">First dab at playing with an LLM</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/llm_webscraping.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Webscraping with an LLM</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/llm_takeaways.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Takeaways on coding with LLMs</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../python/top_hpc.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><b><em>Faster Python</em></b></span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/hpc_jax.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">JAX: accelerated arrays &amp; AD</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../python/hpc_polars.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Polars: faster DataFrames</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/polars_dataframes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">The world of DataFrames</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/polars_install.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Installation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/polars_types.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data types</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/polars_structures.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data structures</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/polars_inspection.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">DataFrames inspection</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/polars_subset.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Subsetting data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/polars_lazy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lazy evaluation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/polars_pandas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Comparison with pandas</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/polars_resources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Resources</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/hpc_gpu.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">GPU-accelerated Python</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../python/top_nlp.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><b><em>Text analysis</em></b></span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/nlp_install.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Package installation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/nlp_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Getting the data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/nlp_processing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Text processing</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/nlp_normalization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Text normalization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/nlp_analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sentiment analysis</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../python/top_ws.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><em><b>Workshops</b></em></span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/ws_webscraping.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Web scraping with bs4</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/ws_pandas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">DataFrames with pandas</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/ws_text.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Playing with text</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../python/top_wb.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><em><b>Webinars</b></em></span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../python/wb_polars.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Faster DataFrames</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/wb_polars_content.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><em>Slides content</em></span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../python/wb_jax.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Accelerated arrays &amp; AD</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/wb_jax_content.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><em>Slides content</em></span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../python/wb_hss_prog.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Intro programming for HSS</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/wb_hss_prog_content.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><em>Slides content</em></span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../python/wb_uv.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">uv package manager</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-12" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/wb_uv_content.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><em>Slides content</em></span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../python/wb_marimo.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Next gen Python notebooks</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-13" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/wb_marimo_content.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><em>Slides content</em></span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title"><em>On this page:</em></h2>
   
  <ul>
  <li><a href="#getting-data" id="toc-getting-data" class="nav-link active" data-scroll-target="#getting-data">Getting data</a>
  <ul>
  <li><a href="#troubleshooting-data-reading" id="toc-troubleshooting-data-reading" class="nav-link" data-scroll-target="#troubleshooting-data-reading">Troubleshooting data reading</a></li>
  </ul></li>
  <li><a href="#data-exploration-and-transformation" id="toc-data-exploration-and-transformation" class="nav-link" data-scroll-target="#data-exploration-and-transformation">Data exploration and transformation</a>
  <ul>
  <li><a href="#first-cleaning" id="toc-first-cleaning" class="nav-link" data-scroll-target="#first-cleaning">First cleaning</a></li>
  <li><a href="#stations-selection" id="toc-stations-selection" class="nav-link" data-scroll-target="#stations-selection">Stations selection</a></li>
  <li><a href="#convert-to-seasons" id="toc-convert-to-seasons" class="nav-link" data-scroll-target="#convert-to-seasons">Convert to seasons</a></li>
  <li><a href="#select-balanced-panel" id="toc-select-balanced-panel" class="nav-link" data-scroll-target="#select-balanced-panel">Select balanced panel</a></li>
  <li><a href="#add-enso-data" id="toc-add-enso-data" class="nav-link" data-scroll-target="#add-enso-data">ADD ENSO data</a></li>
  </ul></li>
  <li><a href="#plotting" id="toc-plotting" class="nav-link" data-scroll-target="#plotting">Plotting</a>
  <ul>
  <li><a href="#relation-plots" id="toc-relation-plots" class="nav-link" data-scroll-target="#relation-plots">Relation plots</a></li>
  <li><a href="#regression-plots" id="toc-regression-plots" class="nav-link" data-scroll-target="#regression-plots">Regression plots</a></li>
  <li><a href="#boxplots" id="toc-boxplots" class="nav-link" data-scroll-target="#boxplots">Boxplots</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">seaborn: a brief introduction</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Marie-Hélène Burle </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<div class="def">
<p><a href="https://seaborn.pydata.org/">seaborn</a>, at its core, is a statistical visualization library for tabular data<span class="citation" data-cites="Waskom2021">[<a href="#ref-Waskom2021" role="doc-biblioref">1</a>]</span>. It is based on <a href="https://matplotlib.org/">matplotlib</a>, but its higher-level, declarative, and easy interface makes it ideal for <a href="https://en.wikipedia.org/wiki/Exploratory_data_analysis">exploratory data analysis (EDA)</a>. It comes with demo datasets and statistical tools.</p>
</div>
<section id="getting-data" class="level2">
<h2 class="anchored" data-anchor-id="getting-data">Getting data</h2>
<p><a href="https://seaborn.pydata.org/">seaborn</a> comes with a number of <a href="https://github.com/mwaskom/seaborn-data">datasets</a> used in its documentation. They are convenient to play with the library. In this section however, we use <a href="https://www2.gov.bc.ca/gov/content/environment/air-land-water/water/water-science-data/water-data-tools/snow-survey-data">snow survey data for the province of British Columbia (Canada)</a>.</p>
<p>The data is tabular and stored in a CSV file. We read it into a Polars DataFrame:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> polars <span class="im">as</span> pl</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>file_path <span class="op">=</span> <span class="st">"/project/def-sponsor00/data/allmss_archive.csv"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<section id="troubleshooting-data-reading" class="level3">
<h3 class="anchored" data-anchor-id="troubleshooting-data-reading">Troubleshooting data reading</h3>
<p><a href="../python/intro_df.html">As we saw earlier</a>, you read tabular data in a Polars DataFrame with:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pl.read_csv(file_path)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>However, here, we get the following error:</p>
<pre><code>ComputeError: could not parse `35.0` as dtype `i64` at column ' Snow Depth cm' (column number 5)</code></pre>
<p>With, conveniently, the following suggestions:</p>
<pre><code>You might want to try:
- increasing `infer_schema_length` (e.g. `infer_schema_length=10000`),
- specifying correct dtype with the `schema_overrides` argument
- setting `ignore_errors` to `True`,
- adding `35.0` to the `null_values` list.n</code></pre>
<p>If you want to be sure to read the data without error, you can use <code>ignore_errors=True</code>, but this will drop the problematic rows and you will loose data. This is the solution of last resort.</p>
<p>A better solution here is to set the <a href="https://docs.pola.rs/user-guide/lazy/schemas/">schema</a> for the problematic variable manually:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pl.read_csv(file_path, schema_overrides<span class="op">=</span>{<span class="st">" Snow Depth cm"</span>: pl.Float64})</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>But oops. We now get the following error:</p>
<pre><code>ComputeError: could not parse `760.0` as dtype `i64` at column ' Water Equiv. mm' (column number 6)</code></pre>
<div class="exo">
<div class="yourturn">
<p>Your turn:</p>
</div>
<p>Fix the new problem to read in the data.</p>
</div>
</section>
</section>
<section id="data-exploration-and-transformation" class="level2">
<h2 class="anchored" data-anchor-id="data-exploration-and-transformation">Data exploration and transformation</h2>
<p>Here is our DataFrame:</p>
<div id="d4fd2b7b" class="cell" data-execution_count="3">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>shape: (60_265, 10)
┌──────────────┬─────────┬────────┬─────────────┬───┬─────────┬─────────────┬─────────────┬────────┐
│ Snow Course  ┆  Number ┆ Elev.  ┆ Date of     ┆ … ┆ Survey  ┆ Snow Line   ┆  Density %  ┆ Survey │
│ Name         ┆ ---     ┆ metres ┆ Survey      ┆   ┆ Code    ┆ Elev. m     ┆ ---         ┆ Period │
│ ---          ┆ str     ┆ ---    ┆ ---         ┆   ┆ ---     ┆ ---         ┆ i64         ┆ ---    │
│ str          ┆         ┆ i64    ┆ str         ┆   ┆ str     ┆ str         ┆             ┆ str    │
╞══════════════╪═════════╪════════╪═════════════╪═══╪═════════╪═════════════╪═════════════╪════════╡
│ YELLOWHEAD   ┆ 1A01    ┆ 1860   ┆ 1951/03/30  ┆ … ┆ null    ┆ null        ┆ 31          ┆ 01-Apr │
│ YELLOWHEAD   ┆ 1A01    ┆ 1860   ┆ 1951/04/30  ┆ … ┆ null    ┆ null        ┆ 33          ┆ 01-May │
│ YELLOWHEAD   ┆ 1A01    ┆ 1860   ┆ 1951/05/19  ┆ … ┆ null    ┆ null        ┆ 36          ┆ 15-May │
│ YELLOWHEAD   ┆ 1A01    ┆ 1860   ┆ 1952/04/30  ┆ … ┆ null    ┆ null        ┆ 33          ┆ 01-May │
│ YELLOWHEAD   ┆ 1A01    ┆ 1860   ┆ 1952/05/19  ┆ … ┆ null    ┆ null        ┆ 33          ┆ 15-May │
│ …            ┆ …       ┆ …      ┆ …           ┆ … ┆ …       ┆ …           ┆ …           ┆ …      │
│ STANLEY      ┆ 4E03    ┆ 930    ┆ 1985/05/16  ┆ … ┆ null    ┆ null        ┆ 37          ┆ 15-May │
│ CREEK        ┆         ┆        ┆             ┆   ┆         ┆             ┆             ┆        │
│ STANLEY      ┆ 4E03    ┆ 930    ┆ 1986/03/02  ┆ … ┆ null    ┆ null        ┆ 23          ┆ 01-Mar │
│ CREEK        ┆         ┆        ┆             ┆   ┆         ┆             ┆             ┆        │
│ STANLEY      ┆ 4E03    ┆ 930    ┆ 1986/04/01  ┆ … ┆ PROBLEM ┆ null        ┆ 27          ┆ 01-Apr │
│ CREEK        ┆         ┆        ┆             ┆   ┆         ┆             ┆             ┆        │
│ STANLEY      ┆ 4E03    ┆ 930    ┆ 1986/05/01  ┆ … ┆ PROBLEM ┆ null        ┆ 33          ┆ 01-May │
│ CREEK        ┆         ┆        ┆             ┆   ┆         ┆             ┆             ┆        │
│ STANLEY      ┆ 4E03    ┆ 930    ┆ 1986/05/15  ┆ … ┆ null    ┆ null        ┆ 34          ┆ 15-May │
│ CREEK        ┆         ┆        ┆             ┆   ┆         ┆             ┆             ┆        │
└──────────────┴─────────┴────────┴─────────────┴───┴─────────┴─────────────┴─────────────┴────────┘</code></pre>
</div>
</div>
<section id="first-cleaning" class="level3">
<h3 class="anchored" data-anchor-id="first-cleaning">First cleaning</h3>
<p>Let’s create a cleaned DataFrame with relevant columns, the date into a proper format, etc.:</p>
<div id="35a60639" class="cell" data-execution_count="4">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>snow_data <span class="op">=</span> df.select(</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    pl.col(<span class="st">"Snow Course Name"</span>).<span class="bu">str</span>.to_titlecase().alias(<span class="st">"station"</span>),</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    pl.col(<span class="st">" Elev. metres"</span>).alias(<span class="st">"elevation"</span>),</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    pl.col(<span class="st">" Date of Survey"</span>).<span class="bu">str</span>.to_date(<span class="st">"%Y/%m/</span><span class="sc">%d</span><span class="st">"</span>).alias(<span class="st">"date"</span>),</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    pl.col(<span class="st">" Snow Depth cm"</span>).alias(<span class="st">"snow"</span>),</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    pl.col(<span class="st">" Water Equiv. mm"</span>).alias(<span class="st">"water"</span>)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(snow_data)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>shape: (60_265, 5)
┌───────────────┬───────────┬────────────┬───────┬───────┐
│ station       ┆ elevation ┆ date       ┆ snow  ┆ water │
│ ---           ┆ ---       ┆ ---        ┆ ---   ┆ ---   │
│ str           ┆ i64       ┆ date       ┆ f64   ┆ f64   │
╞═══════════════╪═══════════╪════════════╪═══════╪═══════╡
│ Yellowhead    ┆ 1860      ┆ 1951-03-30 ┆ 168.0 ┆ 528.0 │
│ Yellowhead    ┆ 1860      ┆ 1951-04-30 ┆ 147.0 ┆ 485.0 │
│ Yellowhead    ┆ 1860      ┆ 1951-05-19 ┆ 89.0  ┆ 320.0 │
│ Yellowhead    ┆ 1860      ┆ 1952-04-30 ┆ 157.0 ┆ 523.0 │
│ Yellowhead    ┆ 1860      ┆ 1952-05-19 ┆ 79.0  ┆ 264.0 │
│ …             ┆ …         ┆ …          ┆ …     ┆ …     │
│ Stanley Creek ┆ 930       ┆ 1985-05-16 ┆ 83.0  ┆ 307.0 │
│ Stanley Creek ┆ 930       ┆ 1986-03-02 ┆ 142.0 ┆ 320.0 │
│ Stanley Creek ┆ 930       ┆ 1986-04-01 ┆ 135.0 ┆ 365.0 │
│ Stanley Creek ┆ 930       ┆ 1986-05-01 ┆ 121.0 ┆ 400.0 │
│ Stanley Creek ┆ 930       ┆ 1986-05-15 ┆ 83.0  ┆ 285.0 │
└───────────────┴───────────┴────────────┴───────┴───────┘</code></pre>
</div>
</div>
<p>We can explore the data a bit:</p>
<div id="e5b4c114" class="cell" data-execution_count="5">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(snow_data.columns)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>['station', 'elevation', 'date', 'snow', 'water']</code></pre>
</div>
</div>
<div id="caaeaabf" class="cell" data-execution_count="6">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>snow_data.glimpse()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 60265
Columns: 5
$ station    &lt;str&gt; 'Yellowhead', 'Yellowhead', 'Yellowhead', 'Yellowhead', 'Yellowhead', 'Yellowhead', 'Yellowhead', 'Yellowhead', 'Yellowhead', 'Yellowhead'
$ elevation  &lt;i64&gt; 1860, 1860, 1860, 1860, 1860, 1860, 1860, 1860, 1860, 1860
$ date      &lt;date&gt; 1951-03-30, 1951-04-30, 1951-05-19, 1952-04-30, 1952-05-19, 1953-04-01, 1953-05-01, 1953-05-15, 1954-04-05, 1954-04-29
$ snow       &lt;f64&gt; 168.0, 147.0, 89.0, 157.0, 79.0, 140.0, 130.0, 91.0, 193.0, 198.0
$ water      &lt;f64&gt; 528.0, 485.0, 320.0, 523.0, 264.0, 404.0, 455.0, 297.0, 564.0, 577.0
</code></pre>
</div>
</div>
<div id="bea44e08" class="cell" data-execution_count="7">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(snow_data.describe())</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>shape: (9, 6)
┌────────────┬───────────────┬────────────┬────────────────────────────┬────────────┬────────────┐
│ statistic  ┆ station       ┆ elevation  ┆ date                       ┆ snow       ┆ water      │
│ ---        ┆ ---           ┆ ---        ┆ ---                        ┆ ---        ┆ ---        │
│ str        ┆ str           ┆ f64        ┆ str                        ┆ f64        ┆ f64        │
╞════════════╪═══════════════╪════════════╪════════════════════════════╪════════════╪════════════╡
│ count      ┆ 60265         ┆ 60265.0    ┆ 60265                      ┆ 59806.0    ┆ 59801.0    │
│ null_count ┆ 0             ┆ 0.0        ┆ 0                          ┆ 459.0      ┆ 464.0      │
│ mean       ┆ null          ┆ 1363.41369 ┆ 1989-10-21 01:30:49.371940 ┆ 118.480019 ┆ 428.141503 │
│ std        ┆ null          ┆ 402.853802 ┆ null                       ┆ 94.081751  ┆ 415.776042 │
│ min        ┆ Aberdeen Lake ┆ 0.0        ┆ 1935-03-22                 ┆ 0.0        ┆ 0.0        │
│ 25%        ┆ null          ┆ 1100.0     ┆ 1976-04-28                 ┆ 52.0       ┆ 136.0      │
│ 50%        ┆ null          ┆ 1400.0     ┆ 1989-01-01                 ┆ 98.0       ┆ 300.0      │
│ 75%        ┆ null          ┆ 1660.0     ┆ 2004-02-25                 ┆ 165.0      ┆ 599.0      │
│ max        ┆ Yellowhead    ┆ 2230.0     ┆ 2026-02-04                 ┆ 806.0      ┆ 3845.0     │
└────────────┴───────────────┴────────────┴────────────────────────────┴────────────┴────────────┘</code></pre>
</div>
</div>
<div id="108300bb" class="cell" data-execution_count="8">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>n_stations <span class="op">=</span> snow_data.select(<span class="st">"station"</span>).n_unique()</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"There are </span><span class="sc">{</span>n_stations<span class="sc">}</span><span class="ss"> stations."</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>There are 364 stations.</code></pre>
</div>
</div>
<div id="bc589573" class="cell" data-execution_count="9">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>list_stations <span class="op">=</span> snow_data.get_column(<span class="st">"station"</span>).unique().to_list()</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(list_stations)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>['Diamond Head', 'Forrest Kerr Creek', 'Telegraph Creek', 'Whiterocks Mountain', 'Upper Thelwood Lake', 'Bouleau Creek', 'Kemess Creek Upper', 'Wonowon', 'Grayling River', 'Mount Albreda', 'Azure River', 'Green Mountain', 'Caverhill Lake New', 'Mica Creek', 'Lac Le Jeune Lower', 'Greyback Reservoir', 'Mount Cokely', 'Trapping Creek (Lower)', 'Tahtsa Lake', 'Kimberley', 'Mcbride Lower', 'Summit Lake', 'Tenquille Lake', 'Lu Lake', 'Powell River Lower', 'Sunbeam Lake', 'Downie Slide Lower', 'Edwards Lake', 'Trout River', 'Chapman Lake', 'Mount Abbot', 'Arrow Creek', 'Mount Cronin', 'Granite Mountain', 'Kirbyville Lake', 'Isintok Lake', 'Postill Lake Upper', 'Vermilion River No.5', 'Duncan Lake No. 2', 'Wedeene River', 'Shalalth', 'Duffey Lake', 'Canoe River', 'Bigmouth Creek', 'Middle River', 'Hedrick Lake', 'Trapping Creek', 'Kwadacha River', 'Tumeka Creek', 'Ware (Lower)', 'Tiedemann Glacier', 'Lady Laurier Lake', 'Kinbasket Lake', 'Upper Elk River', 'Ottomite', 'Bird Creek', 'Mount Assiniboine', 'Hudson Bay Mountain', 'Bluejoint Mountain', 'Haddo Lake', 'Mount Saint Anne', 'Fernie Ridge', 'Lytton', 'Alouette Lake', 'Missezula Mountain', 'Penfold Creek', 'Schaft Creek', 'Beaverfoot', 'Nickel Plate', 'Wolf River Lower', 'Pavilion Mtn.', 'Vermilion River No.2', 'Vaseux Creek', 'Ipec Lake', 'Esperon Creek Upper', 'Sproat Lake', 'Boston Bar Creek (Upper)', 'Powell River Upper', 'Mount Copeland', 'Braden River', 'Fish Lake', 'Kemess Creek Lower', 'Revolution Creek', 'Silver Star Mountain', 'Tahltan Lake', 'Morfee Mountain', 'Humamilt Lake', 'Iskut', 'Tyaughton Creek (North)', 'Tutizzi Lake', 'Jade City', 'Kinaskan Lake', 'Trapping Creek (Upper)', 'Esperon Creek Lower', 'Sullivan Mine', 'Hourglass', 'Bullhead Mountain', 'Bullmoose Creek', 'Porcupine Ridge', 'Char Creek', 'Wolf River Middle', 'Carmi', 'Powell River', 'Fish Lake No. 2', 'Pulpit Lake', 'Great Bear', 'Farron', 'Harry Lake', 'Mcgillivray Pass', 'Rabbit River', 'Gray Creek Lower', 'Revelstoke', 'Carrs Landing (Upper)', 'Tashme', 'Highland Valley', 'Esperon Creek Middle', 'Downton Lake Upper', 'Toad River', 'Vermilion River No.1', 'Pearson Creek', 'Mcqueen Lake', 'Mcleod Lake', 'Lightning Lake', 'Macdonald Lake', 'Big Creek', 'Hollyburn', 'Kaza Lake', 'Blackwall Peak', 'Sandon', 'Callaghan Creek', 'Vermilion River No. 3', 'Nostetuko River', 'Mount Sheba', 'Black Mountain', 'Smithers', 'Boss Mountain Mine', 'Trygve Lake', 'Hamilton Hill', 'Hope', 'Labour Day Lake', 'Red Chris Mine Lower', 'Downie Site 8', 'Portage Mountain', 'Fernie East', 'Thunder Creek', 'Pass Lake', 'Dog Mountain', 'Downie Slide Upper', 'Kluachesi Lake', 'Brookmere', 'Bush River', 'Blackwater Lookout', 'Meadow Mountain', 'Horsefly Mountain', 'Beatton River', 'Pondosy Lake', 'Barkerville', 'Mount Templeman', 'Missinka River', 'Atlin Lake', 'Tatlayoko Lake', 'Grouse Mountain', 'Dome Mountain', 'Prince George Airport', 'Kostal Lake', 'Boundary', 'Blue River Town', 'Pavilion', 'Stave Lake', 'Gerrard', 'Bralorne', 'Gray Creek Upper', 'Forbidden Plateau', 'Precipice', 'Mckendrick Creek', 'Fort St. John Airport', 'Philip Lake', 'Morrissey Ridge', 'Nechako', 'Mcbride Upper', 'Tachek Creek', 'Bridge Glacier Lower', 'Purcell', 'Sikanni Lake', 'Mcculloch', 'Monashee Pass', 'Bonaparte Lake', 'Wedeene River South', 'Vermont Creek', 'Whatshan Lower', 'Sukunka River', 'Trout Creek West', 'Bear Creek Reservoir', 'Nazko', 'Lyford Mountain', 'Dease Lake', 'Nahatlatch River', 'Blackwater Creek', 'Old Glory Mountain', 'Oyama Lake', 'Conant Lake', 'Puntzi Mountain', 'Burman Lake', 'New Tashme', 'Chapman Creek', 'Mackenzie Airport Manual Snow Course (2003)', 'New Glacier', 'Cornwall Hills', 'Hansard', 'Steelhead', 'Margaret Lake', 'Eaglenest Creek', 'Germansen Upper', 'Blackhawk', 'East Creek', 'Postill Lake', 'Loch Lomond', 'Mount Kobau', 'Fidelity Mountain', 'Nutli Lake', 'Orchid Lake', 'June Lake', 'Wolf River Upper', 'Palisade Lake', 'Copper Mountain', 'Dickson Lake', 'Holmes River', 'Red Chris Mine Upper', 'Equity Mine', 'Gnawed Mountain', 'Alligator Meadows', 'Mount Cook', 'Mount Wells', 'Kimberley (Middle)Vor', 'Skins Lake', 'Mcbride Middle', 'Upper Stave River', 'Upper Quinsam', 'Mount Roosevelt', 'Record Mountain', 'Fernie (Ne)', 'Lost Horse Mountain', 'Cypress Lake', 'Wade Lake', 'Tennent Lake', 'Garibaldi Lake', 'Bowron Lake', 'Burns Lake', 'Whatshan Upper', 'Mount Stearns', 'Newcastle Ridge', 'Germansen Lower', 'Mount Timothy', 'Heather Mountain', 'St. Leon Creek', 'Lost Ledge', 'Bella Coola', 'Glacier', 'Tripp Meadows', 'Yellowhead', 'Whistler Mountain', 'Anglemont', 'Longworth Upper', 'Fort St. James', 'Bugaboo Creek', 'Nelson', 'Big White Mountain', 'Mission Creek', 'Trophy Mountain', 'Burwell Lake', 'Toba River', 'Summerland Reservoir', 'Kimberley (Upper) Vor', 'Snippaker Creek', 'Link Lake', 'Coquitlam Lake', 'Triumph Creek', 'Sno-Bird Lake', 'Graystoke Lake', 'Spahomin', 'Vermilion River No.4', 'Brenda Mine', 'Terrace Airport', 'Wolverine Creek', 'Field', 'Stanley Creek', 'Shovelnose Mountain', 'Mackenzie Airport', 'Wahleach Lake', 'Fernie', 'Moyie Mountain', 'Duncan Lake', 'Klesilkwa', 'Tsaydaychi Lake', 'Koch Creek', 'Elk River', 'Fort Nelson Airport', 'Enderby', 'Carrs Landing (Lower)', 'Machmell River', 'Fredrickson Lake', 'Marble Canyon', 'Pink Mountain', 'Monkman Creek', 'Ware (Upper)', 'Granduc Mine', 'Pennask Creek', 'Bluff Creek', 'Log Cabin', 'Kicking Horse', 'Mount Joffre', 'Goldstream', 'Mount Swannell', 'Whitesail Lake', 'Sumallo River', 'Mount Revelstoke', 'Deadwood River', 'Torpy River', 'Memory Lake', 'Longworth Lower', 'Aberdeen Lake', 'Knudsen Lake', 'Harlow Creek', 'Keystone Creek', 'Cassiar', 'Islaht Lake', 'Trout Creek', 'Disappointment Lake', 'Knouff Lake', 'Ningunsaw Pass', 'Mount Seymour', 'Pacific Lake', 'Blue River', 'Narrow Lake', 'Bralorne (Upper)', 'Sunday Summit', 'Yanks Peak', 'Deadman River', 'Forfar Creek (Upper)', 'Tranquille Lake', 'Bear Pass', 'Kidprice Lake', 'Upper Stikine', 'Park Mountain', 'Boston Bar Creek (Lower)', 'Mount Penrose', 'Kimberley (Lower) Vor', 'Johanson Lake', 'Heather Mountain Upper', 'Invermere', 'Frog River', 'Barnes Creek', 'North Clemina Creek', 'Sumallo River West', 'Pine Pass', 'French Snowshoe', 'Lac Le Jeune Upper', 'Cook Forks', 'Sinclair Pass', 'Floe Lake', 'Bouleau Lake', 'Adams River', 'Watam Lake', 'Ferguson']</code></pre>
</div>
</div>
</section>
<section id="stations-selection" class="level3">
<h3 class="anchored" data-anchor-id="stations-selection">Stations selection</h3>
<p>Let’s select subsets of snow pillow stations located in the Southern Coastal Mountains of British Columbia. They exclude stations in the Interior (Okanagan, Kamloops, Kootenays, Cariboo, Rockies, Columbias) and Northern BC. This is where a decrease in snowpack due to global warming is the most likely to be detectable since the temperatures are not very cold and a few degrees of warming is enough to go from snow to rain.</p>
<div class="note">
<p>I used Gemini 3 to split the list of stations into mountain ranges. This was very convenient since the data doesn’t include coordinates (that would have allowed to filter by latitude and longitude) nor information about the location of the stations.</p>
</div>
<p>Vancouver Island Ranges:</p>
<div id="2880b00f" class="cell" data-execution_count="10">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>island_stations <span class="op">=</span> [</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Burman Lake"</span>, <span class="st">"Dickson Lake"</span>, <span class="st">"East Creek"</span>, <span class="st">"Forbidden Plateau"</span>, <span class="st">"Green Mountain"</span>,</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Heather Mountain"</span>, <span class="st">"Heather Mountain Upper"</span>, <span class="st">"June Lake"</span>, <span class="st">"Labour Day Lake"</span>,</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Loch Lomond"</span>, <span class="st">"Lyford Mountain"</span>, <span class="st">"Mount Cokely"</span>, <span class="st">"Mount Wells"</span>, <span class="st">"Newcastle Ridge"</span>,</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Sproat Lake"</span>, <span class="st">"Tennent Lake"</span>, <span class="st">"Upper Quinsam"</span>, <span class="st">"Upper Thelwood Lake"</span>,</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Wolf River Lower"</span>, <span class="st">"Wolf River Middle"</span>, <span class="st">"Wolf River Upper"</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Lower Mainland &amp; Fraser Valley:</p>
<div id="180a6404" class="cell" data-execution_count="11">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>vancouver_stations <span class="op">=</span> [</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Alouette Lake"</span>, <span class="st">"Black Mountain (Cypress Provincial Park)"</span>, <span class="st">"Burwell Lake (North Shore)"</span>,</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Coquitlam Lake"</span>, <span class="st">"Dog Mountain (Mount Seymour)"</span>, <span class="st">"Grouse Mountain"</span>, <span class="st">"Hollyburn"</span>, <span class="st">"Hope"</span>,</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Mount Saint Anne (Sunshine Coast/Sechelt)"</span>, <span class="st">"Mount Seymour"</span>,</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Orchid Lake (Stave/Lower Mainland)"</span>, <span class="st">"Palisade Lake (Capilano Watershed)"</span>,</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Stave Lake"</span>, <span class="st">"Steelhead"</span>, <span class="st">"Upper Stave River"</span>, <span class="st">"Wahleach Lake"</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Sea-to-Sky, Garibaldi &amp; Bridge River:</p>
<div id="c62a4927" class="cell" data-execution_count="12">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>s2s_stations <span class="op">=</span> [</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Bralorne"</span>, <span class="st">"Bralorne (Upper)"</span>, <span class="st">"Bridge Glacier Lower"</span>, <span class="st">"Callaghan Creek"</span>, <span class="st">"Diamond Head"</span>,</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Downton Lake Upper"</span>, <span class="st">"Duffey Lake"</span>, <span class="st">"Garibaldi Lake"</span>, <span class="st">"McGillivray Pass"</span>, <span class="st">"Mount Cook"</span>,</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Mount Penrose"</span>, <span class="st">"Mount Sheba"</span>, <span class="st">"Powell River"</span>, <span class="st">"Powell River Lower"</span>, <span class="st">"Powell River Upper"</span>,</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Shalalth"</span>, <span class="st">"Shovelnose Mountain"</span>, <span class="st">"Tenquille Lake"</span>, <span class="st">"Toba River"</span>,</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Tyaughton Creek (North)"</span>, <span class="st">"Whistler Mountain"</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Cascades &amp; Coquihalla (Southern Border Ranges):</p>
<div id="d6717e3c" class="cell" data-execution_count="13">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>cascades_stations <span class="op">=</span> [</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Blackwall Peak"</span>, <span class="st">"Boston Bar Creek (Lower)"</span>, <span class="st">"Boston Bar Creek (Upper)"</span>, <span class="st">"Great Bear"</span>,</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Klesilkwa"</span>, <span class="st">"Lightning Lake"</span>, <span class="st">"Nahatlatch River"</span>, <span class="st">"New Tashme"</span>, <span class="st">"Sumallo River"</span>,</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Sumallo River West"</span>, <span class="st">"Sunday Summit"</span>, <span class="st">"Tashme"</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="4521acb7" class="cell" data-execution_count="14">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>selected_data <span class="op">=</span> snow_data.<span class="bu">filter</span>(</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>    pl.col(<span class="st">"station"</span>).is_in(</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>        island_stations <span class="op">+</span> vancouver_stations <span class="op">+</span> s2s_stations <span class="op">+</span> cascades_stations</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>).with_columns(</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    pl.when(pl.col(<span class="st">"station"</span>).is_in(island_stations)).then(pl.lit(<span class="st">"Vancouver Island"</span>))</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    .when(pl.col(<span class="st">"station"</span>).is_in(vancouver_stations)).then(pl.lit(<span class="st">"Lower Mainland"</span>))</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>    .when(pl.col(<span class="st">"station"</span>).is_in(s2s_stations)).then(pl.lit(<span class="st">"Sea to Sky"</span>))</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>    .otherwise(pl.lit(<span class="st">"Cascades"</span>))</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>    .alias(<span class="st">"range"</span>)</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="convert-to-seasons" class="level3">
<h3 class="anchored" data-anchor-id="convert-to-seasons">Convert to seasons</h3>
<p>Snow pillow data go from October <sup>1st</sup> of one year to September <sup>30th</sup> of the following year. Let’s bin the data into snow seasons:</p>
<div id="5ed63841" class="cell" data-execution_count="15">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>season_data <span class="op">=</span> selected_data.with_columns(</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    pl.col(<span class="st">"date"</span>).dt.offset_by(<span class="st">"3mo"</span>).dt.year().alias(<span class="st">"season"</span>)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(season_data)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>shape: (8_867, 7)
┌─────────────┬───────────┬────────────┬───────┬───────┬──────────────────┬────────┐
│ station     ┆ elevation ┆ date       ┆ snow  ┆ water ┆ range            ┆ season │
│ ---         ┆ ---       ┆ ---        ┆ ---   ┆ ---   ┆ ---              ┆ ---    │
│ str         ┆ i64       ┆ date       ┆ f64   ┆ f64   ┆ str              ┆ i32    │
╞═════════════╪═══════════╪════════════╪═══════╪═══════╪══════════════════╪════════╡
│ Mount Wells ┆ 1490      ┆ 1952-02-29 ┆ 127.0 ┆ 358.0 ┆ Vancouver Island ┆ 1952   │
│ Mount Wells ┆ 1490      ┆ 1953-02-26 ┆ 127.0 ┆ 371.0 ┆ Vancouver Island ┆ 1953   │
│ Mount Wells ┆ 1490      ┆ 1953-04-02 ┆ 117.0 ┆ 376.0 ┆ Vancouver Island ┆ 1953   │
│ Mount Wells ┆ 1490      ┆ 1953-05-06 ┆ 122.0 ┆ 411.0 ┆ Vancouver Island ┆ 1953   │
│ Mount Wells ┆ 1490      ┆ 1954-03-02 ┆ 185.0 ┆ 577.0 ┆ Vancouver Island ┆ 1954   │
│ …           ┆ …         ┆ …          ┆ …     ┆ …     ┆ …                ┆ …      │
│ Mount Sheba ┆ 1490      ┆ 2022-12-30 ┆ 112.0 ┆ 301.0 ┆ Sea to Sky       ┆ 2023   │
│ Mount Sheba ┆ 1490      ┆ 2023-02-01 ┆ null  ┆ null  ┆ Sea to Sky       ┆ 2023   │
│ Mount Sheba ┆ 1490      ┆ 2023-02-28 ┆ 225.0 ┆ 715.0 ┆ Sea to Sky       ┆ 2023   │
│ Mount Sheba ┆ 1490      ┆ 2023-03-30 ┆ 206.0 ┆ 794.0 ┆ Sea to Sky       ┆ 2023   │
│ Mount Sheba ┆ 1490      ┆ 2023-04-28 ┆ 208.0 ┆ 853.0 ┆ Sea to Sky       ┆ 2023   │
└─────────────┴───────────┴────────────┴───────┴───────┴──────────────────┴────────┘</code></pre>
</div>
</div>
</section>
<section id="select-balanced-panel" class="level3">
<h3 class="anchored" data-anchor-id="select-balanced-panel">Select balanced panel</h3>
<p><a href="https://docs.pola.rs/api/python/stable/reference/dataframe/api/polars.DataFrame.pivot.html"><code>polars.DataFrame.pivot</code></a> turns a long-format DataFrame to a wide-format one.</p>
<div id="3b2e7f94" class="cell" data-execution_count="16">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>stations_years <span class="op">=</span> season_data.pivot(</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"season"</span>,</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    index<span class="op">=</span><span class="st">"station"</span>,</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    values<span class="op">=</span><span class="st">"snow"</span>,</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    sort_columns<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>    aggregate_function<span class="op">=</span><span class="st">"mean"</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(stations_years)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>shape: (63, 93)
┌────────────────────┬──────┬──────┬──────┬───┬───────────┬───────────┬───────────┬───────┐
│ station            ┆ 1935 ┆ 1936 ┆ 1937 ┆ … ┆ 2023      ┆ 2024      ┆ 2025      ┆ 2026  │
│ ---                ┆ ---  ┆ ---  ┆ ---  ┆   ┆ ---       ┆ ---       ┆ ---       ┆ ---   │
│ str                ┆ f64  ┆ f64  ┆ f64  ┆   ┆ f64       ┆ f64       ┆ f64       ┆ f64   │
╞════════════════════╪══════╪══════╪══════╪═══╪═══════════╪═══════════╪═══════════╪═══════╡
│ Mount Wells        ┆ null ┆ null ┆ null ┆ … ┆ 107.0     ┆ 84.0      ┆ 78.8      ┆ 123.0 │
│ Mount Penrose      ┆ null ┆ null ┆ null ┆ … ┆ null      ┆ null      ┆ null      ┆ null  │
│ Green Mountain     ┆ null ┆ null ┆ null ┆ … ┆ null      ┆ null      ┆ null      ┆ null  │
│ Bralorne           ┆ null ┆ null ┆ null ┆ … ┆ 45.0      ┆ 34.0      ┆ null      ┆ null  │
│ Shalalth           ┆ null ┆ null ┆ null ┆ … ┆ null      ┆ null      ┆ null      ┆ null  │
│ …                  ┆ …    ┆ …    ┆ …    ┆ … ┆ …         ┆ …         ┆ …         ┆ …     │
│ Sumallo River      ┆ null ┆ null ┆ null ┆ … ┆ null      ┆ null      ┆ null      ┆ null  │
│ Sumallo River West ┆ null ┆ null ┆ null ┆ … ┆ 30.25     ┆ 4.25      ┆ 0.0       ┆ 28.0  │
│ Lightning Lake     ┆ null ┆ null ┆ null ┆ … ┆ 71.333333 ┆ 51.666667 ┆ 33.333333 ┆ null  │
│ Klesilkwa          ┆ null ┆ null ┆ null ┆ … ┆ 31.0      ┆ 5.6       ┆ 9.2       ┆ 35.0  │
│ Mount Sheba        ┆ null ┆ null ┆ null ┆ … ┆ 187.75    ┆ null      ┆ null      ┆ null  │
└────────────────────┴──────┴──────┴──────┴───┴───────────┴───────────┴───────────┴───────┘</code></pre>
</div>
</div>
<p>This clearly shows that the data was not collected on all the stations for all years. If we want to see trends over time, this is not good, particularly since not all stations are at the same elevation (if early years mostly had low elevations stations and recent years have more stations in the alpine, this would give a strong fake signal).</p>
<p>We need to select a period and a set of stations that are monitored throughout that period. This is called a balanced panel.</p>
<div id="1f8eac5f" class="cell" data-execution_count="17">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> n_valid_in_period(df, period_start, period_end):</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>    test_seasons <span class="op">=</span> <span class="bu">range</span>(period_start, period_end <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Filter data for the test seasons</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    test_seasons_subset <span class="op">=</span> df.<span class="bu">filter</span>(pl.col(<span class="st">"season"</span>).is_in(test_seasons))</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Count seasons per station</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>    station_counts <span class="op">=</span> test_seasons_subset.group_by(<span class="st">"station"</span>).agg(</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>        pl.col(<span class="st">"season"</span>).n_unique().alias(<span class="st">"n_seasons"</span>)</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Filter stations with data for all test seasons</span></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>    valid_stations <span class="op">=</span> station_counts.<span class="bu">filter</span>(pl.col(<span class="st">"n_seasons"</span>) <span class="op">==</span> <span class="bu">len</span>(test_seasons))</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>    n_valid <span class="op">=</span> <span class="bu">len</span>(valid_stations)</span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (n_valid, period_start, period_end)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="12d0e016" class="cell" data-execution_count="18">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>years <span class="op">=</span> season_data.select(pl.col(<span class="st">"date"</span>).dt.year())</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>min_year <span class="op">=</span> years.<span class="bu">min</span>().item()</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>max_year <span class="op">=</span> years.<span class="bu">max</span>().item()</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Year range: </span><span class="sc">{</span>min_year<span class="sc">}</span><span class="ss"> to </span><span class="sc">{</span>max_year<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Year range: 1935 to 2026</code></pre>
</div>
</div>
<div id="464ad9aa" class="cell" data-execution_count="19">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>list_n_valid <span class="op">=</span> []</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(min_year, max_year <span class="op">+</span> <span class="dv">1</span>):</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(min_year, max_year <span class="op">+</span> <span class="dv">1</span>):</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> j <span class="op">-</span> i <span class="op">&gt;</span> <span class="dv">9</span>:         <span class="co"># we want a period of at least 10 years</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>            list_n_valid.append(n_valid_in_period(season_data, i, j))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>We want at least 5 stations, so let’s clean the list from all <code>n_valid &lt; 5</code>:</p>
<div id="99375817" class="cell" data-execution_count="20">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>non_nil_list_n_valid <span class="op">=</span> [i <span class="cf">for</span> i <span class="kw">in</span> list_n_valid <span class="cf">if</span> i[<span class="dv">0</span>] <span class="op">&gt;=</span> <span class="dv">5</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="ade1b256" class="cell" data-execution_count="21">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>balanced_panels <span class="op">=</span> pl.DataFrame(</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>    non_nil_list_n_valid,</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>    orient<span class="op">=</span><span class="st">"row"</span>,</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>    schema<span class="op">=</span>[<span class="st">"n_valid"</span>, <span class="st">"period_start"</span>, <span class="st">"period_end"</span>]</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>).with_columns(</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>    (pl.col(<span class="st">"period_end"</span>) <span class="op">-</span> pl.col(<span class="st">"period_start"</span>)).alias(<span class="st">"period_length"</span>)</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>).sort(</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"period_length"</span>, <span class="st">"n_valid"</span>, descending<span class="op">=</span><span class="va">True</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="b0903f19" class="cell" data-execution_count="22">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(balanced_panels)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>shape: (2_211, 4)
┌─────────┬──────────────┬────────────┬───────────────┐
│ n_valid ┆ period_start ┆ period_end ┆ period_length │
│ ---     ┆ ---          ┆ ---        ┆ ---           │
│ i64     ┆ i64          ┆ i64        ┆ i64           │
╞═════════╪══════════════╪════════════╪═══════════════╡
│ 5       ┆ 1954         ┆ 2025       ┆ 71            │
│ 5       ┆ 1954         ┆ 2024       ┆ 70            │
│ 5       ┆ 1955         ┆ 2025       ┆ 70            │
│ 5       ┆ 1954         ┆ 2023       ┆ 69            │
│ 5       ┆ 1955         ┆ 2024       ┆ 69            │
│ …       ┆ …            ┆ …          ┆ …             │
│ 6       ┆ 1950         ┆ 1960       ┆ 10            │
│ 6       ┆ 1951         ┆ 1961       ┆ 10            │
│ 5       ┆ 1948         ┆ 1958       ┆ 10            │
│ 5       ┆ 1947         ┆ 1957       ┆ 10            │
│ 5       ┆ 1949         ┆ 1959       ┆ 10            │
└─────────┴──────────────┴────────────┴───────────────┘</code></pre>
</div>
</div>
<div class="exo">
<div class="yourturn">
<p>Your turn:</p>
</div>
<p>Create a DataFrame of balanced panels similar to <code>balanced_panels</code> but in which all periods include the present.</p>
<p>Call it <code>current</code>.</p>
</div>
<p>To print more rows than the default, you can use <a href="https://docs.pola.rs/api/python/dev/reference/api/polars.Config.set_tbl_rows.html"><code>polars.Config.set_tbl_rows</code></a>:</p>
<div id="d11ea0f8" class="cell" data-execution_count="24">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> pl.Config(tbl_rows<span class="op">=</span><span class="dv">100</span>):</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(balanced_current)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>shape: (59, 4)
┌─────────┬──────────────┬────────────┬───────────────┐
│ n_valid ┆ period_start ┆ period_end ┆ period_length │
│ ---     ┆ ---          ┆ ---        ┆ ---           │
│ i64     ┆ i64          ┆ i64        ┆ i64           │
╞═════════╪══════════════╪════════════╪═══════════════╡
│ 5       ┆ 1958         ┆ 2026       ┆ 68            │
│ 5       ┆ 1959         ┆ 2026       ┆ 67            │
│ 5       ┆ 1960         ┆ 2026       ┆ 66            │
│ 5       ┆ 1961         ┆ 2026       ┆ 65            │
│ 5       ┆ 1962         ┆ 2026       ┆ 64            │
│ 5       ┆ 1963         ┆ 2026       ┆ 63            │
│ 5       ┆ 1964         ┆ 2026       ┆ 62            │
│ 5       ┆ 1965         ┆ 2026       ┆ 61            │
│ 5       ┆ 1966         ┆ 2026       ┆ 60            │
│ 5       ┆ 1967         ┆ 2026       ┆ 59            │
│ 6       ┆ 1968         ┆ 2026       ┆ 58            │
│ 6       ┆ 1969         ┆ 2026       ┆ 57            │
│ 7       ┆ 1970         ┆ 2026       ┆ 56            │
│ 7       ┆ 1971         ┆ 2026       ┆ 55            │
│ 7       ┆ 1972         ┆ 2026       ┆ 54            │
│ 7       ┆ 1973         ┆ 2026       ┆ 53            │
│ 7       ┆ 1974         ┆ 2026       ┆ 52            │
│ 7       ┆ 1975         ┆ 2026       ┆ 51            │
│ 7       ┆ 1976         ┆ 2026       ┆ 50            │
│ 7       ┆ 1977         ┆ 2026       ┆ 49            │
│ 8       ┆ 1978         ┆ 2026       ┆ 48            │
│ 8       ┆ 1979         ┆ 2026       ┆ 47            │
│ 8       ┆ 1980         ┆ 2026       ┆ 46            │
│ 8       ┆ 1981         ┆ 2026       ┆ 45            │
│ 8       ┆ 1982         ┆ 2026       ┆ 44            │
│ 8       ┆ 1983         ┆ 2026       ┆ 43            │
│ 8       ┆ 1984         ┆ 2026       ┆ 42            │
│ 8       ┆ 1985         ┆ 2026       ┆ 41            │
│ 8       ┆ 1986         ┆ 2026       ┆ 40            │
│ 8       ┆ 1987         ┆ 2026       ┆ 39            │
│ 8       ┆ 1988         ┆ 2026       ┆ 38            │
│ 8       ┆ 1989         ┆ 2026       ┆ 37            │
│ 8       ┆ 1990         ┆ 2026       ┆ 36            │
│ 9       ┆ 1991         ┆ 2026       ┆ 35            │
│ 10      ┆ 1992         ┆ 2026       ┆ 34            │
│ 10      ┆ 1993         ┆ 2026       ┆ 33            │
│ 10      ┆ 1994         ┆ 2026       ┆ 32            │
│ 10      ┆ 1995         ┆ 2026       ┆ 31            │
│ 10      ┆ 1996         ┆ 2026       ┆ 30            │
│ 10      ┆ 1997         ┆ 2026       ┆ 29            │
│ 10      ┆ 1998         ┆ 2026       ┆ 28            │
│ 10      ┆ 1999         ┆ 2026       ┆ 27            │
│ 10      ┆ 2000         ┆ 2026       ┆ 26            │
│ 10      ┆ 2001         ┆ 2026       ┆ 25            │
│ 10      ┆ 2002         ┆ 2026       ┆ 24            │
│ 10      ┆ 2003         ┆ 2026       ┆ 23            │
│ 10      ┆ 2004         ┆ 2026       ┆ 22            │
│ 10      ┆ 2005         ┆ 2026       ┆ 21            │
│ 10      ┆ 2006         ┆ 2026       ┆ 20            │
│ 10      ┆ 2007         ┆ 2026       ┆ 19            │
│ 10      ┆ 2008         ┆ 2026       ┆ 18            │
│ 10      ┆ 2009         ┆ 2026       ┆ 17            │
│ 10      ┆ 2010         ┆ 2026       ┆ 16            │
│ 10      ┆ 2011         ┆ 2026       ┆ 15            │
│ 10      ┆ 2012         ┆ 2026       ┆ 14            │
│ 10      ┆ 2013         ┆ 2026       ┆ 13            │
│ 10      ┆ 2014         ┆ 2026       ┆ 12            │
│ 10      ┆ 2015         ┆ 2026       ┆ 11            │
│ 10      ┆ 2016         ┆ 2026       ┆ 10            │
└─────────┴──────────────┴────────────┴───────────────┘</code></pre>
</div>
</div>
<p>48 seasons for 8 stations is not bad, so let’s select the period from 1978 to the present.</p>
<div id="e2909d20" class="cell" data-execution_count="25">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>subset_df <span class="op">=</span> season_data.<span class="bu">filter</span>(</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>    pl.col(<span class="st">"season"</span>).is_between(<span class="dv">1978</span>, <span class="dv">2026</span>)</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(subset_df)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>shape: (6_261, 7)
┌─────────────┬───────────┬────────────┬───────┬───────┬──────────────────┬────────┐
│ station     ┆ elevation ┆ date       ┆ snow  ┆ water ┆ range            ┆ season │
│ ---         ┆ ---       ┆ ---        ┆ ---   ┆ ---   ┆ ---              ┆ ---    │
│ str         ┆ i64       ┆ date       ┆ f64   ┆ f64   ┆ str              ┆ i32    │
╞═════════════╪═══════════╪════════════╪═══════╪═══════╪══════════════════╪════════╡
│ Mount Wells ┆ 1490      ┆ 1978-02-27 ┆ 112.0 ┆ 310.0 ┆ Vancouver Island ┆ 1978   │
│ Mount Wells ┆ 1490      ┆ 1978-03-28 ┆ 127.0 ┆ 358.0 ┆ Vancouver Island ┆ 1978   │
│ Mount Wells ┆ 1490      ┆ 1978-04-26 ┆ 124.0 ┆ 404.0 ┆ Vancouver Island ┆ 1978   │
│ Mount Wells ┆ 1490      ┆ 1978-05-31 ┆ 56.0  ┆ 198.0 ┆ Vancouver Island ┆ 1978   │
│ Mount Wells ┆ 1490      ┆ 1979-02-26 ┆ 160.0 ┆ 495.0 ┆ Vancouver Island ┆ 1979   │
│ …           ┆ …         ┆ …          ┆ …     ┆ …     ┆ …                ┆ …      │
│ Mount Sheba ┆ 1490      ┆ 2022-12-30 ┆ 112.0 ┆ 301.0 ┆ Sea to Sky       ┆ 2023   │
│ Mount Sheba ┆ 1490      ┆ 2023-02-01 ┆ null  ┆ null  ┆ Sea to Sky       ┆ 2023   │
│ Mount Sheba ┆ 1490      ┆ 2023-02-28 ┆ 225.0 ┆ 715.0 ┆ Sea to Sky       ┆ 2023   │
│ Mount Sheba ┆ 1490      ┆ 2023-03-30 ┆ 206.0 ┆ 794.0 ┆ Sea to Sky       ┆ 2023   │
│ Mount Sheba ┆ 1490      ┆ 2023-04-28 ┆ 208.0 ┆ 853.0 ┆ Sea to Sky       ┆ 2023   │
└─────────────┴───────────┴────────────┴───────┴───────┴──────────────────┴────────┘</code></pre>
</div>
</div>
<div id="836553f2" class="cell" data-execution_count="26">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>max_n_seasons <span class="op">=</span> subset_df.group_by(<span class="st">"station"</span>).agg(</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>    pl.col(<span class="st">"season"</span>).n_unique().alias(<span class="st">"n_seasons"</span>)</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>).select(<span class="st">"n_seasons"</span>).<span class="bu">max</span>().item()</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>subset_stations <span class="op">=</span> subset_df.group_by(<span class="st">"station"</span>).agg(</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>    pl.col(<span class="st">"season"</span>).n_unique().alias(<span class="st">"n_seasons"</span>)</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>).<span class="bu">filter</span>(pl.col(<span class="st">"n_seasons"</span>) <span class="op">==</span> max_n_seasons).get_column(<span class="st">"station"</span>).to_list()</span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(subset_stations)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>['Nahatlatch River', 'Wolf River Lower', 'Forbidden Plateau', 'Mount Wells', 'Duffey Lake', 'Grouse Mountain', 'Upper Thelwood Lake', 'Klesilkwa']</code></pre>
</div>
</div>
<div id="ffd50609" class="cell" data-execution_count="27">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>subset_data <span class="op">=</span> subset_df.<span class="bu">filter</span>(pl.col(<span class="st">"station"</span>).is_in(subset_stations))</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(subset_data)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>shape: (1_675, 7)
┌─────────────┬───────────┬────────────┬───────┬───────┬──────────────────┬────────┐
│ station     ┆ elevation ┆ date       ┆ snow  ┆ water ┆ range            ┆ season │
│ ---         ┆ ---       ┆ ---        ┆ ---   ┆ ---   ┆ ---              ┆ ---    │
│ str         ┆ i64       ┆ date       ┆ f64   ┆ f64   ┆ str              ┆ i32    │
╞═════════════╪═══════════╪════════════╪═══════╪═══════╪══════════════════╪════════╡
│ Mount Wells ┆ 1490      ┆ 1978-02-27 ┆ 112.0 ┆ 310.0 ┆ Vancouver Island ┆ 1978   │
│ Mount Wells ┆ 1490      ┆ 1978-03-28 ┆ 127.0 ┆ 358.0 ┆ Vancouver Island ┆ 1978   │
│ Mount Wells ┆ 1490      ┆ 1978-04-26 ┆ 124.0 ┆ 404.0 ┆ Vancouver Island ┆ 1978   │
│ Mount Wells ┆ 1490      ┆ 1978-05-31 ┆ 56.0  ┆ 198.0 ┆ Vancouver Island ┆ 1978   │
│ Mount Wells ┆ 1490      ┆ 1979-02-26 ┆ 160.0 ┆ 495.0 ┆ Vancouver Island ┆ 1979   │
│ …           ┆ …         ┆ …          ┆ …     ┆ …     ┆ …                ┆ …      │
│ Klesilkwa   ┆ 1175      ┆ 2025-02-26 ┆ 14.0  ┆ 50.0  ┆ Cascades         ┆ 2025   │
│ Klesilkwa   ┆ 1175      ┆ 2025-03-30 ┆ 5.0   ┆ 18.0  ┆ Cascades         ┆ 2025   │
│ Klesilkwa   ┆ 1175      ┆ 2025-04-29 ┆ 0.0   ┆ 0.0   ┆ Cascades         ┆ 2025   │
│ Klesilkwa   ┆ 1175      ┆ 2025-12-31 ┆ 48.0  ┆ 106.0 ┆ Cascades         ┆ 2026   │
│ Klesilkwa   ┆ 1175      ┆ 2026-01-27 ┆ 22.0  ┆ 71.0  ┆ Cascades         ┆ 2026   │
└─────────────┴───────────┴────────────┴───────┴───────┴──────────────────┴────────┘</code></pre>
</div>
</div>
</section>
<section id="add-enso-data" class="level3">
<h3 class="anchored" data-anchor-id="add-enso-data">ADD ENSO data</h3>
<p><a href="https://en.wikipedia.org/wiki/El_Ni%C3%B1o%E2%80%93Southern_Oscillation">El Niño–Southern Oscillation (ENSO)</a></p>
<p>Based on NOAA ONI data. Year listed is the “Season Year” (approx Jan-Apr of that year). e.g.&nbsp;El Niño 1997-98 -&gt; Season 1998</p>
<!-- ```{python} -->
<!-- # all events -->
<!-- el_nino_years = [ -->
<!--    1940, 1941, 1942, 1947, 1952, 1954, 1958, 1959, 1964, 1966, 1969, 1970, 1973, 1977, 1978, -->
<!--    1980, 1983, 1987, 1988, 1992, 1995, 1998, 2003, 2005, 2007, 2010, 2015, 2016, 2019, 2020, 2024 -->
<!-- ] -->
<!-- la_nina_years = [ -->
<!--    1939, 1943, 1945, 1946, 1950, 1951, 1955, 1956, 1957, 1962, 1965, 1968, 1971, 1972, 1974, 1975, 1976, 1984, -->
<!--    1985, 1989, 1996, 1999, 2000, 2001, 2006, 2008, 2009, 2011, 2012, 2017, 2018, 2021, 2022, 2023, 2025, 2026 -->
<!-- ] -->
<!-- ``` -->
<!-- all events, selected period only: -->
<div id="75c6d53d" class="cell" data-execution_count="28">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>el_nino_years <span class="op">=</span> [</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>    <span class="dv">1978</span>, <span class="dv">1980</span>, <span class="dv">1983</span>, <span class="dv">1987</span>, <span class="dv">1988</span>, <span class="dv">1992</span>, <span class="dv">1995</span>, <span class="dv">1998</span>, <span class="dv">2003</span>,</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>    <span class="dv">2005</span>, <span class="dv">2007</span>, <span class="dv">2010</span>, <span class="dv">2015</span>, <span class="dv">2016</span>, <span class="dv">2019</span>, <span class="dv">2020</span>, <span class="dv">2024</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>la_nina_years <span class="op">=</span> [</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>    <span class="dv">1984</span>, <span class="dv">1985</span>, <span class="dv">1989</span>, <span class="dv">1996</span>, <span class="dv">1999</span>, <span class="dv">2000</span>, <span class="dv">2001</span>, <span class="dv">2006</span>, <span class="dv">2008</span>, <span class="dv">2009</span>,</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>    <span class="dv">2011</span>, <span class="dv">2012</span>, <span class="dv">2017</span>, <span class="dv">2018</span>, <span class="dv">2021</span>, <span class="dv">2022</span>, <span class="dv">2023</span>, <span class="dv">2025</span>, <span class="dv">2026</span></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<!-- ```{python} -->
<!-- # strong events -->
<!-- el_nino_years = [ -->
<!--    1941, 1942, 1958, 1966, 1973, 1978, 1980, 1983, 1987, -->
<!--    1988, 1992, 1995, 1998, 2003, 2007, 2010, 2016, 2024 -->
<!-- ] -->
<!-- la_nina_years = [ -->
<!--    1939, 1943, 1950, 1951, 1955, 1956, 1962, 1971, 1974, -->
<!--    1976, 1989, 1999, 2000, 2008, 2011, 2012, 2021, 2022 -->
<!-- ] -->
<!-- ``` -->
<!-- ```{python} -->
<!-- # strong events, selected period only -->
<!-- el_nino_years = [ -->
<!--    1978, 1980, 1983, 1987, 1988, 1992, 1995, 1998, 2003, 2007, 2010, 2016, 2024 -->
<!-- ] -->
<!-- la_nina_years = [ -->
<!--    1989, 1999, 2000, 2008, 2011, 2012, 2021, 2022 -->
<!-- ] -->
<!-- ``` -->
<div id="11c786fc" class="cell" data-execution_count="29">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>subset_enso <span class="op">=</span> subset_data.with_columns(</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>    pl.when(pl.col(<span class="st">"season"</span>).is_in(el_nino_years)).then(pl.lit(<span class="st">"El Niño"</span>))</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>    .when(pl.col(<span class="st">"season"</span>).is_in(la_nina_years)).then(pl.lit(<span class="st">"La Niña"</span>))</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>    .otherwise(pl.lit(<span class="st">"Neutral"</span>))</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>    .alias(<span class="st">"enso"</span>)</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(subset_enso)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>shape: (1_675, 8)
┌─────────────┬───────────┬────────────┬───────┬───────┬──────────────────┬────────┬─────────┐
│ station     ┆ elevation ┆ date       ┆ snow  ┆ water ┆ range            ┆ season ┆ enso    │
│ ---         ┆ ---       ┆ ---        ┆ ---   ┆ ---   ┆ ---              ┆ ---    ┆ ---     │
│ str         ┆ i64       ┆ date       ┆ f64   ┆ f64   ┆ str              ┆ i32    ┆ str     │
╞═════════════╪═══════════╪════════════╪═══════╪═══════╪══════════════════╪════════╪═════════╡
│ Mount Wells ┆ 1490      ┆ 1978-02-27 ┆ 112.0 ┆ 310.0 ┆ Vancouver Island ┆ 1978   ┆ El Niño │
│ Mount Wells ┆ 1490      ┆ 1978-03-28 ┆ 127.0 ┆ 358.0 ┆ Vancouver Island ┆ 1978   ┆ El Niño │
│ Mount Wells ┆ 1490      ┆ 1978-04-26 ┆ 124.0 ┆ 404.0 ┆ Vancouver Island ┆ 1978   ┆ El Niño │
│ Mount Wells ┆ 1490      ┆ 1978-05-31 ┆ 56.0  ┆ 198.0 ┆ Vancouver Island ┆ 1978   ┆ El Niño │
│ Mount Wells ┆ 1490      ┆ 1979-02-26 ┆ 160.0 ┆ 495.0 ┆ Vancouver Island ┆ 1979   ┆ Neutral │
│ …           ┆ …         ┆ …          ┆ …     ┆ …     ┆ …                ┆ …      ┆ …       │
│ Klesilkwa   ┆ 1175      ┆ 2025-02-26 ┆ 14.0  ┆ 50.0  ┆ Cascades         ┆ 2025   ┆ La Niña │
│ Klesilkwa   ┆ 1175      ┆ 2025-03-30 ┆ 5.0   ┆ 18.0  ┆ Cascades         ┆ 2025   ┆ La Niña │
│ Klesilkwa   ┆ 1175      ┆ 2025-04-29 ┆ 0.0   ┆ 0.0   ┆ Cascades         ┆ 2025   ┆ La Niña │
│ Klesilkwa   ┆ 1175      ┆ 2025-12-31 ┆ 48.0  ┆ 106.0 ┆ Cascades         ┆ 2026   ┆ La Niña │
│ Klesilkwa   ┆ 1175      ┆ 2026-01-27 ┆ 22.0  ┆ 71.0  ┆ Cascades         ┆ 2026   ┆ La Niña │
└─────────────┴───────────┴────────────┴───────┴───────┴──────────────────┴────────┴─────────┘</code></pre>
</div>
</div>
</section>
</section>
<section id="plotting" class="level2">
<h2 class="anchored" data-anchor-id="plotting">Plotting</h2>
<p>Let’s load the seaborn library:</p>
<div id="06d446db" class="cell" data-execution_count="30">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<section id="relation-plots" class="level3">
<h3 class="anchored" data-anchor-id="relation-plots">Relation plots</h3>
<p>You could xxx</p>
<div id="757e7e82" class="cell" data-execution_count="31">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>season_means <span class="op">=</span> subset_enso.group_by(</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>    pl.col(<span class="st">"season"</span>),</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>    maintain_order<span class="op">=</span><span class="va">True</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>).agg(</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>    pl.col(<span class="st">"snow"</span>).mean().alias(<span class="st">"mean_snow"</span>)</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="e8f7da84" class="cell" data-execution_count="32">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>sns.relplot(</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>    data<span class="op">=</span>season_means,</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>    kind<span class="op">=</span><span class="st">"line"</span>,</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span><span class="st">"season"</span>,</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span><span class="st">"mean_snow"</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>).figure.set_size_inches(<span class="dv">9</span>, <span class="dv">4</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="intro_seaborn_files/figure-html/cell-33-output-1.png" width="789" height="388" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>But it isn’t necessary with seaborn which is a statistically oriented plotting framework:</p>
<div id="9b2d384a" class="cell" data-execution_count="33">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>sns.relplot(</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>    data<span class="op">=</span>subset_enso,</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>    kind<span class="op">=</span><span class="st">"line"</span>,</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span><span class="st">"season"</span>,</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span><span class="st">"snow"</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>).figure.set_size_inches(<span class="dv">9</span>, <span class="dv">4</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="intro_seaborn_files/figure-html/cell-34-output-1.png" width="788" height="388" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="regression-plots" class="level3">
<h3 class="anchored" data-anchor-id="regression-plots">Regression plots</h3>
<p><code>regplot</code></p>
<div id="adda9da0" class="cell" data-execution_count="34">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>sns.regplot(</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>    data<span class="op">=</span>subset_enso,</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span><span class="st">"season"</span>,</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span><span class="st">"snow"</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>).figure.set_size_inches(<span class="dv">9</span>, <span class="dv">4</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="intro_seaborn_files/figure-html/cell-35-output-1.png" width="724" height="337" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p><code>lmplot</code></p>
<div id="cbd20329" class="cell" data-execution_count="35">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>sns.lmplot(</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>    data<span class="op">=</span>subset_enso,</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span><span class="st">"season"</span>,</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span><span class="st">"snow"</span>,</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>    hue<span class="op">=</span><span class="st">"enso"</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>).figure.set_size_inches(<span class="dv">9</span>, <span class="dv">4</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="intro_seaborn_files/figure-html/cell-36-output-1.png" width="808" height="388" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="9dfb2f46" class="cell" data-execution_count="36">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>el_nino_seasons <span class="op">=</span> subset_enso.<span class="bu">filter</span>(</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>    pl.col(<span class="st">"enso"</span>) <span class="op">==</span> <span class="st">"El Niño"</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="1c00e13f" class="cell" data-execution_count="37">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>sns.relplot(</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>    data<span class="op">=</span>el_nino_seasons,</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>    kind<span class="op">=</span><span class="st">"line"</span>,</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span><span class="st">"season"</span>,</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span><span class="st">"snow"</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>).figure.set_size_inches(<span class="dv">9</span>, <span class="dv">4</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="intro_seaborn_files/figure-html/cell-38-output-1.png" width="789" height="389" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="e06dc995" class="cell" data-execution_count="38">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>sns.regplot(</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>    data<span class="op">=</span>el_nino_seasons,</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span><span class="st">"season"</span>,</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span><span class="st">"snow"</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>).figure.set_size_inches(<span class="dv">9</span>, <span class="dv">4</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="intro_seaborn_files/figure-html/cell-39-output-1.png" width="724" height="337" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div class="exo">
<div class="yourturn">
<p>Your turn:</p>
</div>
<p>Make the same plot with only the stations below 1100m to see whether climate change is affecting low elevations more strongly.</p>
<!-- ```{python} -->
<!-- sns.regplot( -->
<!--    data=low_stations, -->
<!--    x="season", -->
<!--    y="snow" -->
<!-- ).figure.set_size_inches(9, 4) -->
<!-- ``` -->
</div>
</section>
<section id="boxplots" class="level3">
<h3 class="anchored" data-anchor-id="boxplots">Boxplots</h3>
<div id="9e5b5850" class="cell" data-execution_count="41">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>sns.boxplot(</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>    data<span class="op">=</span>subset_enso,</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span><span class="st">"enso"</span>,</span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span><span class="st">"snow"</span>,</span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>    order<span class="op">=</span>[<span class="st">"La Niña"</span>, <span class="st">"Neutral"</span>, <span class="st">"El Niño"</span>]</span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>).figure.set_size_inches(<span class="dv">9</span>, <span class="dv">9</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="intro_seaborn_files/figure-html/cell-42-output-1.png" width="742" height="725" class="figure-img"></p>
</figure>
</div>
</div>
</div>



</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body" role="list">
<div id="ref-Waskom2021" class="csl-entry" role="listitem">
<div class="csl-left-margin">1. </div><div class="csl-right-inline">Waskom ML (2021) Seaborn: Statistical data visualization. Journal of Open Source Software 6(60):3021. <a href="https://doi.org/10.21105/joss.03021">https://doi.org/10.21105/joss.03021</a></div>
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/mint\.westdri\.ca\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../python/intro_matplotlib.html" class="pagination-link" aria-label="matplotlib">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">matplotlib</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../python/intro_oop.html" class="pagination-link" aria-label="Object-oriented programming">
        <span class="nav-page-text">Object-oriented programming</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="../about.html">
<p>About</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="../talks/index.html">
<p>Talks</p>
</a>
  </li>  
</ul>
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/WestDRI" target="_blank">
      <i class="bi bi-github" role="img" aria-label="GitHub organization">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://docs.alliancecan.ca/wiki/Technical_documentation" target="_blank">
      <i class="bi bi-wikipedia" role="img" aria-label="Alliance wikipedia">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://www.youtube.com/channel/UCfgds4Qf7VFOv4ORRvFFmhw" target="_blank">
      <i class="bi bi-youtube" role="img" aria-label="YouTube channel">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://mint.westdri.ca/calendar">
      <i class="bi bi-calendar-week" role="img" aria-label="Training calendar">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://mint.westdri.ca/newsletter">
      <i class="bi bi-envelope-fill" role="img" aria-label="Newsletter">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://mint.westdri.ca/contact">
      <i class="bi bi-mailbox2" role="img" aria-label="Contact us">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>