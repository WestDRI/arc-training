{
  "hash": "3e2021b1edc7611cc3881cdea4719cf5",
  "result": {
    "markdown": "---\ntitle: Pipes and redirections\nauthor:\n  - Marie-Hélène Burle\n  - Alex Razoumov\n---\n\n::: {.cell hash='redirections_cache/html/unnamed-chunk-1_d98a4bf867bd11b1fb3ded954fa9726a'}\n\n:::\n\n\nFor this section, we will be using data put together by [The Carpentries](https://carpentries.org/). You can download it by clicking [here](http://bit.ly/bashfile).\n\nThis will download a zip filed called `bfiles.zip`. Unzip it to your home directory. You should now see a `data-shell` directory. In it is a subdirectory called `molecules`.\n\nThis is what we will use for now, so `cd` into it:\n\n```{.bash}\ncd data-shell/molecules\n```\n\nNow, let's explore the data:\n\n```{.bash}\nls\n```\n\n```\ncubane.pdb\nethane.pdb\nmethane.pdb\noctane.pdb\npentane.pdb\npropane.pdb\n```\n\n\n::: {.cell hash='redirections_cache/html/unnamed-chunk-2_271917025ab35336e898098db559ed30'}\n\n```{.bash .cell-code}\nls p*        # This wildcard gets expanded to any file starting with p\n```\n\n\n::: {.cell-output .cell-output-stdout}\n```\npentane.pdb\npropane.pdb\n```\n:::\n:::\n\n::: {.cell hash='redirections_cache/html/unnamed-chunk-3_2c9b16b088ce2d2f4533b06594b0b312'}\n\n```{.bash .cell-code}\nls *.pdb     # This wildcard gets expanded to any .pdb file\n```\n\n\n::: {.cell-output .cell-output-stdout}\n```\ncubane.pdb\nethane.pdb\nmethane.pdb\noctane.pdb\npentane.pdb\npropane.pdb\n```\n:::\n:::\n\n::: {.cell hash='redirections_cache/html/unnamed-chunk-4_22adb386642f2ea786c42a8129067949'}\n\n```{.bash .cell-code}\nwc -l *.pdb  # Prints the number of lines in each .pdb file\n```\n\n\n::: {.cell-output .cell-output-stdout}\n```\n  20 cubane.pdb\n  12 ethane.pdb\n   9 methane.pdb\n  30 octane.pdb\n  21 pentane.pdb\n  15 propane.pdb\n 107 total\n```\n:::\n:::\n\n\n## Redirections\n\nBy default, commands that produce an output print it to [standard output](https://en.wikipedia.org/wiki/Standard_streams#Standard_output_(stdout))—that is, the terminal. This output can however be redirected with the `>` sign. For instance, it can be redirected to a file:\n\n\n::: {.cell hash='redirections_cache/html/unnamed-chunk-5_8da60f50fdf7741e58868b43cc381244'}\n\n```{.bash .cell-code}\nwc -l *.pdb > lengths.txt\n```\n:::\n\n\nIf you ran the `ls` command again, you would see that there is now a new file called `lengths.txt`. Let's print its content to the terminal:\n\n\n::: {.cell hash='redirections_cache/html/unnamed-chunk-6_1aec4cca3495cab48020ca25e6b88003'}\n\n```{.bash .cell-code}\ncat lengths.txt\n```\n\n\n::: {.cell-output .cell-output-stdout}\n```\n  20 cubane.pdb\n  12 ethane.pdb\n   9 methane.pdb\n  30 octane.pdb\n  21 pentane.pdb\n  15 propane.pdb\n 107 total\n```\n:::\n:::\n\n\nAs you can see, it contains the output of the command `wc -l *.pdb`.\n\nOf course, we can print the content of the file with modification. For instance, we can sort it:\n\n\n::: {.cell hash='redirections_cache/html/unnamed-chunk-7_30c757553688a20c9db9cbd32278634f'}\n\n```{.bash .cell-code}\nsort -n lengths.txt\n```\n\n\n::: {.cell-output .cell-output-stdout}\n```\n   9 methane.pdb\n  12 ethane.pdb\n  15 propane.pdb\n  20 cubane.pdb\n  21 pentane.pdb\n  30 octane.pdb\n 107 total\n```\n:::\n:::\n\n\nAnd we can redirect this new output to a new file:\n\n\n::: {.cell hash='redirections_cache/html/unnamed-chunk-8_754d212c53ba9ddf0a0011efdd61f7b6'}\n\n```{.bash .cell-code}\nsort -n lengths.txt > sorted.txt\n```\n:::\n\n\nInstead of printing an entire file to the terminal, you can print only part of it.\n\nLet's print the first line of the new file `sorted.txt`:\n\n\n::: {.cell hash='redirections_cache/html/unnamed-chunk-9_85e334dc4cf453599f183af14eb5459e'}\n\n```{.bash .cell-code}\nhead -1 sorted.txt\n```\n\n\n::: {.cell-output .cell-output-stdout}\n```\n   9 methane.pdb\n```\n:::\n:::\n\n\n## Pipes\n\nAnother form of redirection is the pipe. Instead of redirecting the output to a different stream for printing, the output is passed as an argument to another command. This is very convenient because it allows to chain multiple commands without having to create files or variables to save the intermediate results.\n\nFor instance, we could run the three commands we ran previously at once, without the creation of two files to get there:\n\n\n::: {.cell hash='redirections_cache/html/unnamed-chunk-10_2e7be4cb42384acc276e73323e5f2dfd'}\n\n```{.bash .cell-code}\nwc -l *.pdb | sort -n | head -1\n```\n\n\n::: {.cell-output .cell-output-stdout}\n```\n   9 methane.pdb\n```\n:::\n:::\n\n\n:::{.exo}\n\n:::{.yourturn}\n\nYour turn:\n\n:::\n\nIn a directory we want to find the 3 files that have the least number of lines. Which command would work for this?\n\n1. `wc -l * > sort -n > head -3`\n2. `wc -l * | sort -n | head 1-3`\n3. `wc -l * | head -3 | sort -n`\n4. `wc -l * | sort -n | head -3`\n\n:::\n\n*[Here](https://youtu.be/lueQ-KxLFYI) is a video of a previous version of this workshop.*\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}