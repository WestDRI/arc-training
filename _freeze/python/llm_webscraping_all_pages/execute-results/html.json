{
  "hash": "0f4a366113d3ec2e93de2f5cb5173f55",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: Getting the full data\nauthor: Marie-Hélène Burle\n---\n\n## Getting the full data\n\n::: {#b4765ea9 .cell execution_count=1}\n``` {.python .cell-code}\ndef get_dissertation_data(BASE_URL):\n    # Get main page and extract dissertation URLs\n    main_page = requests.get(BASE_URL)\n    soup = BeautifulSoup(main_page.content, \"html.parser\")\n\n    # Extract individual dissertation links\n    links = [urljoin(BASE_URL, a[\"href\"])\n             for a in soup.select(\".article-listing a\")]\n\n    data = []\n\n    for link in links[:10]:  # Reduced to 10 for testing; remove slice for full 100\n        try:\n            # Get individual dissertation page\n            page = requests.get(link)\n            page_soup = BeautifulSoup(page.content, \"html.parser\")\n\n            # Extract required fields\n            date = page_soup.select_one(\"#publication_date p\").text.strip()\n            major = page_soup.select_one(\"#department p\").text.strip()\n            advisor = page_soup.select_one(\"#advisor1 p\").text.strip()\n\n            data.append({\n                \"Date\": date,\n                \"Major\": major,\n                \"Advisor\": advisor\n            })\n\n        except Exception as e:\n            print(f\"Error processing {link}: {str(e)}\")\n\n    return pl.DataFrame(data)\n```\n:::\n\n\nWe can verify that it still works:\n\n::: {#8927dfd0 .cell execution_count=2}\n``` {.python .cell-code}\ndf = get_dissertation_data(BASE_URL)\nprint(df)\n```\n\n::: {.cell-output .cell-output-error}\n\n::: {.ansi-escaped-output}\n```{=html}\n<pre><span class=\"ansi-bright-red-fg\">---------------------------------------------------------------------------</span>\n<span class=\"ansi-bright-red-fg\">NameError</span>                                 Traceback (most recent call last)\n<span class=\"ansi-bright-cyan-fg\">Cell</span><span class=\"ansi-bright-cyan-fg\"> </span><span class=\"ansi-green-fg\">In[2]</span><span class=\"ansi-green-fg\">, line 1</span>\n<span class=\"ansi-bright-green-fg\">----&gt; </span><span class=\"ansi-bright-green-fg\">1</span> <span class=\"ansi-bright-white-fg\">df</span><span class=\"ansi-bright-white-fg\"> </span><span style=\"color:rgb(255,95,135)\">=</span><span class=\"ansi-bright-white-fg\"> </span><span class=\"ansi-bright-white-fg\">get_dissertation_data</span><span class=\"ansi-bright-white-fg\">(</span><span class=\"ansi-bright-white-fg ansi-yellow-bg\">BASE_URL</span><span class=\"ansi-bright-white-fg\">)</span>\n<span class=\"ansi-bright-green-fg\">      2</span> <span class=\"ansi-bright-white-fg\">print</span><span class=\"ansi-bright-white-fg\">(</span><span class=\"ansi-bright-white-fg\">df</span><span class=\"ansi-bright-white-fg\">)</span>\n\n<span class=\"ansi-bright-red-fg\">NameError</span>: name 'BASE_URL' is not defined</pre>\n```\n:::\n\n:::\n:::\n\n\n:::{.note}\n\nNote that we now have to pass the argument `BASE_URL` to the function.\n\n:::\n\nLet's look at the `range` function to understand how it works:\n\n::: {#db5c8454 .cell execution_count=3}\n``` {.python .cell-code}\nfor i in range(5):\n    print(i)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n0\n1\n2\n3\n4\n```\n:::\n:::\n\n\n`range(5)` is the same as `range(0, 5)`. It goes from `0`—since Python starts indexing at `0`—and that left boundary is included to `4` because the right boundary (`5` here) is excluded.\n\nSo `range(116)` would go from `0` to `115`. You could verify it with:\n\n```{.python}\nfor i in range(116):\n    print(i)\n```\n\n:::{.exo}\n\n:::{.yourturn}\n\nYour turn:\n\n:::\n\n- We want numbers from `2` to `117`, so what arguments do we need to pass to the `range` function? \\\n- How can you test it?\n\n:::\n\nApplied to the series of webpages, that would be:\n\n```{.python}\nfor i in range(2, 118):\n    print(f\"https://trace.tennessee.edu/utk_graddiss/index.{i}.html\")\n```\n\nThis is good, so let's create a list with those webpages.\n\nFirst, we initialize an empty list of the proper length (this makes the code much more efficient than forcing Python to perform dynamic memory allocation at each iteration of the loop):\n\n::: {#82359582 .cell execution_count=4}\n``` {.python .cell-code}\nurl_list = [None] * 116\n```\n:::\n\n\nNow we can fill in the list with the URLs with a loop:\n\n::: {#8bda2988 .cell execution_count=5}\n``` {.python .cell-code}\nfor i in range(2, 118):\n    url_list[i] = f\"https://trace.tennessee.edu/utk_graddiss/index.{i}.html\"\n```\n\n::: {.cell-output .cell-output-error}\n\n::: {.ansi-escaped-output}\n```{=html}\n<pre><span class=\"ansi-bright-red-fg\">---------------------------------------------------------------------------</span>\n<span class=\"ansi-bright-red-fg\">IndexError</span>                                Traceback (most recent call last)\n<span class=\"ansi-bright-cyan-fg\">Cell</span><span class=\"ansi-bright-cyan-fg\"> </span><span class=\"ansi-green-fg\">In[5]</span><span class=\"ansi-green-fg\">, line 2</span>\n<span class=\"ansi-bright-green-fg\">      1</span> <span style=\"color:rgb(95,215,255)\">for</span><span class=\"ansi-bright-white-fg\"> </span><span class=\"ansi-bright-white-fg\">i</span><span class=\"ansi-bright-white-fg\"> </span><span style=\"color:rgb(255,95,135)\">in</span><span class=\"ansi-bright-white-fg\"> </span><span class=\"ansi-bright-white-fg\">range</span><span class=\"ansi-bright-white-fg\">(</span><span style=\"color:rgb(175,135,255)\">2</span><span class=\"ansi-bright-white-fg\">,</span><span class=\"ansi-bright-white-fg\"> </span><span style=\"color:rgb(175,135,255)\">118</span><span class=\"ansi-bright-white-fg\">)</span><span class=\"ansi-bright-white-fg\">:</span>\n<span class=\"ansi-bright-green-fg\">----&gt; </span><span class=\"ansi-bright-green-fg\">2</span> <span class=\"ansi-bright-white-fg\">    </span><span class=\"ansi-bright-white-fg ansi-yellow-bg\">url_list</span><span class=\"ansi-bright-white-fg ansi-yellow-bg\">[</span><span class=\"ansi-bright-white-fg ansi-yellow-bg\">i</span><span class=\"ansi-bright-white-fg ansi-yellow-bg\">]</span><span class=\"ansi-bright-white-fg\"> </span><span style=\"color:rgb(255,95,135)\">=</span><span class=\"ansi-bright-white-fg\"> </span><span style=\"color:rgb(215,215,135)\">f</span><span style=\"color:rgb(215,215,135)\">\"</span><span style=\"color:rgb(215,215,135)\">https://trace.tennessee.edu/utk_graddiss/index.</span><span style=\"color:rgb(215,215,135)\">{</span><span class=\"ansi-bright-white-fg\">i</span><span style=\"color:rgb(215,215,135)\">}</span><span style=\"color:rgb(215,215,135)\">.html</span><span style=\"color:rgb(215,215,135)\">\"</span>\n\n<span class=\"ansi-bright-red-fg\">IndexError</span>: list assignment index out of range</pre>\n```\n:::\n\n:::\n:::\n\n\nLet's print our list to make sure that all is good:\n\n::: {#10229cca .cell execution_count=6}\n``` {.python .cell-code}\nprint(url_list)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[None, None, 'https://trace.tennessee.edu/utk_graddiss/index.2.html', 'https://trace.tennessee.edu/utk_graddiss/index.3.html', 'https://trace.tennessee.edu/utk_graddiss/index.4.html', 'https://trace.tennessee.edu/utk_graddiss/index.5.html', 'https://trace.tennessee.edu/utk_graddiss/index.6.html', 'https://trace.tennessee.edu/utk_graddiss/index.7.html', 'https://trace.tennessee.edu/utk_graddiss/index.8.html', 'https://trace.tennessee.edu/utk_graddiss/index.9.html', 'https://trace.tennessee.edu/utk_graddiss/index.10.html', 'https://trace.tennessee.edu/utk_graddiss/index.11.html', 'https://trace.tennessee.edu/utk_graddiss/index.12.html', 'https://trace.tennessee.edu/utk_graddiss/index.13.html', 'https://trace.tennessee.edu/utk_graddiss/index.14.html', 'https://trace.tennessee.edu/utk_graddiss/index.15.html', 'https://trace.tennessee.edu/utk_graddiss/index.16.html', 'https://trace.tennessee.edu/utk_graddiss/index.17.html', 'https://trace.tennessee.edu/utk_graddiss/index.18.html', 'https://trace.tennessee.edu/utk_graddiss/index.19.html', 'https://trace.tennessee.edu/utk_graddiss/index.20.html', 'https://trace.tennessee.edu/utk_graddiss/index.21.html', 'https://trace.tennessee.edu/utk_graddiss/index.22.html', 'https://trace.tennessee.edu/utk_graddiss/index.23.html', 'https://trace.tennessee.edu/utk_graddiss/index.24.html', 'https://trace.tennessee.edu/utk_graddiss/index.25.html', 'https://trace.tennessee.edu/utk_graddiss/index.26.html', 'https://trace.tennessee.edu/utk_graddiss/index.27.html', 'https://trace.tennessee.edu/utk_graddiss/index.28.html', 'https://trace.tennessee.edu/utk_graddiss/index.29.html', 'https://trace.tennessee.edu/utk_graddiss/index.30.html', 'https://trace.tennessee.edu/utk_graddiss/index.31.html', 'https://trace.tennessee.edu/utk_graddiss/index.32.html', 'https://trace.tennessee.edu/utk_graddiss/index.33.html', 'https://trace.tennessee.edu/utk_graddiss/index.34.html', 'https://trace.tennessee.edu/utk_graddiss/index.35.html', 'https://trace.tennessee.edu/utk_graddiss/index.36.html', 'https://trace.tennessee.edu/utk_graddiss/index.37.html', 'https://trace.tennessee.edu/utk_graddiss/index.38.html', 'https://trace.tennessee.edu/utk_graddiss/index.39.html', 'https://trace.tennessee.edu/utk_graddiss/index.40.html', 'https://trace.tennessee.edu/utk_graddiss/index.41.html', 'https://trace.tennessee.edu/utk_graddiss/index.42.html', 'https://trace.tennessee.edu/utk_graddiss/index.43.html', 'https://trace.tennessee.edu/utk_graddiss/index.44.html', 'https://trace.tennessee.edu/utk_graddiss/index.45.html', 'https://trace.tennessee.edu/utk_graddiss/index.46.html', 'https://trace.tennessee.edu/utk_graddiss/index.47.html', 'https://trace.tennessee.edu/utk_graddiss/index.48.html', 'https://trace.tennessee.edu/utk_graddiss/index.49.html', 'https://trace.tennessee.edu/utk_graddiss/index.50.html', 'https://trace.tennessee.edu/utk_graddiss/index.51.html', 'https://trace.tennessee.edu/utk_graddiss/index.52.html', 'https://trace.tennessee.edu/utk_graddiss/index.53.html', 'https://trace.tennessee.edu/utk_graddiss/index.54.html', 'https://trace.tennessee.edu/utk_graddiss/index.55.html', 'https://trace.tennessee.edu/utk_graddiss/index.56.html', 'https://trace.tennessee.edu/utk_graddiss/index.57.html', 'https://trace.tennessee.edu/utk_graddiss/index.58.html', 'https://trace.tennessee.edu/utk_graddiss/index.59.html', 'https://trace.tennessee.edu/utk_graddiss/index.60.html', 'https://trace.tennessee.edu/utk_graddiss/index.61.html', 'https://trace.tennessee.edu/utk_graddiss/index.62.html', 'https://trace.tennessee.edu/utk_graddiss/index.63.html', 'https://trace.tennessee.edu/utk_graddiss/index.64.html', 'https://trace.tennessee.edu/utk_graddiss/index.65.html', 'https://trace.tennessee.edu/utk_graddiss/index.66.html', 'https://trace.tennessee.edu/utk_graddiss/index.67.html', 'https://trace.tennessee.edu/utk_graddiss/index.68.html', 'https://trace.tennessee.edu/utk_graddiss/index.69.html', 'https://trace.tennessee.edu/utk_graddiss/index.70.html', 'https://trace.tennessee.edu/utk_graddiss/index.71.html', 'https://trace.tennessee.edu/utk_graddiss/index.72.html', 'https://trace.tennessee.edu/utk_graddiss/index.73.html', 'https://trace.tennessee.edu/utk_graddiss/index.74.html', 'https://trace.tennessee.edu/utk_graddiss/index.75.html', 'https://trace.tennessee.edu/utk_graddiss/index.76.html', 'https://trace.tennessee.edu/utk_graddiss/index.77.html', 'https://trace.tennessee.edu/utk_graddiss/index.78.html', 'https://trace.tennessee.edu/utk_graddiss/index.79.html', 'https://trace.tennessee.edu/utk_graddiss/index.80.html', 'https://trace.tennessee.edu/utk_graddiss/index.81.html', 'https://trace.tennessee.edu/utk_graddiss/index.82.html', 'https://trace.tennessee.edu/utk_graddiss/index.83.html', 'https://trace.tennessee.edu/utk_graddiss/index.84.html', 'https://trace.tennessee.edu/utk_graddiss/index.85.html', 'https://trace.tennessee.edu/utk_graddiss/index.86.html', 'https://trace.tennessee.edu/utk_graddiss/index.87.html', 'https://trace.tennessee.edu/utk_graddiss/index.88.html', 'https://trace.tennessee.edu/utk_graddiss/index.89.html', 'https://trace.tennessee.edu/utk_graddiss/index.90.html', 'https://trace.tennessee.edu/utk_graddiss/index.91.html', 'https://trace.tennessee.edu/utk_graddiss/index.92.html', 'https://trace.tennessee.edu/utk_graddiss/index.93.html', 'https://trace.tennessee.edu/utk_graddiss/index.94.html', 'https://trace.tennessee.edu/utk_graddiss/index.95.html', 'https://trace.tennessee.edu/utk_graddiss/index.96.html', 'https://trace.tennessee.edu/utk_graddiss/index.97.html', 'https://trace.tennessee.edu/utk_graddiss/index.98.html', 'https://trace.tennessee.edu/utk_graddiss/index.99.html', 'https://trace.tennessee.edu/utk_graddiss/index.100.html', 'https://trace.tennessee.edu/utk_graddiss/index.101.html', 'https://trace.tennessee.edu/utk_graddiss/index.102.html', 'https://trace.tennessee.edu/utk_graddiss/index.103.html', 'https://trace.tennessee.edu/utk_graddiss/index.104.html', 'https://trace.tennessee.edu/utk_graddiss/index.105.html', 'https://trace.tennessee.edu/utk_graddiss/index.106.html', 'https://trace.tennessee.edu/utk_graddiss/index.107.html', 'https://trace.tennessee.edu/utk_graddiss/index.108.html', 'https://trace.tennessee.edu/utk_graddiss/index.109.html', 'https://trace.tennessee.edu/utk_graddiss/index.110.html', 'https://trace.tennessee.edu/utk_graddiss/index.111.html', 'https://trace.tennessee.edu/utk_graddiss/index.112.html', 'https://trace.tennessee.edu/utk_graddiss/index.113.html', 'https://trace.tennessee.edu/utk_graddiss/index.114.html', 'https://trace.tennessee.edu/utk_graddiss/index.115.html']\n```\n:::\n:::\n\n\n",
    "supporting": [
      "llm_webscraping_all_pages_files"
    ],
    "filters": [],
    "includes": {}
  }
}